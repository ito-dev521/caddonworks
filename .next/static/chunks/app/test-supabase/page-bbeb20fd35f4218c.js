(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{79559:function(e,s,t){Promise.resolve().then(t.bind(t,26953))},26953:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return r}});var a=t(57437),n=t(2265),c=t(14958);function r(){var e,s,t,r,l,i,d,o;let[m,x]=(0,n.useState)("checking"),[u,h]=(0,n.useState)(""),[p,b]=(0,n.useState)({supabaseUrl:"",supabaseAnonKey:"",serviceRoleKey:""}),[j,v]=(0,n.useState)(null);(0,n.useEffect)(()=>{N(),y(),g()},[]);let g=async()=>{try{let e=await fetch("/api/check-env"),s=await e.json();v(s)}catch(e){console.error("サーバー環境変数チェックエラー:",e)}},y=()=>{b({supabaseUrl:"https://rxnozwuamddqlcwysxag.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NjY4MDMsImV4cCI6MjA3MzM0MjgwM30.0sbl6zWJ1XalGTFbsgeMpth6yH-oQA_P1eTCc8lKoAU",serviceRoleKey:"サーバーサイドでのみ確認可能"})},N=async()=>{try{x("checking");let{data:e,error:s}=await c.OQ.from("users").select("count").limit(1);s?(s.message.includes("Failed to fetch")?h("Supabaseへの接続に失敗しました。環境変数を確認してください。"):s.message.includes('relation "users" does not exist')?h("usersテーブルが存在しません。データベースのセットアップが必要です。"):h("データベースエラー: ".concat(s.message)),x("error")):(x("connected"),h(""))}catch(e){x("error"),h("接続エラー: ".concat(e instanceof Error?e.message:"不明なエラー"))}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Supabase接続テスト"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((()=>{switch(m){case"checking":return"text-yellow-600 bg-yellow-100";case"connected":return"text-green-600 bg-green-100";case"error":return"text-red-600 bg-red-100"}})()),children:(()=>{switch(m){case"checking":return"接続確認中...";case"connected":return"接続成功";case"error":return"接続エラー"}})()}),(0,a.jsx)("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"再接続テスト"})]}),u&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsx)("p",{className:"text-red-800 text-sm",children:u})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"環境変数の設定状況"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-md font-medium text-gray-800 mb-2",children:"クライアントサイド（ブラウザ）"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600 w-32",children:"SUPABASE_URL:"}),(0,a.jsx)("span",{className:"text-sm ".concat(p.supabaseUrl?"text-green-600":"text-red-600"),children:p.supabaseUrl?"設定済み":"未設定"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600 w-32",children:"ANON_KEY:"}),(0,a.jsx)("span",{className:"text-sm ".concat(p.supabaseAnonKey?"text-green-600":"text-red-600"),children:p.supabaseAnonKey?"設定済み":"未設定"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-md font-medium text-gray-800 mb-2",children:"サーバーサイド（API）"}),j?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600 w-32",children:"SUPABASE_URL:"}),(0,a.jsx)("span",{className:"text-sm ".concat((null===(e=j.env)||void 0===e?void 0:e.supabaseUrl)?"text-green-600":"text-red-600"),children:(null===(s=j.env)||void 0===s?void 0:s.supabaseUrl)?"設定済み":"未設定"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600 w-32",children:"ANON_KEY:"}),(0,a.jsx)("span",{className:"text-sm ".concat((null===(t=j.env)||void 0===t?void 0:t.supabaseAnonKey)?"text-green-600":"text-red-600"),children:(null===(r=j.env)||void 0===r?void 0:r.supabaseAnonKey)?"設定済み":"未設定"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600 w-32",children:"SERVICE_ROLE:"}),(0,a.jsx)("span",{className:"text-sm ".concat((null===(l=j.env)||void 0===l?void 0:l.serviceRoleKey)?"text-green-600":"text-red-600"),children:(null===(i=j.env)||void 0===i?void 0:i.serviceRoleKey)?"設定済み":"未設定"}),(null===(d=j.env)||void 0===d?void 0:d.serviceRoleKey)&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(長さ: ",null===(o=j.env)||void 0===o?void 0:o.serviceRoleKeyLength,"文字)"]})]})]}):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"サーバー環境変数を確認中..."})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"設定手順"}),(0,a.jsxs)("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[(0,a.jsxs)("li",{children:["プロジェクトルートに ",(0,a.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:".env.local"})," ファイルを作成"]}),(0,a.jsx)("li",{children:"Supabase Dashboard から API キーを取得"}),(0,a.jsx)("li",{children:"環境変数を設定して開発サーバーを再起動"}),(0,a.jsx)("li",{children:"データベーステーブルを作成（SQLファイルを実行）"})]})]}),p.supabaseUrl&&(0,a.jsxs)("div",{className:"mt-6 bg-gray-50 rounded-md p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"設定情報"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Supabase URL:"})," ",p.supabaseUrl]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Anon Key:"})," ",p.supabaseAnonKey?"".concat(p.supabaseAnonKey.substring(0,20),"..."):"未設定"]})]})]})]})})})}},14958:function(e,s,t){"use strict";t.d(s,{OQ:function(){return n}});var a=t(37440);t(62601);let n=(0,a.eI)("https://rxnozwuamddqlcwysxag.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NjY4MDMsImV4cCI6MjA3MzM0MjgwM30.0sbl6zWJ1XalGTFbsgeMpth6yH-oQA_P1eTCc8lKoAU")},30622:function(e,s,t){"use strict";var a=t(2265),n=Symbol.for("react.element"),c=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,s,t){var a,c={},d=null,o=null;for(a in void 0!==t&&(d=""+t),void 0!==s.key&&(d=""+s.key),void 0!==s.ref&&(o=s.ref),s)r.call(s,a)&&!i.hasOwnProperty(a)&&(c[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===c[a]&&(c[a]=s[a]);return{$$typeof:n,type:e,key:d,ref:o,props:c,_owner:l.current}}s.Fragment=c,s.jsx=d,s.jsxs=d},57437:function(e,s,t){"use strict";e.exports=t(30622)}},function(e){e.O(0,[440,971,938,744],function(){return e(e.s=79559)}),_N_E=e.O()}]);