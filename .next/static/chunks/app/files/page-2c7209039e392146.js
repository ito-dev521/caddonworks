(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{75093:function(e,s,a){Promise.resolve().then(a.bind(a,17476))},17476:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return $}});var t=a(57437),i=a(2265),l=a(65251),n=a(62167),r=a(76637),c=a(38438),d=a(28734),x=a(13008),m=a(72894),o=a(6141),h=a(93167),j=a(49036),p=a(31541),g=a(90890),u=a(5589),N=a(41827),v=a(42482),f=a(71813),b=a(4689),y=a(99670),w=a(90998),Z=a(35817),k=a(52431),C=a(65592),z=a(575),S=a(15671),_=a(33277),D=a(14440),E=a(4994),B=a(82314),M=a(82549),A=a(74056);function O(e){let{isOpen:s,onClose:a}=e,[h,u]=(0,i.useState)(!1),[N,v]=(0,i.useState)([]),[f,b]=(0,i.useState)(""),y=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)},[]),w=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!1),Z(Array.from(e.dataTransfer.files))},[]),Z=e=>{let s=e.map((e,s)=>({id:"".concat(Date.now(),"-").concat(s),file:e,progress:0,status:"uploading"}));v(e=>[...e,...s]),s.forEach((e,s)=>{k(e.id,500*s)})},k=(e,s)=>{setTimeout(()=>{let s=setInterval(()=>{v(a=>a.map(a=>{if(a.id===e&&"uploading"===a.status){let t=a.progress+15*Math.random();return t>=100?(clearInterval(s),setTimeout(()=>{v(s=>s.map(s=>s.id===e?{...s,status:"scanning",progress:0}:s)),C(e)},500),{...a,progress:100,status:"uploading"}):{...a,progress:t}}return a}))},200)},s)},C=e=>{let s=setInterval(()=>{v(a=>a.map(a=>{if(a.id===e&&"scanning"===a.status){let t=a.progress+20*Math.random();if(t>=100){clearInterval(s);let t=Math.random()>.95?"infected":"clean";return setTimeout(()=>{v(s=>s.map(s=>s.id===e?{...s,status:"infected"===t?"error":"success",progress:100,scanResult:t}:s))},300),{...a,progress:100}}return{...a,progress:t}}return a}))},150)},S=e=>{var s;switch(null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase()){case"dwg":case"dxf":case"docx":case"doc":return(0,t.jsx)(r.Z,{className:"w-8 h-8 text-blue-600"});case"pdf":return(0,t.jsx)(r.Z,{className:"w-8 h-8 text-red-600"});case"xlsx":case"xls":return(0,t.jsx)(r.Z,{className:"w-8 h-8 text-green-600"});case"jpg":case"jpeg":case"png":return(0,t.jsx)(c.Z,{className:"w-8 h-8 text-purple-600"});case"zip":case"rar":return(0,t.jsx)(g.Z,{className:"w-8 h-8 text-orange-600"});default:return(0,t.jsx)(d.Z,{className:"w-8 h-8 text-gray-600"})}},E=(e,s)=>{switch(e){case"uploading":return(0,t.jsx)(p.Z,{className:"w-4 h-4 text-blue-500 animate-pulse"});case"scanning":return(0,t.jsx)(B.Z,{className:"w-4 h-4 text-yellow-500 animate-spin"});case"success":return"clean"===s?(0,t.jsx)(x.Z,{className:"w-4 h-4 text-green-500"}):(0,t.jsx)(m.Z,{className:"w-4 h-4 text-orange-500"});case"error":return(0,t.jsx)(m.Z,{className:"w-4 h-4 text-red-500"});default:return(0,t.jsx)(o.Z,{className:"w-4 h-4 text-gray-400"})}},O=e=>{if(0===e)return"0 Byte";let s=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]},T=e=>{v(s=>s.filter(s=>s.id!==e))};return s?(0,t.jsx)(n.M,{children:(0,t.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:a,children:(0,t.jsxs)(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-engineering-blue/10 rounded-lg",children:(0,t.jsx)(p.Z,{className:"w-5 h-5 text-engineering-blue"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"ファイルアップロード"}),(0,t.jsx)("p",{className:"text-gray-600",children:"セキュリティスキャン付きファイル管理システム"})]})]}),(0,t.jsx)(z.z,{variant:"ghost",size:"icon",onClick:a,children:(0,t.jsx)(M.Z,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"p-6 max-h-[75vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"関連プロジェクト"}),(0,t.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-engineering-blue focus:border-transparent",value:f,onChange:e=>b(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"プロジェクトを選択"}),["東京都道路設計業務","橋梁点検業務","河川改修設計","トンネル設計業務","地下構造物設計"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)(l.E.div,{className:"border-2 border-dashed rounded-xl p-8 text-center transition-colors ".concat(h?"border-engineering-blue bg-engineering-blue/5":"border-gray-300 hover:border-gray-400"),onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,whileHover:{scale:1.01},whileTap:{scale:.99},children:[(0,t.jsx)(p.Z,{className:"w-16 h-16 mx-auto mb-4 ".concat(h?"text-engineering-blue":"text-gray-400")}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"ファイルをドラッグ&ドロップ"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:["または ",(0,t.jsx)("button",{className:"text-engineering-blue hover:underline",children:"クリックして選択"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(j.Z,{className:"w-4 h-4"}),"ウイルススキャン"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(r.Z,{className:"w-4 h-4"}),"CAD/PDF/Excel対応"]})]})]}),(0,t.jsx)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(A.Z,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-blue-900",children:"セキュリティ保護"}),(0,t.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"アップロードされたファイルは自動的にClamAVでスキャンされ、 SHA-256ハッシュで整合性を確認します。Box APIを通じて暗号化保存されます。"})]})]})}),N.length>0&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["アップロード進捗 (",N.length,")"]}),(0,t.jsx)("div",{className:"space-y-4",children:N.map(e=>(0,t.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 border border-gray-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[S(e.file.name),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 truncate",children:e.file.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:O(e.file.size)}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("span",{className:"text-xs text-gray-600",children:["uploading"===e.status&&"アップロード中...","scanning"===e.status&&"セキュリティスキャン中...","success"===e.status&&("clean"===e.scanResult?"完了 - 安全":"完了 - 要確認"),"error"===e.status&&"エラー - ウイルス検出"]}),(0,t.jsxs)("span",{className:"text-xs text-gray-600",children:[Math.round(e.progress),"%"]})]}),(0,t.jsx)(D.E,{value:e.progress,variant:"error"===e.status?"engineering":"success"===e.status?"default":"engineering"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(_.C,{variant:"error"===e.status?"destructive":"success"===e.status?"success":"secondary",className:"flex items-center gap-1",children:[E(e.status,e.scanResult),e.status]}),(0,t.jsx)(z.z,{variant:"ghost",size:"sm",onClick:()=>T(e.id),children:(0,t.jsx)(M.Z,{className:"w-4 h-4"})})]})]}),"success"===e.status&&e.scanResult&&(0,t.jsx)("div",{className:"mt-3 p-2 bg-gray-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(j.Z,{className:"w-4 h-4 text-green-600"}),(0,t.jsx)("span",{className:"text-green-700",children:"clean"===e.scanResult?"ウイルス未検出 - ファイルは安全です":"要注意ファイル - 管理者確認が必要です"})]})}),"error"===e.status&&(0,t.jsx)("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-700",children:[(0,t.jsx)(m.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"セキュリティ脅威が検出されました。ファイルはアップロードされていません。"})]})})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"最大ファイルサイズ: 500MB | 対応形式: DWG, PDF, Excel, Word, 画像"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(z.z,{variant:"ghost",onClick:a,children:"閉じる"}),(0,t.jsx)(z.z,{variant:"engineering",disabled:0===N.length||N.some(e=>"uploading"===e.status||"scanning"===e.status),children:"完了"})]})]})]})})}):null}var T=a(56194),P=a(41094),I=a(23086),Y=a(60979),R=a(67972),L=a(29764),U=a(33673);let V=i.forwardRef((e,s)=>{let{className:a="",...i}=e;return(0,t.jsx)("div",{ref:s,className:"border-t border-gray-200 ".concat(a),...i})});function J(e){let{fileId:s,onClose:a}=e,[c,d]=(0,i.useState)(100),[h,p]=(0,i.useState)(0),g={name:"道路設計図面_Rev3.dwg",type:"dwg",size:1542e4,uploadedAt:"2024-01-18T10:30:00Z",uploadedBy:"田中太郎",project:"東京都道路設計業務",version:3,status:"approved",scanStatus:"clean",checkOutBy:"田中太郎",downloadCount:12,lastAccessed:"2024-01-18T14:15:00Z",metadata:{drawing_number:"RD-001",scale:"1:1000",revision:"Rev.3",approval_status:"承認済み",drawing_type:"平面図",coordinate_system:"平面直角座標系",created_by:"CADソフト v2024",last_modified:"2024-01-18T10:30:00Z"},permissions:{canView:!0,canDownload:!0,canEdit:!0,canShare:!1},tags:["図面","道路","平面図"],auditLog:[{action:"viewed",user:"田中太郎",timestamp:"2024-01-18T14:15:00Z",ip:"192.168.1.100"},{action:"downloaded",user:"佐藤花子",timestamp:"2024-01-18T11:30:00Z",ip:"192.168.1.101"},{action:"checked_out",user:"田中太郎",timestamp:"2024-01-18T10:45:00Z",ip:"192.168.1.100"}]},N=e=>{if(0===e)return"0 Byte";let s=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]},v=e=>{switch(e){case"clean":return(0,t.jsx)(x.Z,{className:"w-4 h-4 text-green-500"});case"infected":return(0,t.jsx)(m.Z,{className:"w-4 h-4 text-red-500"});case"scanning":return(0,t.jsx)(o.Z,{className:"w-4 h-4 text-yellow-500 animate-spin"});default:return(0,t.jsx)(o.Z,{className:"w-4 h-4 text-gray-400"})}};return(0,t.jsx)(n.M,{children:(0,t.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex z-50",onClick:a,children:(0,t.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"w-full h-full flex",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/10 backdrop-blur-sm border-b border-white/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.Z,{className:"w-6 h-6 text-white"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:g.name}),(0,t.jsxs)("p",{className:"text-sm text-white/70",children:["v",g.version," • ",N(g.size)," • ",g.project]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(z.z,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:[(0,t.jsx)(T.Z,{className:"w-4 h-4"}),c,"%",(0,t.jsx)(P.Z,{className:"w-4 h-4"})]}),(0,t.jsx)(z.z,{variant:"ghost",size:"sm",onClick:()=>p((h+90)%360),className:"text-white hover:bg-white/20",children:(0,t.jsx)(I.Z,{className:"w-4 h-4"})}),(0,t.jsx)(z.z,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:(0,t.jsx)(Y.Z,{className:"w-4 h-4"})}),(0,t.jsx)(z.z,{variant:"ghost",size:"icon",onClick:a,className:"text-white hover:bg-white/20",children:(0,t.jsx)(M.Z,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex items-center justify-center p-8 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,t.jsxs)(_.C,{variant:"glass",className:"text-white border-white/30",children:[(0,t.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),"セキュア プレビュー"]})}),(0,t.jsx)(l.E.div,{className:"relative max-w-full max-h-full bg-white rounded-lg shadow-2xl overflow-hidden",style:{transform:"scale(".concat(c/100,") rotate(").concat(h,"deg)")},animate:{transform:"scale(".concat(c/100,") rotate(").concat(h,"deg)")},transition:{type:"spring",stiffness:300,damping:30},children:(0,t.jsxs)("div",{className:"w-[800px] h-[600px] bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,t.jsx)("div",{className:"grid grid-cols-4 grid-rows-3 h-full",children:Array.from({length:12}).map((e,s)=>(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)("div",{className:"transform rotate-45 text-2xl font-bold text-gray-600",children:g.project.substring(0,4)})},s))})}),(0,t.jsxs)("div",{className:"relative z-10 text-center",children:[(0,t.jsx)(r.Z,{className:"w-32 h-32 text-blue-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:g.name}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:["図面番号: ",g.metadata.drawing_number]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("div",{children:["縮尺: ",g.metadata.scale]}),(0,t.jsxs)("div",{children:["種別: ",g.metadata.drawing_type]})]}),(0,t.jsxs)("div",{className:"mt-8 flex justify-center space-x-4",children:[(0,t.jsx)("div",{className:"w-16 h-2 bg-blue-500"}),(0,t.jsx)("div",{className:"w-24 h-2 bg-green-500"}),(0,t.jsx)("div",{className:"w-12 h-2 bg-red-500"})]}),(0,t.jsx)("div",{className:"mt-4 text-xs text-gray-500",children:"※ この画面は透かし付きプレビューです"})]})]})}),(0,t.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-black/50 backdrop-blur-sm rounded-full px-4 py-2",children:[(0,t.jsx)(z.z,{variant:"ghost",size:"sm",onClick:()=>d(Math.max(c-25,25)),disabled:c<=25,className:"text-white hover:bg-white/20",children:(0,t.jsx)(T.Z,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"text-white text-sm font-medium",children:[c,"%"]}),(0,t.jsx)(z.z,{variant:"ghost",size:"sm",onClick:()=>d(Math.min(c+25,200)),disabled:c>=200,className:"text-white hover:bg-white/20",children:(0,t.jsx)(P.Z,{className:"w-4 h-4"})})]})})]}),(0,t.jsx)("div",{className:"p-4 bg-white/10 backdrop-blur-sm border-t border-white/20",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(_.C,{variant:"glass",className:"text-white border-white/30",children:[v(g.scanStatus),"セキュリティ: ",g.scanStatus]}),(0,t.jsxs)(_.C,{variant:"glass",className:"text-white border-white/30",children:[(0,t.jsx)(R.Z,{className:"w-3 h-3 mr-1"}),"チェックアウト: ",g.checkOutBy]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(z.z,{variant:"ghost",size:"sm",disabled:!g.permissions.canDownload,className:"text-white hover:bg-white/20",children:[(0,t.jsx)(Z.Z,{className:"w-4 h-4 mr-2"}),"ダウンロード"]}),(0,t.jsxs)(z.z,{variant:"ghost",size:"sm",disabled:!g.permissions.canShare,className:"text-white hover:bg-white/20",children:[(0,t.jsx)(L.Z,{className:"w-4 h-4 mr-2"}),"共有"]})]})]})})]}),(0,t.jsx)(l.E.div,{initial:{x:300},animate:{x:0},exit:{x:300},className:"w-80 bg-white h-full overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)(S.Zb,{children:[(0,t.jsx)(S.Ol,{className:"pb-3",children:(0,t.jsxs)(S.ll,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(A.Z,{className:"w-5 h-5"}),"ファイル情報"]})}),(0,t.jsxs)(S.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsx)("div",{className:"text-gray-600",children:"ファイル形式:"}),(0,t.jsx)("div",{className:"font-medium",children:g.type.toUpperCase()}),(0,t.jsx)("div",{className:"text-gray-600",children:"ファイルサイズ:"}),(0,t.jsx)("div",{className:"font-medium",children:N(g.size)}),(0,t.jsx)("div",{className:"text-gray-600",children:"バージョン:"}),(0,t.jsxs)("div",{className:"font-medium",children:["v",g.version]}),(0,t.jsx)("div",{className:"text-gray-600",children:"ステータス:"}),(0,t.jsx)("div",{children:(0,t.jsx)(_.C,{variant:"success",className:"text-xs",children:g.status})})]}),(0,t.jsx)(V,{}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"アップロード者:"}),(0,t.jsx)("span",{className:"font-medium",children:g.uploadedBy})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"アップロード日:"}),(0,t.jsx)("span",{children:new Date(g.uploadedAt).toLocaleDateString("ja-JP")})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"最終アクセス:"}),(0,t.jsx)("span",{children:new Date(g.lastAccessed).toLocaleString("ja-JP")})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"ダウンロード回数:"}),(0,t.jsxs)("span",{children:[g.downloadCount,"回"]})]})]})]})]}),(0,t.jsxs)(S.Zb,{children:[(0,t.jsx)(S.Ol,{className:"pb-3",children:(0,t.jsxs)(S.ll,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(r.Z,{className:"w-5 h-5"}),"技術メタデータ"]})}),(0,t.jsx)(S.aY,{className:"space-y-2 text-sm",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)("div",{className:"text-gray-600",children:"図面番号:"}),(0,t.jsx)("div",{className:"font-medium",children:g.metadata.drawing_number}),(0,t.jsx)("div",{className:"text-gray-600",children:"縮尺:"}),(0,t.jsx)("div",{className:"font-medium",children:g.metadata.scale}),(0,t.jsx)("div",{className:"text-gray-600",children:"リビジョン:"}),(0,t.jsx)("div",{className:"font-medium",children:g.metadata.revision}),(0,t.jsx)("div",{className:"text-gray-600",children:"図面種別:"}),(0,t.jsx)("div",{className:"font-medium",children:g.metadata.drawing_type}),(0,t.jsx)("div",{className:"text-gray-600",children:"座標系:"}),(0,t.jsx)("div",{className:"font-medium text-xs",children:g.metadata.coordinate_system}),(0,t.jsx)("div",{className:"text-gray-600",children:"作成ソフト:"}),(0,t.jsx)("div",{className:"font-medium text-xs",children:g.metadata.created_by})]})})]}),(0,t.jsxs)(S.Zb,{children:[(0,t.jsx)(S.Ol,{className:"pb-3",children:(0,t.jsxs)(S.ll,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(U.Z,{className:"w-5 h-5"}),"タグ"]})}),(0,t.jsx)(S.aY,{children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:g.tags.map(e=>(0,t.jsx)(_.C,{variant:"outline",children:e},e))})})]}),(0,t.jsxs)(S.Zb,{children:[(0,t.jsxs)(S.Ol,{className:"pb-3",children:[(0,t.jsxs)(S.ll,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"w-5 h-5"}),"アクセスログ"]}),(0,t.jsx)(S.SZ,{children:"直近のファイルアクセス履歴"})]}),(0,t.jsx)(S.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:g.auditLog.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 text-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-engineering-blue rounded-full mt-2 shrink-0"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:e.action}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleDateString("ja-JP")})]}),(0,t.jsxs)("div",{className:"text-gray-600",children:[e.user," (",e.ip,")"]})]})]},s))})})]}),(0,t.jsxs)(S.Zb,{children:[(0,t.jsx)(S.Ol,{className:"pb-3",children:(0,t.jsxs)(S.ll,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"w-5 h-5"}),"セキュリティ状態"]})}),(0,t.jsxs)(S.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[v(g.scanStatus),(0,t.jsx)("span",{className:"font-medium text-green-700",children:"ウイルススキャン: 脅威なし"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4 text-engineering-blue"}),(0,t.jsx)("span",{className:"font-medium text-engineering-blue",children:"Box API暗号化済み"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 text-green-600"}),(0,t.jsx)("span",{className:"font-medium text-green-700",children:"SHA-256ハッシュ検証済み"})]})]})]})]})})]})})})}V.displayName="Separator";var q=a(29409),G=a(25750),F=a(49617),H=a(50774),W=a(22169);let K=i.forwardRef((e,s)=>{let{checked:a=!1,onCheckedChange:i,disabled:l=!1,className:n}=e;return(0,t.jsx)("button",{type:"button",role:"switch","aria-checked":a,disabled:l,ref:s,className:(0,W.cn)("relative inline-flex h-5 w-9 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-engineering-blue focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a?"bg-engineering-blue":"bg-gray-200",n),onClick:()=>!l&&(null==i?void 0:i(!a)),children:(0,t.jsx)("span",{className:(0,W.cn)("pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a?"translate-x-4":"translate-x-0")})})});function X(e){let{fileId:s,onClose:a}=e,[r,c]=(0,i.useState)("permissions"),d={name:"道路設計図面_Rev3.dwg",permissions:{view:{enabled:!0,users:["田中太郎","佐藤花子","山田次郎","監督員"]},download:{enabled:!0,users:["田中太郎","佐藤花子"]},edit:{enabled:!0,users:["田中太郎"]},share:{enabled:!1,users:[]}},settings:{requireApprovalForDownload:!0,watermarkEnabled:!0,expirationDate:"2024-06-30",ipRestrictions:["192.168.1.0/24","10.0.0.0/8"],maxDownloads:50,currentDownloads:12}},h=(e,s)=>{},p=e=>{switch(e){case"viewed":return(0,t.jsx)(y.Z,{className:"w-4 h-4 text-blue-500"});case"downloaded":return(0,t.jsx)(Z.Z,{className:"w-4 h-4 text-green-500"});case"download_requested":return(0,t.jsx)(o.Z,{className:"w-4 h-4 text-yellow-500"});case"access_denied":return(0,t.jsx)(m.Z,{className:"w-4 h-4 text-red-500"});default:return(0,t.jsx)(q.Z,{className:"w-4 h-4 text-gray-500"})}},g=e=>({viewed:"プレビュー",downloaded:"ダウンロード",download_requested:"ダウンロード要求",access_denied:"アクセス拒否"})[e]||e;return(0,t.jsx)(n.M,{children:(0,t.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:a,children:(0,t.jsxs)(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-engineering-blue/10 rounded-lg",children:(0,t.jsx)(j.Z,{className:"w-5 h-5 text-engineering-blue"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"アクセス制御"}),(0,t.jsx)("p",{className:"text-gray-600",children:d.name})]})]}),(0,t.jsx)(z.z,{variant:"ghost",size:"icon",onClick:a,children:(0,t.jsx)(M.Z,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"flex px-6",children:[{id:"permissions",label:"権限管理",icon:k.Z},{id:"history",label:"アクセス履歴",icon:o.Z},{id:"settings",label:"セキュリティ設定",icon:q.Z}].map(e=>(0,t.jsxs)("button",{onClick:()=>c(e.id),className:"flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ".concat(r===e.id?"border-engineering-blue text-engineering-blue":"border-transparent text-gray-600 hover:text-gray-900"),children:[(0,t.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})}),(0,t.jsx)("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:(0,t.jsxs)(n.M,{mode:"wait",children:["permissions"===r&&(0,t.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,t.jsxs)(S.Zb,{children:[(0,t.jsxs)(S.Ol,{children:[(0,t.jsxs)(S.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(G.Z,{className:"w-5 h-5"}),"ユーザー権限マトリックス"]}),(0,t.jsx)(S.SZ,{children:"各ユーザーのファイルアクセス権限を管理"})]}),(0,t.jsx)(S.aY,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4",children:"ユーザー"}),(0,t.jsxs)("th",{className:"text-center py-3 px-4",children:[(0,t.jsx)(y.Z,{className:"w-4 h-4 mx-auto"}),(0,t.jsx)("span",{className:"text-xs block mt-1",children:"閲覧"})]}),(0,t.jsxs)("th",{className:"text-center py-3 px-4",children:[(0,t.jsx)(Z.Z,{className:"w-4 h-4 mx-auto"}),(0,t.jsx)("span",{className:"text-xs block mt-1",children:"DL"})]}),(0,t.jsxs)("th",{className:"text-center py-3 px-4",children:[(0,t.jsx)(F.Z,{className:"w-4 h-4 mx-auto"}),(0,t.jsx)("span",{className:"text-xs block mt-1",children:"編集"})]}),(0,t.jsxs)("th",{className:"text-center py-3 px-4",children:[(0,t.jsx)(L.Z,{className:"w-4 h-4 mx-auto"}),(0,t.jsx)("span",{className:"text-xs block mt-1",children:"共有"})]})]})}),(0,t.jsx)("tbody",{children:[{id:"1",name:"田中太郎",role:"プロジェクトマネージャー",department:"設計部",status:"active"},{id:"2",name:"佐藤花子",role:"設計エンジニア",department:"設計部",status:"active"},{id:"3",name:"山田次郎",role:"CADオペレータ",department:"設計部",status:"active"},{id:"4",name:"監督員",role:"品質管理者",department:"品質管理部",status:"active"},{id:"5",name:"中村健太",role:"設計エンジニア",department:"設計部",status:"active"}].map((e,s)=>(0,t.jsxs)(l.E.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-engineering-blue text-white rounded-full flex items-center justify-center text-sm font-medium",children:e.name.charAt(0)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.role})]})]})}),(0,t.jsx)("td",{className:"py-3 px-4 text-center",children:(0,t.jsx)(K,{checked:d.permissions.view.users.includes(e.name),onCheckedChange:()=>h("view",e.id)})}),(0,t.jsx)("td",{className:"py-3 px-4 text-center",children:(0,t.jsx)(K,{checked:d.permissions.download.users.includes(e.name),onCheckedChange:()=>h("download",e.id)})}),(0,t.jsx)("td",{className:"py-3 px-4 text-center",children:(0,t.jsx)(K,{checked:d.permissions.edit.users.includes(e.name),onCheckedChange:()=>h("edit",e.id)})}),(0,t.jsx)("td",{className:"py-3 px-4 text-center",children:(0,t.jsx)(K,{checked:d.permissions.share.users.includes(e.name),onCheckedChange:()=>h("share",e.id)})})]},e.id))})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(S.Zb,{children:(0,t.jsxs)(S.aY,{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"一括設定"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(z.z,{variant:"outline",size:"sm",className:"w-full justify-start",children:[(0,t.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"チーム全員に閲覧権限"]}),(0,t.jsxs)(z.z,{variant:"outline",size:"sm",className:"w-full justify-start",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"管理者のみアクセス"]})]})]})}),(0,t.jsx)(S.Zb,{children:(0,t.jsxs)(S.aY,{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"テンプレート"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(z.z,{variant:"outline",size:"sm",className:"w-full justify-start",children:[(0,t.jsx)(q.Z,{className:"w-4 h-4 mr-2"}),"設計チーム標準"]}),(0,t.jsxs)(z.z,{variant:"outline",size:"sm",className:"w-full justify-start",children:[(0,t.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"機密ファイル設定"]})]})]})})]})]},"permissions"),"history"===r&&(0,t.jsx)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:(0,t.jsxs)(S.Zb,{children:[(0,t.jsxs)(S.Ol,{children:[(0,t.jsxs)(S.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"w-5 h-5"}),"アクセス履歴"]}),(0,t.jsx)(S.SZ,{children:"ファイルへのアクセス履歴と承認状況"})]}),(0,t.jsx)(S.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:[{id:"1",user:"田中太郎",action:"downloaded",timestamp:"2024-01-18T14:15:00Z",ip:"192.168.1.100",device:"Windows PC",approved:!0,approver:null},{id:"2",user:"佐藤花子",action:"viewed",timestamp:"2024-01-18T11:30:00Z",ip:"192.168.1.101",device:"MacBook",approved:!0,approver:null},{id:"3",user:"山田次郎",action:"download_requested",timestamp:"2024-01-18T09:20:00Z",ip:"192.168.1.102",device:"iPad",approved:!1,approver:null},{id:"4",user:"外部協力者A",action:"access_denied",timestamp:"2024-01-17T16:45:00Z",ip:"203.104.1.50",device:"Unknown",approved:!1,approver:null}].map((e,s)=>(0,t.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:p(e.action)}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:e.user}),(0,t.jsx)("span",{className:"text-gray-600",children:g(e.action)})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[new Date(e.timestamp).toLocaleString("ja-JP")," •",e.ip," • ",e.device]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:e.approved?(0,t.jsxs)(_.C,{variant:"success",className:"flex items-center gap-1",children:[(0,t.jsx)(x.Z,{className:"w-3 h-3"}),"承認済み"]}):"access_denied"===e.action?(0,t.jsxs)(_.C,{variant:"destructive",className:"flex items-center gap-1",children:[(0,t.jsx)(m.Z,{className:"w-3 h-3"}),"拒否"]}):(0,t.jsxs)(_.C,{variant:"warning",className:"flex items-center gap-1",children:[(0,t.jsx)(o.Z,{className:"w-3 h-3"}),"承認待ち"]})})]},e.id))})})]})},"history"),"settings"===r&&(0,t.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(S.Zb,{children:[(0,t.jsx)(S.Ol,{children:(0,t.jsxs)(S.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"w-5 h-5"}),"セキュリティ設定"]})}),(0,t.jsxs)(S.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"ダウンロード承認要求"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"管理者承認後にDL可能"})]}),(0,t.jsx)(K,{checked:d.settings.requireApprovalForDownload,onCheckedChange:()=>{}})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"透かし表示"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"プレビューに透かしを表示"})]}),(0,t.jsx)(K,{checked:d.settings.watermarkEnabled,onCheckedChange:()=>{}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"アクセス期限"}),(0,t.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-engineering-blue focus:border-transparent",value:d.settings.expirationDate,onChange:()=>{}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"ダウンロード上限"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"number",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-engineering-blue focus:border-transparent",value:d.settings.maxDownloads,onChange:()=>{}}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["/ ",d.settings.currentDownloads,"回使用済み"]})]})]})]})]}),(0,t.jsxs)(S.Zb,{children:[(0,t.jsx)(S.Ol,{children:(0,t.jsxs)(S.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(H.Z,{className:"w-5 h-5"}),"IP制限設定"]})}),(0,t.jsx)(S.aY,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"許可IPアドレス/レンジ"}),(0,t.jsx)("div",{className:"space-y-2",children:d.settings.ipRestrictions.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,t.jsx)("span",{className:"font-mono text-sm",children:e}),(0,t.jsx)(z.z,{variant:"ghost",size:"sm",children:(0,t.jsx)(M.Z,{className:"w-3 h-3"})})]},s))})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"192.168.1.0/24",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-engineering-blue focus:border-transparent"}),(0,t.jsx)(z.z,{variant:"outline",size:"sm",children:"追加"})]})]})})]})]}),(0,t.jsxs)(S.Zb,{children:[(0,t.jsx)(S.Ol,{children:(0,t.jsxs)(S.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(q.Z,{className:"w-5 h-5"}),"監査・ログ設定"]})}),(0,t.jsx)(S.aY,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"詳細ログ記録"}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"全操作をログに記録"})]}),(0,t.jsx)(K,{checked:!0,onCheckedChange:()=>{}})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"リアルタイム通知"}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"アクセス時に即座に通知"})]}),(0,t.jsx)(K,{checked:!0,onCheckedChange:()=>{}})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"月次レポート"}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"利用状況の定期レポート"})]}),(0,t.jsx)(K,{checked:!1,onCheckedChange:()=>{}})]})]})})]})]},"settings")]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["最終更新: ",new Date().toLocaleString("ja-JP")]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(z.z,{variant:"ghost",onClick:a,children:"キャンセル"}),(0,t.jsx)(z.z,{variant:"engineering",children:"設定を保存"})]})]})]})})})}function $(){let[e,s]=(0,i.useState)("grid"),[a,B]=(0,i.useState)([]),[M,A]=(0,i.useState)(!1),[T,P]=(0,i.useState)(null),[I,Y]=(0,i.useState)(null),R=[{id:"1",name:"道路設計図面_Rev3.dwg",type:"dwg",size:1542e4,uploadedAt:"2024-01-18T10:30:00Z",uploadedBy:"田中太郎",project:"東京都道路設計業務",version:3,status:"approved",scanStatus:"clean",checkInStatus:"checked_out",checkOutBy:"田中太郎",previewUrl:"/preview/road-design.jpg",downloadCount:12,lastAccessed:"2024-01-18T14:15:00Z",metadata:{drawing_number:"RD-001",scale:"1:1000",revision:"Rev.3",approval_status:"承認済み"},permissions:{canView:!0,canDownload:!0,canEdit:!0,canShare:!1},tags:["図面","道路","平面図"]},{id:"2",name:"橋梁点検報告書.pdf",type:"pdf",size:865e4,uploadedAt:"2024-01-17T15:45:00Z",uploadedBy:"佐藤花子",project:"橋梁点検業務",version:1,status:"under_review",scanStatus:"clean",checkInStatus:"checked_in",checkOutBy:null,previewUrl:"/preview/bridge-report.jpg",downloadCount:5,lastAccessed:"2024-01-18T09:20:00Z",metadata:{document_type:"点検報告書",inspection_date:"2024-01-15",inspector:"佐藤花子"},permissions:{canView:!0,canDownload:!1,canEdit:!1,canShare:!1},tags:["報告書","点検","橋梁"]},{id:"3",name:"地質調査データ.xlsx",type:"xlsx",size:234e4,uploadedAt:"2024-01-16T11:20:00Z",uploadedBy:"山田次郎",project:"河川改修設計",version:2,status:"draft",scanStatus:"scanning",checkInStatus:"checked_in",checkOutBy:null,previewUrl:"/preview/geological-data.jpg",downloadCount:8,lastAccessed:"2024-01-17T16:30:00Z",metadata:{data_type:"地質調査",survey_date:"2024-01-10",location:"千葉県市川市"},permissions:{canView:!0,canDownload:!0,canEdit:!0,canShare:!0},tags:["データ","地質","調査"]},{id:"4",name:"施工計画書_最終版.docx",type:"docx",size:428e4,uploadedAt:"2024-01-15T08:45:00Z",uploadedBy:"中村健太",project:"トンネル設計業務",version:5,status:"final",scanStatus:"clean",checkInStatus:"locked",checkOutBy:"監督員",previewUrl:"/preview/construction-plan.jpg",downloadCount:25,lastAccessed:"2024-01-18T13:10:00Z",metadata:{document_type:"施工計画書",approval_date:"2024-01-14",approved_by:"監督員"},permissions:{canView:!0,canDownload:!0,canEdit:!1,canShare:!1},tags:["計画書","施工","トンネル"]}],L=e=>({dwg:(0,t.jsx)(r.Z,{className:"w-8 h-8 text-blue-600"}),pdf:(0,t.jsx)(r.Z,{className:"w-8 h-8 text-red-600"}),xlsx:(0,t.jsx)(r.Z,{className:"w-8 h-8 text-green-600"}),docx:(0,t.jsx)(r.Z,{className:"w-8 h-8 text-blue-600"}),jpg:(0,t.jsx)(c.Z,{className:"w-8 h-8 text-purple-600"}),png:(0,t.jsx)(c.Z,{className:"w-8 h-8 text-purple-600"})})[e]||(0,t.jsx)(d.Z,{className:"w-8 h-8 text-gray-600"}),U=e=>{switch(e){case"clean":return(0,t.jsx)(x.Z,{className:"w-4 h-4 text-green-500"});case"infected":return(0,t.jsx)(m.Z,{className:"w-4 h-4 text-red-500"});case"scanning":return(0,t.jsx)(o.Z,{className:"w-4 h-4 text-yellow-500 animate-spin"});default:return(0,t.jsx)(o.Z,{className:"w-4 h-4 text-gray-400"})}},V=e=>{if(0===e)return"0 Byte";let s=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-mesh",children:[(0,t.jsx)(C.W,{}),(0,t.jsxs)("div",{className:"md:ml-64 transition-all duration-300",children:[(0,t.jsx)(l.E.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-30",children:(0,t.jsx)("div",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"w-6 h-6 text-engineering-blue"}),"ファイル管理システム"]}),(0,t.jsx)("p",{className:"text-gray-600",children:"Box API連携セキュアファイル管理 (VDR)"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(_.C,{variant:"engineering",className:"animate-pulse",children:[(0,t.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),"セキュア"]}),(0,t.jsxs)(z.z,{variant:"outline",onClick:()=>A(!0),children:[(0,t.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"アップロード"]})]})]})})}),(0,t.jsxs)("main",{className:"px-6 py-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,t.jsx)(S.Zb,{className:"hover-lift",children:(0,t.jsx)(S.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"総ファイル数"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"1,247"})]}),(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,t.jsx)(r.Z,{className:"w-6 h-6 text-blue-600"})})]})})}),(0,t.jsx)(S.Zb,{className:"hover-lift",children:(0,t.jsx)(S.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"ストレージ使用量"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-engineering-blue",children:"847 GB"}),(0,t.jsx)(D.E,{value:65,variant:"engineering",className:"mt-2"})]}),(0,t.jsx)("div",{className:"p-3 bg-engineering-blue/10 rounded-lg",children:(0,t.jsx)(g.Z,{className:"w-6 h-6 text-engineering-blue"})})]})})}),(0,t.jsx)(S.Zb,{className:"hover-lift",children:(0,t.jsx)(S.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"セキュリティスキャン"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-green-600",children:"100%"}),(0,t.jsx)("p",{className:"text-xs text-green-600",children:"全ファイル安全"})]}),(0,t.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,t.jsx)(j.Z,{className:"w-6 h-6 text-green-600"})})]})})}),(0,t.jsx)(S.Zb,{className:"hover-lift",children:(0,t.jsx)(S.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"アクセス制御"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:"VDR"}),(0,t.jsx)("p",{className:"text-xs text-purple-600",children:"完全閉域"})]}),(0,t.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,t.jsx)(u.Z,{className:"w-6 h-6 text-purple-600"})})]})})})]}),(0,t.jsx)(S.Zb,{className:"mb-8",children:(0,t.jsx)(S.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,t.jsx)("input",{type:"text",placeholder:"ファイル名、プロジェクト、タグで検索...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-engineering-blue focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(z.z,{variant:"outline",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"フィルター"]}),(0,t.jsxs)("div",{className:"flex border border-gray-200 rounded-lg overflow-hidden",children:[(0,t.jsx)(z.z,{variant:"grid"===e?"engineering":"ghost",size:"sm",onClick:()=>s("grid"),className:"rounded-none border-none",children:(0,t.jsx)(f.Z,{className:"w-4 h-4"})}),(0,t.jsx)(z.z,{variant:"list"===e?"engineering":"ghost",size:"sm",onClick:()=>s("list"),className:"rounded-none border-none border-l border-gray-200",children:(0,t.jsx)(b.Z,{className:"w-4 h-4"})})]})]})]})})}),(0,t.jsx)(n.M,{mode:"wait",children:"grid"===e?(0,t.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:R.map((e,s)=>(0,t.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},whileHover:{y:-5},children:(0,t.jsxs)(S.Zb,{className:"h-full hover-lift group relative overflow-hidden",children:["locked"===e.checkInStatus&&(0,t.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,t.jsx)(u.Z,{className:"w-5 h-5 text-red-500"})}),(0,t.jsxs)(S.Ol,{className:"pb-3",children:[(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[L(e.type),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)(S.ll,{className:"text-base truncate group-hover:text-engineering-blue transition-colors",children:e.name}),(0,t.jsxs)(S.SZ,{className:"text-sm",children:["v",e.version," • ",V(e.size)]})]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)(E.E,{status:e.status,size:"sm"}),(0,t.jsxs)(_.C,{variant:"outline",className:"text-xs flex items-center gap-1",children:[U(e.scanStatus),e.scanStatus]})]})]}),(0,t.jsxs)(S.aY,{className:"space-y-4",children:[e.previewUrl&&(0,t.jsxs)("div",{className:"aspect-video bg-gray-100 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors flex items-center justify-center",onClick:()=>P(e.id),children:[(0,t.jsx)(y.Z,{className:"w-8 h-8 text-gray-400"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"プレビュー"})]}),(0,t.jsxs)("div",{className:"space-y-2 text-xs text-gray-600",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"プロジェクト:"}),(0,t.jsx)("span",{className:"font-medium truncate ml-2",children:e.project})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"アップロード:"}),(0,t.jsx)("span",{children:e.uploadedBy})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"最終更新:"}),(0,t.jsx)("span",{children:new Date(e.uploadedAt).toLocaleDateString("ja-JP")})]}),e.checkOutBy&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"チェックアウト:"}),(0,t.jsx)("span",{className:"text-orange-600 font-medium",children:e.checkOutBy})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map(e=>(0,t.jsx)(_.C,{variant:"outline",className:"text-xs",children:e},e))}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,t.jsx)(w.Z,{className:"w-3 h-3 mr-1"}),e.downloadCount," DL"]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(z.z,{variant:"outline",size:"sm",onClick:()=>P(e.id),className:"group/btn",children:(0,t.jsx)(y.Z,{className:"w-4 h-4 group-hover/btn:text-engineering-blue"})}),(0,t.jsx)(z.z,{variant:"outline",size:"sm",disabled:!e.permissions.canDownload,className:"group/btn",children:(0,t.jsx)(Z.Z,{className:"w-4 h-4 group-hover/btn:text-engineering-blue"})}),(0,t.jsx)(z.z,{variant:"outline",size:"sm",onClick:()=>Y(e.id),className:"group/btn",children:(0,t.jsx)(k.Z,{className:"w-4 h-4 group-hover/btn:text-engineering-blue"})})]})]})]}),"final"===e.status&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-engineering-blue/5 to-engineering-green/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg pointer-events-none"})]})},e.id))},"grid"):(0,t.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:R.map((e,s)=>(0,t.jsx)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},children:(0,t.jsx)(S.Zb,{className:"hover-lift",children:(0,t.jsx)(S.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[L(e.type),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["v",e.version," • ",V(e.size)," • ",e.project]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(E.E,{status:e.status,size:"sm"}),U(e.scanStatus),"locked"===e.checkInStatus&&(0,t.jsx)(u.Z,{className:"w-4 h-4 text-red-500"})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(z.z,{variant:"outline",size:"sm",onClick:()=>P(e.id),children:(0,t.jsx)(y.Z,{className:"w-4 h-4"})}),(0,t.jsx)(z.z,{variant:"outline",size:"sm",disabled:!e.permissions.canDownload,children:(0,t.jsx)(Z.Z,{className:"w-4 h-4"})}),(0,t.jsx)(z.z,{variant:"outline",size:"sm",onClick:()=>Y(e.id),children:(0,t.jsx)(k.Z,{className:"w-4 h-4"})})]})]})})})},e.id))},"list")})]})]}),(0,t.jsx)(O,{isOpen:M,onClose:()=>A(!1)}),T&&(0,t.jsx)(J,{fileId:T,onClose:()=>P(null)}),I&&(0,t.jsx)(X,{fileId:I,onClose:()=>Y(null)})]})}K.displayName="Switch"},14440:function(e,s,a){"use strict";a.d(s,{E:function(){return r}});var t=a(57437),i=a(2265),l=a(15946),n=a(22169);let r=i.forwardRef((e,s)=>{let{className:a,value:i,variant:r="default",...c}=e;return(0,t.jsx)(l.fC,{ref:s,className:(0,n.cn)("relative h-2 w-full overflow-hidden rounded-full","default"===r&&"bg-primary/20","engineering"===r&&"bg-engineering-blue/20","gradient"===r&&"bg-gradient-to-r from-engineering-blue/20 to-engineering-green/20",a),...c,children:(0,t.jsx)(l.z$,{className:(0,n.cn)("h-full w-full flex-1 transition-all","default"===r&&"bg-primary","engineering"===r&&"bg-engineering-blue","gradient"===r&&"gradient-engineering"),style:{transform:"translateX(-".concat(100-(i||0),"%)")}})})});r.displayName=l.fC.displayName},4994:function(e,s,a){"use strict";a.d(s,{E:function(){return n}});var t=a(57437);a(2265);var i=a(65251),l=a(22169);function n(e){let{status:s,size:a="md",animated:n=!0,className:r}=e;return(0,t.jsxs)(i.E.div,{initial:!!n&&{opacity:0,scale:.8},animate:!!n&&{opacity:1,scale:1},transition:{duration:.3},className:(0,l.cn)("inline-flex items-center gap-2 rounded-full font-medium",(0,l.z2)(s),{sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"}[a],r),children:[(0,t.jsx)(i.E.div,{className:(0,l.cn)("rounded-full",{sm:"w-1.5 h-1.5",md:"w-2 h-2",lg:"w-2.5 h-2.5"}[a],"in_progress"===s?"status-active":"draft"===s?"status-pending":"status-dot bg-current"),animate:"in_progress"===s?{scale:[1,1.2,1],opacity:[.7,1,.7]}:{},transition:{duration:2,repeat:"in_progress"===s?1/0:0}}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.XO)(s),s.replace("_"," ").toUpperCase()]})]})}}},function(e){e.O(0,[778,402,440,250,677,30,650,971,938,744],function(){return e(e.s=75093)}),_N_E=e.O()}]);