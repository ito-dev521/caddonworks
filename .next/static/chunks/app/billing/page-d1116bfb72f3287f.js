(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{28203:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},13008:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},71738:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62898).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},41298:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},35817:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},64891:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62898).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},76020:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62898).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},74522:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62898).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},85790:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62898).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},94802:function(e,s,t){Promise.resolve().then(t.bind(t,29735))},29735:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return A}});var a=t(57437),i=t(2265),n=t(65251),r=t(62167),l=t(13008),c=t(76020),d=t(11981),o=t(6141),x=t(71738),m=t(76637),u=t(41298),h=t(85790),g=t(35817),p=t(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,p.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),v=(0,p.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var y=t(92457);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,p.Z)("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),N=(0,p.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);var b=t(28203),w=t(65592),Z=t(575),k=t(15671),_=t(33277),P=t(14440),D=t(15941),C=t(74522);function S(e){let{data:s=[],className:t}=e,i=s.length>0?s:[{month:"1月",revenue:24e5,expenses:18e5},{month:"2月",revenue:28e5,expenses:2e6},{month:"3月",revenue:32e5,expenses:22e5},{month:"4月",revenue:29e5,expenses:21e5},{month:"5月",revenue:35e5,expenses:24e5},{month:"6月",revenue:38e5,expenses:26e5}],n=i.reduce((e,s)=>e+s.revenue,0),r=i.reduce((e,s)=>e+s.expenses,0),l=n-r;return(0,a.jsxs)(k.Zb,{className:t,children:[(0,a.jsxs)(k.Ol,{children:[(0,a.jsxs)(k.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 text-engineering-blue"}),"売上・費用チャート"]}),(0,a.jsx)(k.SZ,{children:"月別の売上と費用の推移"})]}),(0,a.jsxs)(k.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"総売上"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\xa5",n.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"総費用"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["\xa5",r.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"利益"}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(l>=0?"text-blue-600":"text-red-600"),children:["\xa5",l.toLocaleString()]}),l>=0?(0,a.jsx)(h.Z,{className:"w-4 h-4 text-green-600 mx-auto mt-1"}):(0,a.jsx)(C.Z,{className:"w-4 h-4 text-red-600 mx-auto mt-1"})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:i.map((e,s)=>{let t=Math.max(...i.map(e=>Math.max(e.revenue,e.expenses))),n=e.revenue/t*100,r=e.expenses/t*100;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:e.month}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("span",{className:"text-green-600",children:["売上: \xa5",e.revenue.toLocaleString()]}),(0,a.jsxs)("span",{className:"text-red-600",children:["費用: \xa5",e.expenses.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-green-500 rounded-full transition-all duration-300",style:{width:"".concat(n,"%")}})}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-red-500 rounded-full transition-all duration-300",style:{width:"".concat(r,"%")}})})]})]},s)})}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,a.jsx)("span",{children:"売上"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,a.jsx)("span",{children:"費用"})]})]})})]})]})}var M=t(22169),E=t(66210),O=t(14958);function A(){let[e,s]=(0,i.useState)("overview"),[t,p]=(0,i.useState)("current"),{userProfile:C,userRole:A,userOrganization:z}=(0,E.useAuth)(),[G,$]=(0,i.useState)([]),[F,Y]=(0,i.useState)([]),[I,L]=(0,i.useState)(!1),R=async()=>{try{if(L(!0),"OrgAdmin"===A&&(null==z?void 0:z.id)){let{data:e}=await O.OQ.from("monthly_statements").select("id, org_id, period_start, period_end, total_amount, contractors_total, operator_fee, status, pdf_url, issue_date, due_date").eq("org_id",z.id).order("period_end",{ascending:!1});$(e||[])}if("Contractor"===A&&(null==C?void 0:C.id)){let{data:e}=await O.OQ.from("payouts").select("id, contractor_id, period_start, period_end, scheduled_pay_date, net_amount, status, statement_pdf_url").eq("contractor_id",C.id).order("period_end",{ascending:!1});Y(e||[])}}finally{L(!1)}};(0,i.useEffect)(()=>{R()},[A,null==z?void 0:z.id,null==C?void 0:C.id]);let q=()=>{let e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1}},H=async()=>{if(!(null==z?void 0:z.id))return alert("組織が見つかりません");let{year:e,month:s}=q();try{if(!(await fetch("/api/billing/invoice-orgs?year=".concat(e,"&month=").concat(s,"&org_id=").concat(z.id))).ok)throw Error("生成に失敗しました");await R(),alert("請求書を生成しました")}catch(e){alert("生成に失敗しました")}},J=async e=>{try{if(!(await fetch("/api/billing/generate-doc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"invoice",id:e})})).ok)throw Error("failed");await R(),alert("請求書PDFを保存しました")}catch(e){alert("請求書PDFの保存に失敗しました")}},T=async e=>{try{if(!(await fetch("/api/billing/generate-doc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"ack",id:e})})).ok)throw Error("failed");await R(),alert("請書PDFを保存しました")}catch(e){alert("請書PDFの保存に失敗しました")}},V={monthlyRevenue:232e5,monthlyPayouts:1624e4,monthlySystemFees:696e4,pendingInvoices:12,overdueInvoices:3,processingPayouts:8,profitMargin:29.8},U=e=>{switch(e){case"paid":return"text-green-600 bg-green-100";case"issued":return"text-blue-600 bg-blue-100";case"overdue":return"text-red-600 bg-red-100";case"scheduled":return"text-yellow-600 bg-yellow-100";case"processing":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},Q=e=>{switch(e){case"paid":return(0,a.jsx)(l.Z,{className:"w-4 h-4"});case"issued":return(0,a.jsx)(c.Z,{className:"w-4 h-4"});case"overdue":return(0,a.jsx)(d.Z,{className:"w-4 h-4"});case"scheduled":return(0,a.jsx)(o.Z,{className:"w-4 h-4"});case"processing":return(0,a.jsx)(x.Z,{className:"w-4 h-4"});default:return(0,a.jsx)(m.Z,{className:"w-4 h-4"})}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-mesh",children:[(0,a.jsx)(w.W,{}),(0,a.jsxs)("div",{className:"md:ml-64 transition-all duration-300",children:[(0,a.jsx)(n.E.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-30",children:(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-6 h-6 text-engineering-blue"}),"会計・請求システム"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"運営会社による一括請求・支払代行システム"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(_.C,{variant:"engineering",className:"animate-pulse",children:[(0,a.jsx)(h.Z,{className:"w-3 h-3 mr-1"}),"月間売上: ",(0,M.xG)(V.monthlyRevenue)]}),(0,a.jsxs)(Z.z,{variant:"engineering",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"月次レポート"]})]})]})})}),(0,a.jsxs)("main",{className:"px-6 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(D.i,{title:"月間売上",value:(0,M.xG)(V.monthlyRevenue),icon:(0,a.jsx)(h.Z,{className:"w-6 h-6"}),trend:{value:12.5,isPositive:!0},variant:"engineering"}),(0,a.jsx)(D.i,{title:"月間支払",value:(0,M.xG)(V.monthlyPayouts),icon:(0,a.jsx)(j,{className:"w-6 h-6"}),trend:{value:8.3,isPositive:!0},variant:"gradient"}),(0,a.jsx)(D.i,{title:"システム手数料",value:(0,M.xG)(V.monthlySystemFees),icon:(0,a.jsx)(v,{className:"w-6 h-6"}),trend:{value:15.2,isPositive:!0},variant:"glass"}),(0,a.jsx)(D.i,{title:"利益率",value:"".concat(V.profitMargin,"%"),icon:(0,a.jsx)(y.Z,{className:"w-6 h-6"}),trend:{value:2.1,isPositive:!0},variant:"default"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsx)(k.Zb,{className:"hover-lift",children:(0,a.jsx)(k.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"未払い請求書"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:V.overdueInvoices}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["/ ",V.pendingInvoices,"件"]})]})]}),(0,a.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-red-600"})})]})})}),(0,a.jsx)(k.Zb,{className:"hover-lift",children:(0,a.jsx)(k.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"支払処理中"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:V.processingPayouts}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"件"})]})]}),(0,a.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-purple-600"})})]})})}),(0,a.jsx)(k.Zb,{className:"hover-lift",children:(0,a.jsx)(k.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"今月の純利益"}),(0,a.jsx)("div",{className:"flex items-baseline gap-2",children:(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(0,M.xG)(V.monthlyRevenue-V.monthlyPayouts)})})]}),(0,a.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,a.jsx)(f,{className:"w-6 h-6 text-green-600"})})]})})})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex space-x-8",children:[{id:"overview",label:"概要",icon:y.Z},{id:"invoices",label:"請求管理",icon:N,count:V.pendingInvoices},{id:"payouts",label:"支払管理",icon:x.Z,count:V.processingPayouts},{id:"analytics",label:"分析・レポート",icon:h.Z}].map(t=>(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors ".concat(e===t.id?"border-engineering-blue text-engineering-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(t.icon,{className:"w-4 h-4"}),t.label,void 0!==t.count&&(0,a.jsx)(_.C,{variant:"destructive",className:"ml-1 text-xs",children:t.count})]},t.id))})})}),(0,a.jsxs)(r.M,{mode:"wait",children:["overview"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,a.jsx)(S,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(k.Zb,{children:[(0,a.jsxs)(k.Ol,{children:[(0,a.jsxs)(k.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(N,{className:"w-5 h-5 text-engineering-blue"}),"最近の請求書"]}),(0,a.jsx)(k.SZ,{children:"直近の請求状況"})]}),(0,a.jsx)(k.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:[{id:"INV-2024-001",clientOrg:"東京都建設局",period:"2024年1月",baseAmount:156e5,feeAmount:468e4,systemFee:5e4,totalAmount:2033e4,status:"paid",issueDate:"2024-01-31",dueDate:"2024-02-29",paidDate:"2024-02-15",projects:[{name:"東京都道路設計業務",amount:52e5},{name:"橋梁点検業務",amount:38e5},{name:"河川改修設計",amount:66e5}]},{id:"INV-2024-002",clientOrg:"国土交通省",period:"2024年1月",baseAmount:89e5,feeAmount:267e4,systemFee:5e4,totalAmount:1162e4,status:"issued",issueDate:"2024-02-01",dueDate:"2024-03-01",paidDate:null,projects:[{name:"トンネル設計業務",amount:89e5}]},{id:"INV-2024-003",clientOrg:"県土整備部",period:"2024年1月",baseAmount:42e5,feeAmount:126e4,systemFee:5e4,totalAmount:551e4,status:"overdue",issueDate:"2024-01-31",dueDate:"2024-02-29",paidDate:null,projects:[{name:"地下構造物設計",amount:42e5}]}].map((e,s)=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.clientOrg}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.period})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-bold text-engineering-blue",children:(0,M.xG)(e.totalAmount)}),(0,a.jsxs)(_.C,{className:U(e.status),children:[Q(e.status),(0,a.jsxs)("span",{className:"ml-1",children:["paid"===e.status&&"支払済","issued"===e.status&&"発行済","overdue"===e.status&&"未払"]})]})]})]},e.id))})})]}),(0,a.jsxs)(k.Zb,{children:[(0,a.jsxs)(k.Ol,{children:[(0,a.jsxs)(k.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-engineering-green"}),"最近の支払"]}),(0,a.jsx)(k.SZ,{children:"受注者への支払状況"})]}),(0,a.jsx)(k.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:[{id:"PAY-2024-001",contractorOrg:"田中設計事務所",contractorUser:"田中太郎",period:"2024年1月",amount:364e4,status:"paid",scheduledDate:"2024-01-31",paidDate:"2024-01-31",method:"銀行振込",projects:[{name:"東京都道路設計業務",amount:52e5,payout:364e4}]},{id:"PAY-2024-002",contractorOrg:"佐藤エンジニアリング",contractorUser:"佐藤花子",period:"2024年1月",amount:266e4,status:"scheduled",scheduledDate:"2024-02-29",paidDate:null,method:"銀行振込",projects:[{name:"橋梁点検業務",amount:38e5,payout:266e4}]}].map((e,s)=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.contractorUser}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.period})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-bold text-engineering-green",children:(0,M.xG)(e.amount)}),(0,a.jsxs)(_.C,{className:U(e.status),children:[Q(e.status),(0,a.jsxs)("span",{className:"ml-1",children:["paid"===e.status&&"支払済","scheduled"===e.status&&"予定","processing"===e.status&&"処理中"]})]})]})]},e.id))})})]})]})]},"overview"),"invoices"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"請求書管理"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{className:"px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-engineering-blue focus:border-transparent",value:t,onChange:e=>p(e.target.value),children:[(0,a.jsx)("option",{value:"current",children:"今月"}),(0,a.jsx)("option",{value:"last",children:"先月"}),(0,a.jsx)("option",{value:"quarter",children:"今四半期"}),(0,a.jsx)("option",{value:"year",children:"今年"})]}),(0,a.jsxs)(Z.z,{variant:"outline",onClick:H,children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"今月の請求書生成"]}),(0,a.jsxs)(Z.z,{variant:"engineering",onClick:R,children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"一括送信"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(G.length>0?G:[]).map(e=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium",children:["期間: ",new Date(e.period_start).toLocaleDateString("ja-JP")," 〜 ",new Date(e.period_end).toLocaleDateString("ja-JP")]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["合計: ",(0,M.xG)(e.total_amount),"（内 手数料 ",(0,M.xG)(e.operator_fee),"）"]}),(0,a.jsx)(_.C,{className:U(e.status),children:e.status})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(Z.z,{variant:"outline",onClick:()=>window.open("/api/billing/pdf?type=invoice&title=請求書&total=".concat(e.total_amount),"_blank"),children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"PDFダウンロード"]}),(0,a.jsx)(Z.z,{variant:"engineering",onClick:()=>J(e.id),children:"保存"})]})]},e.id)),0===G.length&&(0,a.jsx)("div",{className:"p-4 text-sm text-gray-600",children:"表示できる請求書がありません"})]})]},"invoices"),"payouts"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"支払管理"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(Z.z,{variant:"outline",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"支払スケジュール"]}),(0,a.jsxs)(Z.z,{variant:"engineering",onClick:R,children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"一括支払処理"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(F.length>0?F:[]).map(e=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium",children:["期間: ",new Date(e.period_start).toLocaleDateString("ja-JP")," 〜 ",new Date(e.period_end).toLocaleDateString("ja-JP")]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["支払予定日: ",e.scheduled_pay_date?new Date(e.scheduled_pay_date).toLocaleDateString("ja-JP"):"-"]}),(0,a.jsx)("p",{className:"text-lg font-bold",children:(0,M.xG)(e.net_amount)}),(0,a.jsx)(_.C,{className:U(e.status),children:e.status})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(Z.z,{variant:"outline",onClick:()=>window.open("/api/billing/pdf?type=ack&title=請書&total=".concat(e.net_amount),"_blank"),children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"PDFダウンロード"]}),(0,a.jsx)(Z.z,{variant:"engineering",onClick:()=>T(e.id),children:"保存"})]})]},e.id)),0===F.length&&(0,a.jsx)("div",{className:"p-4 text-sm text-gray-600",children:"表示できる支払情報がありません"})]})]},"payouts"),"analytics"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"財務分析・レポート"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(k.Zb,{children:[(0,a.jsx)(k.Ol,{children:(0,a.jsx)(k.ll,{children:"収益構造分析"})}),(0,a.jsx)(k.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"基本売上"}),(0,a.jsx)("span",{className:"font-semibold",children:(0,M.xG)(195e6)})]}),(0,a.jsx)(P.E,{value:70,variant:"engineering"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"手数料収入 (30%)"}),(0,a.jsx)("span",{className:"font-semibold",children:(0,M.xG)(585e5)})]}),(0,a.jsx)(P.E,{value:21,variant:"gradient"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"システム利用料"}),(0,a.jsx)("span",{className:"font-semibold",children:(0,M.xG)(25e6)})]}),(0,a.jsx)(P.E,{value:9,variant:"default"})]})]})})]}),(0,a.jsxs)(k.Zb,{children:[(0,a.jsx)(k.Ol,{children:(0,a.jsx)(k.ll,{children:"月別推移"})}),(0,a.jsx)(k.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:[{month:"10月",revenue:185e5,growth:8.5},{month:"11月",revenue:212e5,growth:14.6},{month:"12月",revenue:198e5,growth:-6.6},{month:"1月",revenue:232e5,growth:17.2}].map((e,s)=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"font-medium",children:e.month}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"font-semibold",children:(0,M.xG)(e.revenue)}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[e.growth>0?(0,a.jsx)(h.Z,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(h.Z,{className:"w-4 h-4 text-red-600 rotate-180"}),(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(e.growth>0?"text-green-600":"text-red-600"),children:[Math.abs(e.growth),"%"]})]})]})]},e.month))})})]})]})]},"analytics")]})]})]})]})}},15941:function(e,s,t){"use strict";t.d(s,{i:function(){return o}});var a=t(57437);t(2265);var i=t(65251),n=t(85790),r=t(74522),l=t(64891),c=t(15671),d=t(22169);function o(e){let{title:s,value:t,icon:o,trend:x,className:m,variant:u="default"}=e;return(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{y:-2},className:"relative overflow-hidden",children:(0,a.jsxs)(c.Zb,{className:(0,d.cn)("relative hover-lift transition-all duration-300","engineering"===u&&"border-engineering-blue/20 bg-gradient-to-br from-white to-engineering-blue/5","glass"===u&&"glass border-white/20","gradient"===u&&"gradient-engineering text-white border-0",m),children:[(0,a.jsx)(c.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:(0,d.cn)("text-sm font-medium","gradient"===u?"text-white/80":"text-muted-foreground"),children:s}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.E.p,{className:(0,d.cn)("text-2xl font-bold","gradient"===u?"text-white":"text-foreground"),initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:t}),x&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.3},className:(0,d.cn)("flex items-center text-xs font-medium",x.isPositive?"gradient"===u?"text-green-200":"text-green-600":!1===x.isPositive?"gradient"===u?"text-red-200":"text-red-600":"gradient"===u?"text-white/60":"text-gray-600"),children:[x.isPositive?(0,a.jsx)(n.Z,{className:"w-3 h-3 mr-1"}):!1===x.isPositive?(0,a.jsx)(r.Z,{className:"w-3 h-3 mr-1"}):(0,a.jsx)(l.Z,{className:"w-3 h-3 mr-1"}),Math.abs(x.value),"%"]})]})]}),o&&(0,a.jsx)(i.E.div,{className:(0,d.cn)("p-3 rounded-lg","engineering"===u&&"bg-engineering-blue/10 text-engineering-blue","gradient"===u&&"bg-white/20 text-white","glass"===u&&"bg-white/20","default"===u&&"bg-primary/10 text-primary"),whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:10},children:o})]})}),"engineering"===u&&(0,a.jsx)("div",{className:"absolute inset-0 opacity-5",children:(0,a.jsx)("div",{className:"animated-mesh absolute -right-4 -top-4 w-24 h-24 bg-engineering-blue rounded-full"})}),"gradient"===u&&(0,a.jsx)("div",{className:"absolute inset-0 opacity-20",children:(0,a.jsx)("div",{className:"animated-mesh absolute -right-6 -bottom-6 w-32 h-32 bg-white rounded-full blur-xl"})})]})})}},14440:function(e,s,t){"use strict";t.d(s,{E:function(){return l}});var a=t(57437),i=t(2265),n=t(15946),r=t(22169);let l=i.forwardRef((e,s)=>{let{className:t,value:i,variant:l="default",...c}=e;return(0,a.jsx)(n.fC,{ref:s,className:(0,r.cn)("relative h-2 w-full overflow-hidden rounded-full","default"===l&&"bg-primary/20","engineering"===l&&"bg-engineering-blue/20","gradient"===l&&"bg-gradient-to-r from-engineering-blue/20 to-engineering-green/20",t),...c,children:(0,a.jsx)(n.z$,{className:(0,r.cn)("h-full w-full flex-1 transition-all","default"===l&&"bg-primary","engineering"===l&&"bg-engineering-blue","gradient"===l&&"gradient-engineering"),style:{transform:"translateX(-".concat(100-(i||0),"%)")}})})});l.displayName=n.fC.displayName},15946:function(e,s,t){"use strict";t.d(s,{z$:function(){return N},fC:function(){return f}});var a=t(2265),i=t(57437);t(54887);var n=t(54949),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let t=(0,n.Z8)(`Primitive.${s}`),r=a.forwardRef((e,a)=>{let{asChild:n,...r}=e,l=n?t:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(l,{...r,ref:a})});return r.displayName=`Primitive.${s}`,{...e,[s]:r}},{}),l="Progress",[c,d]=function(e,s=[]){let t=[],n=()=>{let s=t.map(e=>a.createContext(e));return function(t){let i=t?.[e]||s;return a.useMemo(()=>({[`__scope${e}`]:{...t,[e]:i}}),[t,i])}};return n.scopeName=e,[function(s,n){let r=a.createContext(n),l=t.length;t=[...t,n];let c=s=>{let{scope:t,children:n,...c}=s,d=t?.[e]?.[l]||r,o=a.useMemo(()=>c,Object.values(c));return(0,i.jsx)(d.Provider,{value:o,children:n})};return c.displayName=s+"Provider",[c,function(t,i){let c=i?.[e]?.[l]||r,d=a.useContext(c);if(d)return d;if(void 0!==n)return n;throw Error(`\`${t}\` must be used within \`${s}\``)}]},function(...e){let s=e[0];if(1===e.length)return s;let t=()=>{let t=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=t.reduce((s,{useScope:t,scopeName:a})=>{let i=t(e)[`__scope${a}`];return{...s,...i}},{});return a.useMemo(()=>({[`__scope${s.scopeName}`]:i}),[i])}};return t.scopeName=s.scopeName,t}(n,...s)]}(l),[o,x]=c(l),m=a.forwardRef((e,s)=>{var t,a;let{__scopeProgress:n,value:l=null,max:c,getValueLabel:d=g,...x}=e;(c||0===c)&&!v(c)&&console.error((t=`${c}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=v(c)?c:100;null===l||y(l,m)||console.error((a=`${l}`,`Invalid prop \`value\` of value \`${a}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let u=y(l,m)?l:null,h=j(u)?d(u,m):void 0;return(0,i.jsx)(o,{scope:n,value:u,max:m,children:(0,i.jsx)(r.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":j(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":p(u,m),"data-value":u??void 0,"data-max":m,...x,ref:s})})});m.displayName=l;var u="ProgressIndicator",h=a.forwardRef((e,s)=>{let{__scopeProgress:t,...a}=e,n=x(u,t);return(0,i.jsx)(r.div,{"data-state":p(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...a,ref:s})});function g(e,s){return`${Math.round(e/s*100)}%`}function p(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function j(e){return"number"==typeof e}function v(e){return j(e)&&!isNaN(e)&&e>0}function y(e,s){return j(e)&&!isNaN(e)&&e<=s&&e>=0}h.displayName=u;var f=m,N=h}},function(e){e.O(0,[778,402,440,250,677,650,971,938,744],function(){return e(e.s=94802)}),_N_E=e.O()}]);