(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{44723:function(e,t,s){Promise.resolve().then(s.bind(s,66548))},66548:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var a=s(57437),i=s(2265),n=s(65251),r=s(22812),l=s(41298),c=s(25750),d=s(66654),o=s(11981),x=s(92457),m=s(69057),g=s(97982),h=s(71738),u=s(17810),j=s(76637),p=s(28203),f=s(6141),v=s(13008),y=s(13332),N=s(15941),b=s(15671),w=s(14440),_=s(33277),k=s(4994),Z=s(45253),E=s(44909),D=s(16573),S=s(24235),C=s(50039),B=s(86812),O=s(31346),P=s(57703),q=s(28485),z=s(36612),K=s(85790);let Q=[{month:"10月",completed:8,inProgress:12,pending:4},{month:"11月",completed:12,inProgress:8,pending:6},{month:"12月",completed:15,inProgress:10,pending:3},{month:"1月",completed:18,inProgress:14,pending:5}],M=[{name:"完了",value:53,color:"#10B981"},{name:"進行中",value:44,color:"#0066CC"},{name:"保留",value:18,color:"#F59E0B"},{name:"キャンセル",value:8,color:"#EF4444"}],Y=e=>{let{active:t,payload:s,label:i}=e;return t&&s&&s.length?(0,a.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 mb-2",children:i}),s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsxs)("span",{className:"text-gray-700",children:[e.name,": ",e.value,"件"]})]},t))]}):null};function F(){return(0,a.jsxs)(b.Zb,{className:"hover-lift border-engineering-blue/20",children:[(0,a.jsx)(b.Ol,{children:(0,a.jsxs)(b.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(K.Z,{className:"w-5 h-5 text-engineering-blue"}),"案件推移"]})}),(0,a.jsxs)(b.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"月別プロジェクト数"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(Z.h,{width:"100%",height:"100%",children:(0,a.jsxs)(E.v,{data:Q,children:[(0,a.jsx)(D.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(S.K,{dataKey:"month",tick:{fill:"#6B7280",fontSize:12},tickLine:{stroke:"#D1D5DB"}}),(0,a.jsx)(C.B,{tick:{fill:"#6B7280",fontSize:12},tickLine:{stroke:"#D1D5DB"}}),(0,a.jsx)(B.u,{content:(0,a.jsx)(Y,{})}),(0,a.jsx)(O.$,{dataKey:"completed",fill:"#10B981",name:"完了",radius:[2,2,0,0]}),(0,a.jsx)(O.$,{dataKey:"inProgress",fill:"#0066CC",name:"進行中",radius:[2,2,0,0]}),(0,a.jsx)(O.$,{dataKey:"pending",fill:"#F59E0B",name:"保留",radius:[2,2,0,0]})]})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"ステータス分布"}),(0,a.jsxs)("div",{className:"h-64 relative",children:[(0,a.jsx)(Z.h,{width:"100%",height:"100%",children:(0,a.jsxs)(P.u,{children:[(0,a.jsx)(q.b,{data:M,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:2,dataKey:"value",children:M.map((e,t)=>(0,a.jsx)(z.b,{fill:e.color},"cell-".concat(t)))}),(0,a.jsx)(B.u,{content:e=>{let{active:t,payload:s}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,a.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.value,"件 (",(e.value/M.reduce((e,t)=>e+t.value,0)*100).toFixed(1),"%)"]})]})}return null}})]})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2",children:(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:M.map((e,t)=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t},className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-gray-600",children:e.name})]},e.name))})})]})]})]}),(0,a.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-6 p-4 bg-gradient-engineering-subtle rounded-lg",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-engineering-blue",children:"123"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"総プロジェクト数"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"89%"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"成功率"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"15.2日"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"平均完了日数"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:"4.7"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"平均評価"})]})]})})]})]})}var L=s(90045),A=s(51125),G=s(38227),J=s(19223),R=s(575),T=s(22169);let W=[{month:"8月",revenue:85e5,expenses:62e5,projects:12},{month:"9月",revenue:122e5,expenses:88e5,projects:18},{month:"10月",revenue:158e5,expenses:112e5,projects:24},{month:"11月",revenue:185e5,expenses:128e5,projects:28},{month:"12月",revenue:221e5,expenses:154e5,projects:32},{month:"1月",revenue:198e5,expenses:136e5,projects:29}],$=[{quarter:"Q1 2023",revenue:456e5,growth:12.5},{quarter:"Q2 2023",revenue:528e5,growth:15.8},{quarter:"Q3 2023",revenue:482e5,growth:-8.7},{quarter:"Q4 2023",revenue:684e5,growth:41.9}],I=e=>{let{active:t,payload:s,label:i}=e;return t&&s&&s.length?(0,a.jsxs)("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 mb-2",children:i}),s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 text-sm mb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-gray-700",children:e.name})]}),(0,a.jsx)("span",{className:"font-semibold",children:"number"==typeof e.value&&e.value>1e3?(0,T.xG)(e.value):e.value})]},t))]}):null};function H(){let[e,t]=(0,i.useState)("monthly"),s=W.reduce((e,t)=>e+t.revenue,0),r=W.reduce((e,t)=>e+t.expenses,0),c=s-r,d=(c/s*100).toFixed(1);return(0,a.jsxs)(b.Zb,{className:"hover-lift border-engineering-green/20",children:[(0,a.jsx)(b.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(b.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 text-engineering-green"}),"売上・収益分析"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(R.z,{variant:"monthly"===e?"engineering":"outline",size:"sm",onClick:()=>t("monthly"),children:"月別"}),(0,a.jsx)(R.z,{variant:"quarterly"===e?"engineering":"outline",size:"sm",onClick:()=>t("quarterly"),children:"四半期"})]})]})}),(0,a.jsxs)(b.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center p-3 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(0,T.xG)(s)}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1 mt-1",children:[(0,a.jsx)(K.Z,{className:"w-3 h-3"}),"総売上"]})]}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"text-center p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(0,T.xG)(r)}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1 mt-1",children:[(0,a.jsx)(p.Z,{className:"w-3 h-3"}),"総支出"]})]}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"text-center p-3 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(0,T.xG)(c)}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"純利益"})]}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"text-center p-3 bg-gradient-to-br from-orange-50 to-red-50 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:[d,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"利益率"})]})]}),"monthly"===e?(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(Z.h,{width:"100%",height:"100%",children:(0,a.jsxs)(L.T,{data:W,children:[(0,a.jsx)(D.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(S.K,{dataKey:"month",tick:{fill:"#6B7280",fontSize:12},tickLine:{stroke:"#D1D5DB"}}),(0,a.jsx)(C.B,{tick:{fill:"#6B7280",fontSize:12},tickLine:{stroke:"#D1D5DB"},tickFormatter:e=>"".concat((e/1e6).toFixed(0),"M")}),(0,a.jsx)(B.u,{content:(0,a.jsx)(I,{})}),(0,a.jsx)(A.u,{type:"monotone",dataKey:"revenue",stackId:"1",stroke:"#10B981",fill:"#10B981",fillOpacity:.6,name:"売上"}),(0,a.jsx)(A.u,{type:"monotone",dataKey:"expenses",stackId:"2",stroke:"#EF4444",fill:"#EF4444",fillOpacity:.4,name:"支出"})]})})}):(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(Z.h,{width:"100%",height:"100%",children:(0,a.jsxs)(G.w,{data:$,children:[(0,a.jsx)(D.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(S.K,{dataKey:"quarter",tick:{fill:"#6B7280",fontSize:12},tickLine:{stroke:"#D1D5DB"}}),(0,a.jsx)(C.B,{tick:{fill:"#6B7280",fontSize:12},tickLine:{stroke:"#D1D5DB"},tickFormatter:e=>"".concat((e/1e6).toFixed(0),"M")}),(0,a.jsx)(B.u,{content:(0,a.jsx)(I,{})}),(0,a.jsx)(J.x,{type:"monotone",dataKey:"revenue",stroke:"#0066CC",strokeWidth:3,dot:{fill:"#0066CC",strokeWidth:2,r:6},activeDot:{r:8,stroke:"#0066CC",strokeWidth:2},name:"四半期売上"})]})})}),(0,a.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-6 p-4 bg-gradient-to-r from-engineering-blue/10 to-engineering-green/10 rounded-lg",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(K.Z,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"成長率"})]}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-600",children:"+23.4%"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"前年同期比"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"平均案件単価"})]}),(0,a.jsx)("p",{className:"text-xl font-bold text-blue-600",children:(0,T.xG)(542e4)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"過去6ヶ月平均"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 text-purple-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"予想年間売上"})]}),(0,a.jsx)("p",{className:"text-xl font-bold text-purple-600",children:(0,T.xG)(278e6)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"現在のペース"})]})]})})]})]})}var X=s(66210),U=s(14958);function V(){let{userProfile:e,userRole:t,loading:s}=(0,X.useAuth)(),[Z,E]=(0,i.useState)(null),[D,S]=(0,i.useState)([]),[C,B]=(0,i.useState)([]),[O,P]=(0,i.useState)([]),[q,z]=(0,i.useState)([]),[K,Q]=(0,i.useState)(!0),M=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(!e||"OrgAdmin"!==t){Q(!1);return}let s="".concat(e.id,":").concat(t);M.current!==s&&(M.current=s,(async()=>{try{let{data:t,error:s}=await U.OQ.from("memberships").select("\n            org_id,\n            organizations (\n              id,\n              name,\n              description,\n              billing_email,\n              system_fee,\n              active\n            )\n          ").eq("user_id",e.id).eq("role","OrgAdmin").single();if(s||!t){console.error("組織情報の取得に失敗:",s),Q(!1);return}let a=t.organizations;E(a);let{data:i,error:n}=await U.OQ.from("projects").select("\n            id,\n            title,\n            description,\n            status,\n            budget,\n            start_date,\n            end_date,\n            contractor_id\n          ").eq("org_id",a.id);if(n)console.error("プロジェクトデータの取得に失敗:",n);else{let e=Array.from(new Set((null==i?void 0:i.map(e=>e.contractor_id).filter(Boolean))||[])),t={};if(e.length>0){let{data:s}=await U.OQ.from("users").select("id, display_name").in("id",e);t=(null==s?void 0:s.reduce((e,t)=>(e[t.id]=t,e),{}))||{}}let s=(null==i?void 0:i.map(e=>{var s;return{id:e.id,title:e.title,description:e.description,status:e.status,budget:e.budget,start_date:e.start_date,end_date:e.end_date,contractor_id:e.contractor_id,contractor_name:(null===(s=t[e.contractor_id])||void 0===s?void 0:s.display_name)||"未割当",progress:Math.floor(100*Math.random())}}))||[];S(s)}let{data:r,error:l}=await U.OQ.from("contracts").select("\n            id,\n            project_id,\n            contractor_id,\n            status,\n            contract_amount,\n            org_signed_at,\n            contractor_signed_at\n          ").eq("org_id",a.id);if(l)console.error("契約データの取得に失敗:",l);else{let e=Array.from(new Set((null==r?void 0:r.map(e=>e.project_id))||[])),t={};if(e.length>0){let{data:s}=await U.OQ.from("projects").select("id, title").in("id",e);t=(null==s?void 0:s.reduce((e,t)=>(e[t.id]=t,e),{}))||{}}let s=Array.from(new Set((null==r?void 0:r.map(e=>e.contractor_id))||[])),a={};if(s.length>0){let{data:e}=await U.OQ.from("users").select("id, display_name").in("id",s);a=(null==e?void 0:e.reduce((e,t)=>(e[t.id]=t,e),{}))||{}}let i=(null==r?void 0:r.map(e=>{var s,i;return{id:e.id,project_id:e.project_id,project_title:(null===(s=t[e.project_id])||void 0===s?void 0:s.title)||"",contractor_name:(null===(i=a[e.contractor_id])||void 0===i?void 0:i.display_name)||"",status:e.status,amount:e.contract_amount,signed_date:e.org_signed_at||e.contractor_signed_at}}))||[];B(i)}try{let{data:e,error:t}=await U.OQ.from("billing").select("\n              id,\n              project_id,\n              amount,\n              status,\n              due_date,\n              paid_date\n            ").eq("org_id",a.id);if(t)console.error("請求データの取得に失敗:",t),P([]);else{let t=(null==e?void 0:e.map(e=>({id:e.id,project_id:e.project_id,project_title:"",amount:e.amount,status:e.status,due_date:e.due_date,paid_date:e.paid_date})))||[];P(t)}}catch(e){console.error("請求データの取得エラー:",e),P([])}try{let{data:e,error:t}=await U.OQ.from("favorite_contractors").select("\n              contractor_id\n            ").eq("org_id",a.id);if(t)console.error("お気に入り受注者データの取得に失敗:",t),z([]);else{let t=(null==e?void 0:e.map(e=>e.contractor_id))||[],s={};if(t.length>0){let{data:e}=await U.OQ.from("users").select("id, display_name, specialties, rating").in("id",t);s=(null==e?void 0:e.reduce((e,t)=>(e[t.id]=t,e),{}))||{}}let a=(null==e?void 0:e.map(e=>{var t,a,i;return{id:e.contractor_id,name:(null===(t=s[e.contractor_id])||void 0===t?void 0:t.display_name)||"",specialties:(null===(a=s[e.contractor_id])||void 0===a?void 0:a.specialties)||[],rating:(null===(i=s[e.contractor_id])||void 0===i?void 0:i.rating)||0,completed_projects:Math.floor(20*Math.random())+1}}))||[];z(a)}}catch(e){console.error("お気に入り受注者データの取得エラー:",e),z([])}}catch(e){console.error("データ取得エラー:",e)}finally{Q(!1)}})())},[e,t]);let Y=[{title:"アクティブ案件",value:D.filter(e=>"in_progress"===e.status).length.toString(),icon:(0,a.jsx)(r.Z,{className:"w-6 h-6"}),trend:{value:12,isPositive:!0}},{title:"月間支出",value:(0,T.xG)(O.filter(e=>"paid"===e.status&&new Date(e.paid_date||"").getMonth()===new Date().getMonth()).reduce((e,t)=>e+t.amount,0)),icon:(0,a.jsx)(l.Z,{className:"w-6 h-6"}),trend:{value:8,isPositive:!1}},{title:"契約済み受注者",value:C.filter(e=>"signed"===e.status).length.toString(),icon:(0,a.jsx)(c.Z,{className:"w-6 h-6"}),trend:{value:3,isPositive:!0}},{title:"案件完了率",value:"".concat(Math.round(D.filter(e=>"completed"===e.status).length/Math.max(D.length,1)*100),"%"),icon:(0,a.jsx)(d.Z,{className:"w-6 h-6"}),trend:{value:2,isPositive:!0}}];return s||K?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-mesh flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-engineering-blue mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"データを読み込み中..."})]})}):"OrgAdmin"!==t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-mesh flex items-center justify-center",children:(0,a.jsx)(b.Zb,{className:"w-full max-w-md",children:(0,a.jsxs)(b.aY,{className:"p-6 text-center",children:[(0,a.jsx)(o.Z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"アクセス権限がありません"}),(0,a.jsx)("p",{className:"text-gray-600",children:"このページは発注者（組織管理者）のみアクセス可能です。"})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-mesh",children:[(0,a.jsx)(y.W,{}),(0,a.jsxs)("div",{className:"md:ml-64 transition-all duration-300",children:[(0,a.jsx)(n.E.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-30",children:(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"w-6 h-6 text-engineering-blue"}),(null==Z?void 0:Z.name)||"発注者ダッシュボード"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"土木設計業務管理プラットフォーム"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(_.C,{variant:"engineering",className:"animate-pulse",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-ping"}),"システム稼働中"]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"最終更新"}),(0,a.jsxs)("p",{className:"text-sm font-medium",children:[new Date().toLocaleDateString("ja-JP")," ",new Date().toLocaleTimeString("ja-JP")]})]})]})]})})}),(0,a.jsxs)("main",{className:"px-6 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6 mb-8",children:[(0,a.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,a.jsx)(b.Zb,{className:"hover-lift cursor-pointer group",children:(0,a.jsxs)(b.aY,{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-engineering-blue/10 rounded-lg flex items-center justify-center mx-auto mb-4 group-hover:bg-engineering-blue/20 transition-colors",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-engineering-blue"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"ダッシュボード"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"全体の概要と統計"})]})})}),(0,a.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,a.jsx)(b.Zb,{className:"hover-lift cursor-pointer group",children:(0,a.jsxs)(b.aY,{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-engineering-green/10 rounded-lg flex items-center justify-center mx-auto mb-4 group-hover:bg-engineering-green/20 transition-colors",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 text-engineering-green"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"案件管理"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"プロジェクトの管理"})]})})}),(0,a.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,a.jsx)(b.Zb,{className:"hover-lift cursor-pointer group",children:(0,a.jsxs)(b.aY,{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4 group-hover:bg-purple-200 transition-colors",children:(0,a.jsx)(g.Z,{className:"w-6 h-6 text-purple-600"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"契約管理"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"契約書の管理"})]})})}),(0,a.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,a.jsx)(b.Zb,{className:"hover-lift cursor-pointer group",children:(0,a.jsxs)(b.aY,{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4 group-hover:bg-green-200 transition-colors",children:(0,a.jsx)(h.Z,{className:"w-6 h-6 text-green-600"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"会計・請求"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"支払いと請求管理"})]})})}),(0,a.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,a.jsx)(b.Zb,{className:"hover-lift cursor-pointer group",children:(0,a.jsxs)(b.aY,{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-4 group-hover:bg-red-200 transition-colors",children:(0,a.jsx)(u.Z,{className:"w-6 h-6 text-red-600"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"お気に入り会員"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"信頼できる受注者"})]})})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Y.map((e,t)=>(0,a.jsx)(N.i,{title:e.title,value:e.value,icon:e.icon,trend:e.trend,variant:t%4==0?"engineering":t%4==1?"gradient":t%4==2?"glass":"default"},e.title))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsx)(F,{}),(0,a.jsx)(H,{})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(b.Zb,{className:"lg:col-span-2 hover-lift",children:[(0,a.jsxs)(b.Ol,{children:[(0,a.jsxs)(b.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5 text-engineering-blue"}),"最近の案件"]}),(0,a.jsx)(b.SZ,{children:"進行中の主要案件の状況"})]}),(0,a.jsx)(b.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:D.slice(0,3).map((e,t)=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"p-4 rounded-lg border border-gray-200 hover:border-engineering-blue/50 transition-colors hover-lift",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.contractor_name})]}),(0,a.jsx)(k.E,{status:e.status,size:"sm"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"進捗"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.progress,"%"]})]}),(0,a.jsx)(w.E,{value:e.progress,variant:"engineering",className:"mb-3"}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),"納期: ",new Date(e.end_date).toLocaleDateString("ja-JP")]}),(0,a.jsx)("div",{className:"font-semibold text-engineering-blue",children:(0,T.xG)(e.budget)})]})]},e.id))})})]}),(0,a.jsxs)(b.Zb,{className:"hover-lift",children:[(0,a.jsxs)(b.Ol,{children:[(0,a.jsxs)(b.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5 text-engineering-green"}),"今後のタスク"]}),(0,a.jsx)(b.SZ,{children:"期限が近いタスク"})]}),(0,a.jsx)(b.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:O.filter(e=>"pending"===e.status).slice(0,3).map((e,t)=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1*t},className:"p-3 rounded-lg bg-gradient-to-r from-engineering-blue/5 to-engineering-green/5 border border-gray-200 hover:border-engineering-blue/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 text-sm",children:"支払い処理"}),(0,a.jsxs)(_.C,{variant:"outline",className:"text-xs",children:[Math.ceil((new Date(e.due_date).getTime()-new Date().getTime())/864e5),"日"]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:e.project_title}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,a.jsx)(p.Z,{className:"w-3 h-3"}),new Date(e.due_date).toLocaleDateString("ja-JP")]})]},e.id))})})]})]}),(0,a.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"mt-8",children:(0,a.jsx)(b.Zb,{variant:"glass",className:"border-engineering-blue/20",children:(0,a.jsx)(b.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(v.Z,{className:"w-6 h-6 text-green-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"システム稼働状況"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["全サービス正常稼働中 - ",null==Z?void 0:Z.name]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Supabase API: 正常"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"データベース: 正常"]})]})]})})})})]})]})]})}},15941:function(e,t,s){"use strict";s.d(t,{i:function(){return o}});var a=s(57437);s(2265);var i=s(65251),n=s(85790),r=s(74522),l=s(64891),c=s(15671),d=s(22169);function o(e){let{title:t,value:s,icon:o,trend:x,className:m,variant:g="default"}=e;return(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{y:-2},className:"relative overflow-hidden",children:(0,a.jsxs)(c.Zb,{className:(0,d.cn)("relative hover-lift transition-all duration-300","engineering"===g&&"border-engineering-blue/20 bg-gradient-to-br from-white to-engineering-blue/5","glass"===g&&"glass border-white/20","gradient"===g&&"gradient-engineering text-white border-0",m),children:[(0,a.jsx)(c.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:(0,d.cn)("text-sm font-medium","gradient"===g?"text-white/80":"text-muted-foreground"),children:t}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.E.p,{className:(0,d.cn)("text-2xl font-bold","gradient"===g?"text-white":"text-foreground"),initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:s}),x&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.3},className:(0,d.cn)("flex items-center text-xs font-medium",x.isPositive?"gradient"===g?"text-green-200":"text-green-600":!1===x.isPositive?"gradient"===g?"text-red-200":"text-red-600":"gradient"===g?"text-white/60":"text-gray-600"),children:[x.isPositive?(0,a.jsx)(n.Z,{className:"w-3 h-3 mr-1"}):!1===x.isPositive?(0,a.jsx)(r.Z,{className:"w-3 h-3 mr-1"}):(0,a.jsx)(l.Z,{className:"w-3 h-3 mr-1"}),Math.abs(x.value),"%"]})]})]}),o&&(0,a.jsx)(i.E.div,{className:(0,d.cn)("p-3 rounded-lg","engineering"===g&&"bg-engineering-blue/10 text-engineering-blue","gradient"===g&&"bg-white/20 text-white","glass"===g&&"bg-white/20","default"===g&&"bg-primary/10 text-primary"),whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:10},children:o})]})}),"engineering"===g&&(0,a.jsx)("div",{className:"absolute inset-0 opacity-5",children:(0,a.jsx)("div",{className:"animated-mesh absolute -right-4 -top-4 w-24 h-24 bg-engineering-blue rounded-full"})}),"gradient"===g&&(0,a.jsx)("div",{className:"absolute inset-0 opacity-20",children:(0,a.jsx)("div",{className:"animated-mesh absolute -right-6 -bottom-6 w-32 h-32 bg-white rounded-full blur-xl"})})]})})}},14440:function(e,t,s){"use strict";s.d(t,{E:function(){return l}});var a=s(57437),i=s(2265),n=s(15946),r=s(22169);let l=i.forwardRef((e,t)=>{let{className:s,value:i,variant:l="default",...c}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,r.cn)("relative h-2 w-full overflow-hidden rounded-full","default"===l&&"bg-primary/20","engineering"===l&&"bg-engineering-blue/20","gradient"===l&&"bg-gradient-to-r from-engineering-blue/20 to-engineering-green/20",s),...c,children:(0,a.jsx)(n.z$,{className:(0,r.cn)("h-full w-full flex-1 transition-all","default"===l&&"bg-primary","engineering"===l&&"bg-engineering-blue","gradient"===l&&"gradient-engineering"),style:{transform:"translateX(-".concat(100-(i||0),"%)")}})})});l.displayName=n.fC.displayName},4994:function(e,t,s){"use strict";s.d(t,{E:function(){return r}});var a=s(57437);s(2265);var i=s(65251),n=s(22169);function r(e){let{status:t,size:s="md",animated:r=!0,className:l}=e;return(0,a.jsxs)(i.E.div,{initial:!!r&&{opacity:0,scale:.8},animate:!!r&&{opacity:1,scale:1},transition:{duration:.3},className:(0,n.cn)("inline-flex items-center gap-2 rounded-full font-medium",(0,n.z2)(t),{sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"}[s],l),children:[(0,a.jsx)(i.E.div,{className:(0,n.cn)("rounded-full",{sm:"w-1.5 h-1.5",md:"w-2 h-2",lg:"w-2.5 h-2.5"}[s],"in_progress"===t?"status-active":"draft"===t?"status-pending":"status-dot bg-current"),animate:"in_progress"===t?{scale:[1,1.2,1],opacity:[.7,1,.7]}:{},transition:{duration:2,repeat:"in_progress"===t?1/0:0}}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.XO)(t),t.replace("_"," ").toUpperCase()]})]})}}},function(e){e.O(0,[14,402,440,250,228,618,97,643,971,938,744],function(){return e(e.s=44723)}),_N_E=e.O()}]);