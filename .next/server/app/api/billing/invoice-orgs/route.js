"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/billing/invoice-orgs/route";
exports.ids = ["app/api/billing/invoice-orgs/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbilling%2Finvoice-orgs%2Froute&page=%2Fapi%2Fbilling%2Finvoice-orgs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbilling%2Finvoice-orgs%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbilling%2Finvoice-orgs%2Froute&page=%2Fapi%2Fbilling%2Finvoice-orgs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbilling%2Finvoice-orgs%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_sayuri_caddonworks_src_app_api_billing_invoice_orgs_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/billing/invoice-orgs/route.ts */ \"(rsc)/./src/app/api/billing/invoice-orgs/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/billing/invoice-orgs/route\",\n        pathname: \"/api/billing/invoice-orgs\",\n        filename: \"route\",\n        bundlePath: \"app/api/billing/invoice-orgs/route\"\n    },\n    resolvedPagePath: \"/Users/sayuri/caddonworks/src/app/api/billing/invoice-orgs/route.ts\",\n    nextConfigOutput,\n    userland: _Users_sayuri_caddonworks_src_app_api_billing_invoice_orgs_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/billing/invoice-orgs/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZiaWxsaW5nJTJGaW52b2ljZS1vcmdzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZiaWxsaW5nJTJGaW52b2ljZS1vcmdzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYmlsbGluZyUyRmludm9pY2Utb3JncyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNheXVyaSUyRmNhZGRvbndvcmtzJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnNheXVyaSUyRmNhZGRvbndvcmtzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ21CO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2l2aWwtZW5naW5lZXJpbmctcGxhdGZvcm0vP2E2MzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3NheXVyaS9jYWRkb253b3Jrcy9zcmMvYXBwL2FwaS9iaWxsaW5nL2ludm9pY2Utb3Jncy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYmlsbGluZy9pbnZvaWNlLW9yZ3Mvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9iaWxsaW5nL2ludm9pY2Utb3Jnc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYmlsbGluZy9pbnZvaWNlLW9yZ3Mvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvc2F5dXJpL2NhZGRvbndvcmtzL3NyYy9hcHAvYXBpL2JpbGxpbmcvaW52b2ljZS1vcmdzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2JpbGxpbmcvaW52b2ljZS1vcmdzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbilling%2Finvoice-orgs%2Froute&page=%2Fapi%2Fbilling%2Finvoice-orgs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbilling%2Finvoice-orgs%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/billing/invoice-orgs/route.ts":
/*!***************************************************!*\
  !*** ./src/app/api/billing/invoice-orgs/route.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/* harmony import */ var _lib_billing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/billing */ \"(rsc)/./src/lib/billing.ts\");\n/* harmony import */ var _lib_pdf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/pdf */ \"(rsc)/./src/lib/pdf.ts\");\n\n\n\n\n// 発注者向け: 20日締め → 翌月5日支払いの請求書作成\n// GET /api/billing/invoice-orgs?year=2025&month=9&org_id=...\nasync function GET(request) {\n    const supabase = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.createSupabaseAdmin)();\n    try {\n        const { searchParams } = new URL(request.url);\n        const year = Number(searchParams.get(\"year\")) || new Date().getFullYear();\n        const month = Number(searchParams.get(\"month\")) || new Date().getMonth() + 1;\n        const orgId = searchParams.get(\"org_id\") || \"\";\n        if (!orgId) return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"org_id is required\"\n        }, {\n            status: 400\n        });\n        const periodEnd = new Date(Date.UTC(year, month - 1, 20));\n        const periodStart = new Date(Date.UTC(year, month - 2, 21));\n        // 翌月5日\n        const payDate = new Date(Date.UTC(year, month, 5));\n        // 期間内の受注者請求の合計（この会社の契約に紐づくもの）\n        const { data: invoices, error: invErr } = await supabase.from(\"invoices\").select(\"subtotal\").eq(\"direction\", \"to_operator\").eq(\"org_id\", orgId).gte(\"issue_date\", periodStart.toISOString().slice(0, 10)).lte(\"issue_date\", periodEnd.toISOString().slice(0, 10));\n        if (invErr) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"請求集計に失敗\"\n            }, {\n                status: 500\n            });\n        }\n        const contractorsTotal = (invoices || []).reduce((sum, i)=>sum + (i.subtotal || 0), 0);\n        const calc = (0,_lib_billing__WEBPACK_IMPORTED_MODULE_2__.calculateOrgInvoice)({\n            contractorsTotal\n        });\n        const pdfUrl = await (0,_lib_pdf__WEBPACK_IMPORTED_MODULE_3__.generatePdfPlaceholder)({\n            title: \"発注者向け月次請求書\",\n            issueDate: new Date().toISOString().slice(0, 10),\n            dueDate: payDate.toISOString().slice(0, 10),\n            party: {\n                name: String(orgId)\n            },\n            items: [\n                {\n                    description: `期間 ${periodStart.toISOString().slice(0, 10)}〜${periodEnd.toISOString().slice(0, 10)}`,\n                    amount: calc.contractorsTotal\n                }\n            ],\n            totals: {\n                subtotal: calc.contractorsTotal,\n                adjustments: calc.operatorFee,\n                total: calc.totalAmount\n            }\n        });\n        const { data: statement, error: stmtErr } = await supabase.from(\"monthly_statements\").insert({\n            org_id: orgId,\n            period_start: periodStart.toISOString().slice(0, 10),\n            period_end: periodEnd.toISOString().slice(0, 10),\n            due_date: payDate.toISOString().slice(0, 10),\n            contractors_total: calc.contractorsTotal,\n            operator_fee: calc.operatorFee,\n            total_amount: calc.totalAmount,\n            pdf_url: pdfUrl,\n            status: \"issued\"\n        }).select().single();\n        if (stmtErr) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"発注者向け請求の作成に失敗\"\n            }, {\n                status: 500\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            statement\n        });\n    } catch (error) {\n        console.error(\"invoice-orgs error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"サーバーエラー\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9iaWxsaW5nL2ludm9pY2Utb3Jncy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1RDtBQUNIO0FBQ0Q7QUFDRDtBQUVsRCwrQkFBK0I7QUFDL0IsNkRBQTZEO0FBRXRELGVBQWVJLElBQUlDLE9BQW9CO0lBQzVDLE1BQU1DLFdBQVdMLGtFQUFtQkE7SUFDcEMsSUFBSTtRQUNGLE1BQU0sRUFBRU0sWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUgsUUFBUUksR0FBRztRQUM1QyxNQUFNQyxPQUFPQyxPQUFPSixhQUFhSyxHQUFHLENBQUMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1FBQ3ZFLE1BQU1DLFFBQVFKLE9BQU9KLGFBQWFLLEdBQUcsQ0FBQyxhQUFjLElBQUlDLE9BQU9HLFFBQVEsS0FBSztRQUM1RSxNQUFNQyxRQUFRVixhQUFhSyxHQUFHLENBQUMsYUFBYTtRQUM1QyxJQUFJLENBQUNLLE9BQU8sT0FBT2pCLGtGQUFZQSxDQUFDa0IsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBcUIsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFFdEYsTUFBTUMsWUFBWSxJQUFJUixLQUFLQSxLQUFLUyxHQUFHLENBQUNaLE1BQU1LLFFBQVEsR0FBRztRQUNyRCxNQUFNUSxjQUFjLElBQUlWLEtBQUtBLEtBQUtTLEdBQUcsQ0FBQ1osTUFBTUssUUFBUSxHQUFHO1FBRXZELE9BQU87UUFDUCxNQUFNUyxVQUFVLElBQUlYLEtBQUtBLEtBQUtTLEdBQUcsQ0FBQ1osTUFBTUssT0FBTztRQUUvQyw4QkFBOEI7UUFDOUIsTUFBTSxFQUFFVSxNQUFNQyxRQUFRLEVBQUVDLE9BQU9DLE1BQU0sRUFBRSxHQUFHLE1BQU10QixTQUM3Q3VCLElBQUksQ0FBQyxZQUNMQyxNQUFNLENBQUMsWUFDUEMsRUFBRSxDQUFDLGFBQWEsZUFDaEJBLEVBQUUsQ0FBQyxVQUFVZCxPQUNiZSxHQUFHLENBQUMsY0FBY1QsWUFBWVUsV0FBVyxHQUFHQyxLQUFLLENBQUMsR0FBRSxLQUNwREMsR0FBRyxDQUFDLGNBQWNkLFVBQVVZLFdBQVcsR0FBR0MsS0FBSyxDQUFDLEdBQUU7UUFFckQsSUFBSU4sUUFBUTtZQUNWLE9BQU81QixrRkFBWUEsQ0FBQ2tCLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUFVLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNqRTtRQUVBLE1BQU1nQixtQkFBbUIsQ0FBQ1YsWUFBWSxFQUFFLEVBQUVXLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQyxJQUFNRCxNQUFPQyxDQUFBQSxFQUFFQyxRQUFRLElBQUksSUFBSTtRQUN0RixNQUFNQyxPQUFPdkMsaUVBQW1CQSxDQUFDO1lBQUVrQztRQUFpQjtRQUVwRCxNQUFNTSxTQUFTLE1BQU12QyxnRUFBc0JBLENBQUM7WUFDMUN3QyxPQUFPO1lBQ1BDLFdBQVcsSUFBSS9CLE9BQU9vQixXQUFXLEdBQUdDLEtBQUssQ0FBQyxHQUFFO1lBQzVDVyxTQUFTckIsUUFBUVMsV0FBVyxHQUFHQyxLQUFLLENBQUMsR0FBRTtZQUN2Q1ksT0FBTztnQkFBRUMsTUFBTUMsT0FBTy9CO1lBQU87WUFDN0JnQyxPQUFPO2dCQUFDO29CQUFFQyxhQUFhLENBQUMsR0FBRyxFQUFFM0IsWUFBWVUsV0FBVyxHQUFHQyxLQUFLLENBQUMsR0FBRSxJQUFJLENBQUMsRUFBRWIsVUFBVVksV0FBVyxHQUFHQyxLQUFLLENBQUMsR0FBRSxJQUFJLENBQUM7b0JBQUVpQixRQUFRVixLQUFLTCxnQkFBZ0I7Z0JBQUM7YUFBRTtZQUM3SWdCLFFBQVE7Z0JBQUVaLFVBQVVDLEtBQUtMLGdCQUFnQjtnQkFBRWlCLGFBQWFaLEtBQUthLFdBQVc7Z0JBQUVDLE9BQU9kLEtBQUtlLFdBQVc7WUFBQztRQUNwRztRQUVBLE1BQU0sRUFBRS9CLE1BQU1nQyxTQUFTLEVBQUU5QixPQUFPK0IsT0FBTyxFQUFFLEdBQUcsTUFBTXBELFNBQy9DdUIsSUFBSSxDQUFDLHNCQUNMOEIsTUFBTSxDQUFDO1lBQ05DLFFBQVEzQztZQUNSNEMsY0FBY3RDLFlBQVlVLFdBQVcsR0FBR0MsS0FBSyxDQUFDLEdBQUU7WUFDaEQ0QixZQUFZekMsVUFBVVksV0FBVyxHQUFHQyxLQUFLLENBQUMsR0FBRTtZQUM1QzZCLFVBQVV2QyxRQUFRUyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxHQUFFO1lBQ3hDOEIsbUJBQW1CdkIsS0FBS0wsZ0JBQWdCO1lBQ3hDNkIsY0FBY3hCLEtBQUthLFdBQVc7WUFDOUJZLGNBQWN6QixLQUFLZSxXQUFXO1lBQzlCVyxTQUFTekI7WUFDVHRCLFFBQVE7UUFDVixHQUNDVSxNQUFNLEdBQ05zQyxNQUFNO1FBRVQsSUFBSVYsU0FBUztZQUNYLE9BQU8xRCxrRkFBWUEsQ0FBQ2tCLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUFnQixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDdkU7UUFFQSxPQUFPcEIsa0ZBQVlBLENBQUNrQixJQUFJLENBQUM7WUFBRXVDO1FBQVU7SUFDdkMsRUFBRSxPQUFPOUIsT0FBTztRQUNkMEMsUUFBUTFDLEtBQUssQ0FBQyx1QkFBdUJBO1FBQ3JDLE9BQU8zQixrRkFBWUEsQ0FBQ2tCLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQVUsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDakU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NpdmlsLWVuZ2luZWVyaW5nLXBsYXRmb3JtLy4vc3JjL2FwcC9hcGkvYmlsbGluZy9pbnZvaWNlLW9yZ3Mvcm91dGUudHM/MjhmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBjcmVhdGVTdXBhYmFzZUFkbWluIH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnXG5pbXBvcnQgeyBjYWxjdWxhdGVPcmdJbnZvaWNlIH0gZnJvbSAnQC9saWIvYmlsbGluZydcbmltcG9ydCB7IGdlbmVyYXRlUGRmUGxhY2Vob2xkZXIgfSBmcm9tICdAL2xpYi9wZGYnXG5cbi8vIOeZuuazqOiAheWQkeOBkTogMjDml6Xnt6DjgoEg4oaSIOe/jOaciDXml6XmlK/miZXjgYTjga7oq4vmsYLmm7jkvZzmiJBcbi8vIEdFVCAvYXBpL2JpbGxpbmcvaW52b2ljZS1vcmdzP3llYXI9MjAyNSZtb250aD05Jm9yZ19pZD0uLi5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVN1cGFiYXNlQWRtaW4oKVxuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IHllYXIgPSBOdW1iZXIoc2VhcmNoUGFyYW1zLmdldCgneWVhcicpKSB8fCBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IE51bWJlcihzZWFyY2hQYXJhbXMuZ2V0KCdtb250aCcpKSB8fCAobmV3IERhdGUoKS5nZXRNb250aCgpICsgMSlcbiAgICBjb25zdCBvcmdJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ29yZ19pZCcpIHx8ICcnXG4gICAgaWYgKCFvcmdJZCkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ29yZ19pZCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KVxuXG4gICAgY29uc3QgcGVyaW9kRW5kID0gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGggLSAxLCAyMCkpXG4gICAgY29uc3QgcGVyaW9kU3RhcnQgPSBuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aCAtIDIsIDIxKSlcblxuICAgIC8vIOe/jOaciDXml6VcbiAgICBjb25zdCBwYXlEYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGgsIDUpKVxuXG4gICAgLy8g5pyf6ZaT5YaF44Gu5Y+X5rOo6ICF6KuL5rGC44Gu5ZCI6KiI77yI44GT44Gu5Lya56S+44Gu5aWR57SE44Gr57SQ44Gl44GP44KC44Gu77yJXG4gICAgY29uc3QgeyBkYXRhOiBpbnZvaWNlcywgZXJyb3I6IGludkVyciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdpbnZvaWNlcycpXG4gICAgICAuc2VsZWN0KCdzdWJ0b3RhbCcpXG4gICAgICAuZXEoJ2RpcmVjdGlvbicsICd0b19vcGVyYXRvcicpXG4gICAgICAuZXEoJ29yZ19pZCcsIG9yZ0lkKVxuICAgICAgLmd0ZSgnaXNzdWVfZGF0ZScsIHBlcmlvZFN0YXJ0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCkpXG4gICAgICAubHRlKCdpc3N1ZV9kYXRlJywgcGVyaW9kRW5kLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCkpXG5cbiAgICBpZiAoaW52RXJyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAn6KuL5rGC6ZuG6KiI44Gr5aSx5pWXJyB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgfVxuXG4gICAgY29uc3QgY29udHJhY3RvcnNUb3RhbCA9IChpbnZvaWNlcyB8fCBbXSkucmVkdWNlKChzdW0sIGkpID0+IHN1bSArIChpLnN1YnRvdGFsIHx8IDApLCAwKVxuICAgIGNvbnN0IGNhbGMgPSBjYWxjdWxhdGVPcmdJbnZvaWNlKHsgY29udHJhY3RvcnNUb3RhbCB9KVxuXG4gICAgY29uc3QgcGRmVXJsID0gYXdhaXQgZ2VuZXJhdGVQZGZQbGFjZWhvbGRlcih7XG4gICAgICB0aXRsZTogJ+eZuuazqOiAheWQkeOBkeaciOasoeiri+axguabuCcsXG4gICAgICBpc3N1ZURhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKSxcbiAgICAgIGR1ZURhdGU6IHBheURhdGUudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKSxcbiAgICAgIHBhcnR5OiB7IG5hbWU6IFN0cmluZyhvcmdJZCkgfSxcbiAgICAgIGl0ZW1zOiBbeyBkZXNjcmlwdGlvbjogYOacn+mWkyAke3BlcmlvZFN0YXJ0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCl944CcJHtwZXJpb2RFbmQudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKX1gLCBhbW91bnQ6IGNhbGMuY29udHJhY3RvcnNUb3RhbCB9XSxcbiAgICAgIHRvdGFsczogeyBzdWJ0b3RhbDogY2FsYy5jb250cmFjdG9yc1RvdGFsLCBhZGp1c3RtZW50czogY2FsYy5vcGVyYXRvckZlZSwgdG90YWw6IGNhbGMudG90YWxBbW91bnQgfVxuICAgIH0pXG5cbiAgICBjb25zdCB7IGRhdGE6IHN0YXRlbWVudCwgZXJyb3I6IHN0bXRFcnIgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnbW9udGhseV9zdGF0ZW1lbnRzJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICBvcmdfaWQ6IG9yZ0lkLFxuICAgICAgICBwZXJpb2Rfc3RhcnQ6IHBlcmlvZFN0YXJ0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCksXG4gICAgICAgIHBlcmlvZF9lbmQ6IHBlcmlvZEVuZC50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApLFxuICAgICAgICBkdWVfZGF0ZTogcGF5RGF0ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApLFxuICAgICAgICBjb250cmFjdG9yc190b3RhbDogY2FsYy5jb250cmFjdG9yc1RvdGFsLFxuICAgICAgICBvcGVyYXRvcl9mZWU6IGNhbGMub3BlcmF0b3JGZWUsXG4gICAgICAgIHRvdGFsX2Ftb3VudDogY2FsYy50b3RhbEFtb3VudCxcbiAgICAgICAgcGRmX3VybDogcGRmVXJsLFxuICAgICAgICBzdGF0dXM6ICdpc3N1ZWQnXG4gICAgICB9KVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmIChzdG10RXJyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAn55m65rOo6ICF5ZCR44GR6KuL5rGC44Gu5L2c5oiQ44Gr5aSx5pWXJyB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3RhdGVtZW50IH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignaW52b2ljZS1vcmdzIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICfjgrXjg7zjg5Djg7zjgqjjg6njg7wnIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG5cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVTdXBhYmFzZUFkbWluIiwiY2FsY3VsYXRlT3JnSW52b2ljZSIsImdlbmVyYXRlUGRmUGxhY2Vob2xkZXIiLCJHRVQiLCJyZXF1ZXN0Iiwic3VwYWJhc2UiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJ5ZWFyIiwiTnVtYmVyIiwiZ2V0IiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsIm9yZ0lkIiwianNvbiIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJwZXJpb2RFbmQiLCJVVEMiLCJwZXJpb2RTdGFydCIsInBheURhdGUiLCJkYXRhIiwiaW52b2ljZXMiLCJlcnJvciIsImludkVyciIsImZyb20iLCJzZWxlY3QiLCJlcSIsImd0ZSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJsdGUiLCJjb250cmFjdG9yc1RvdGFsIiwicmVkdWNlIiwic3VtIiwiaSIsInN1YnRvdGFsIiwiY2FsYyIsInBkZlVybCIsInRpdGxlIiwiaXNzdWVEYXRlIiwiZHVlRGF0ZSIsInBhcnR5IiwibmFtZSIsIlN0cmluZyIsIml0ZW1zIiwiZGVzY3JpcHRpb24iLCJhbW91bnQiLCJ0b3RhbHMiLCJhZGp1c3RtZW50cyIsIm9wZXJhdG9yRmVlIiwidG90YWwiLCJ0b3RhbEFtb3VudCIsInN0YXRlbWVudCIsInN0bXRFcnIiLCJpbnNlcnQiLCJvcmdfaWQiLCJwZXJpb2Rfc3RhcnQiLCJwZXJpb2RfZW5kIiwiZHVlX2RhdGUiLCJjb250cmFjdG9yc190b3RhbCIsIm9wZXJhdG9yX2ZlZSIsInRvdGFsX2Ftb3VudCIsInBkZl91cmwiLCJzaW5nbGUiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/billing/invoice-orgs/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/billing.ts":
/*!****************************!*\
  !*** ./src/lib/billing.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateContractorPayout: () => (/* binding */ calculateContractorPayout),\n/* harmony export */   calculateOrgInvoice: () => (/* binding */ calculateOrgInvoice)\n/* harmony export */ });\n// 源泉税率（簡易）：10.21% とする（実務では区分により異なる）\nconst WITHHOLDING_TAX_RATE = 0.1021;\nconst TRANSFER_FEE_JPY = 550;\nfunction calculateContractorPayout(input) {\n    const gross = Math.max(0, Math.round(input.totalBilled));\n    if (input.businessType === \"corporation\") {\n        return {\n            grossAmount: gross,\n            withholdingTax: 0,\n            transferFee: 0,\n            netAmount: gross\n        };\n    }\n    const withholding = Math.round(gross * WITHHOLDING_TAX_RATE);\n    const net = Math.max(0, gross - withholding - TRANSFER_FEE_JPY);\n    return {\n        grossAmount: gross,\n        withholdingTax: withholding,\n        transferFee: TRANSFER_FEE_JPY,\n        netAmount: net\n    };\n}\nconst OPERATOR_FEE_RATE = 0.3;\nfunction calculateOrgInvoice(input) {\n    const contractorsTotal = Math.max(0, Math.round(input.contractorsTotal));\n    const fee = Math.round(contractorsTotal * OPERATOR_FEE_RATE);\n    const total = contractorsTotal + fee;\n    return {\n        contractorsTotal,\n        operatorFee: fee,\n        totalAmount: total\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2JpbGxpbmcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFjQSxvQ0FBb0M7QUFDcEMsTUFBTUEsdUJBQXVCO0FBQzdCLE1BQU1DLG1CQUFtQjtBQUVsQixTQUFTQywwQkFDZEMsS0FBNEI7SUFFNUIsTUFBTUMsUUFBUUMsS0FBS0MsR0FBRyxDQUFDLEdBQUdELEtBQUtFLEtBQUssQ0FBQ0osTUFBTUssV0FBVztJQUV0RCxJQUFJTCxNQUFNTSxZQUFZLEtBQUssZUFBZTtRQUN4QyxPQUFPO1lBQ0xDLGFBQWFOO1lBQ2JPLGdCQUFnQjtZQUNoQkMsYUFBYTtZQUNiQyxXQUFXVDtRQUNiO0lBQ0Y7SUFFQSxNQUFNVSxjQUFjVCxLQUFLRSxLQUFLLENBQUNILFFBQVFKO0lBQ3ZDLE1BQU1lLE1BQU1WLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRixRQUFRVSxjQUFjYjtJQUU5QyxPQUFPO1FBQ0xTLGFBQWFOO1FBQ2JPLGdCQUFnQkc7UUFDaEJGLGFBQWFYO1FBQ2JZLFdBQVdFO0lBQ2I7QUFDRjtBQVlBLE1BQU1DLG9CQUFvQjtBQUVuQixTQUFTQyxvQkFBb0JkLEtBQXNCO0lBQ3hELE1BQU1lLG1CQUFtQmIsS0FBS0MsR0FBRyxDQUFDLEdBQUdELEtBQUtFLEtBQUssQ0FBQ0osTUFBTWUsZ0JBQWdCO0lBQ3RFLE1BQU1DLE1BQU1kLEtBQUtFLEtBQUssQ0FBQ1csbUJBQW1CRjtJQUMxQyxNQUFNSSxRQUFRRixtQkFBbUJDO0lBQ2pDLE9BQU87UUFDTEQ7UUFDQUcsYUFBYUY7UUFDYkcsYUFBYUY7SUFDZjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2l2aWwtZW5naW5lZXJpbmctcGxhdGZvcm0vLi9zcmMvbGliL2JpbGxpbmcudHM/YmZlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSBCdXNpbmVzc1R5cGUgPSAnaW5kaXZpZHVhbCcgfCAnY29ycG9yYXRpb24nXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udHJhY3RvclBheW91dElucHV0IHtcbiAgYnVzaW5lc3NUeXBlOiBCdXNpbmVzc1R5cGVcbiAgdG90YWxCaWxsZWQ6IG51bWJlciAvLyDlkIjoqIjoq4vmsYLph5HpoY3vvIjnqI7mipzmg7PlrprvvIlcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb250cmFjdG9yUGF5b3V0UmVzdWx0IHtcbiAgZ3Jvc3NBbW91bnQ6IG51bWJlclxuICB3aXRoaG9sZGluZ1RheDogbnVtYmVyXG4gIHRyYW5zZmVyRmVlOiBudW1iZXJcbiAgbmV0QW1vdW50OiBudW1iZXJcbn1cblxuLy8g5rqQ5rOJ56iO546H77yI57Ch5piT77yJ77yaMTAuMjElIOOBqOOBmeOCi++8iOWun+WLmeOBp+OBr+WMuuWIhuOBq+OCiOOCiueVsOOBquOCi++8iVxuY29uc3QgV0lUSEhPTERJTkdfVEFYX1JBVEUgPSAwLjEwMjFcbmNvbnN0IFRSQU5TRkVSX0ZFRV9KUFkgPSA1NTBcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUNvbnRyYWN0b3JQYXlvdXQoXG4gIGlucHV0OiBDb250cmFjdG9yUGF5b3V0SW5wdXRcbik6IENvbnRyYWN0b3JQYXlvdXRSZXN1bHQge1xuICBjb25zdCBncm9zcyA9IE1hdGgubWF4KDAsIE1hdGgucm91bmQoaW5wdXQudG90YWxCaWxsZWQpKVxuXG4gIGlmIChpbnB1dC5idXNpbmVzc1R5cGUgPT09ICdjb3Jwb3JhdGlvbicpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ3Jvc3NBbW91bnQ6IGdyb3NzLFxuICAgICAgd2l0aGhvbGRpbmdUYXg6IDAsXG4gICAgICB0cmFuc2ZlckZlZTogMCxcbiAgICAgIG5ldEFtb3VudDogZ3Jvc3MsXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgd2l0aGhvbGRpbmcgPSBNYXRoLnJvdW5kKGdyb3NzICogV0lUSEhPTERJTkdfVEFYX1JBVEUpXG4gIGNvbnN0IG5ldCA9IE1hdGgubWF4KDAsIGdyb3NzIC0gd2l0aGhvbGRpbmcgLSBUUkFOU0ZFUl9GRUVfSlBZKVxuXG4gIHJldHVybiB7XG4gICAgZ3Jvc3NBbW91bnQ6IGdyb3NzLFxuICAgIHdpdGhob2xkaW5nVGF4OiB3aXRoaG9sZGluZyxcbiAgICB0cmFuc2ZlckZlZTogVFJBTlNGRVJfRkVFX0pQWSxcbiAgICBuZXRBbW91bnQ6IG5ldCxcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9yZ0ludm9pY2VJbnB1dCB7XG4gIGNvbnRyYWN0b3JzVG90YWw6IG51bWJlciAvLyDlj5fms6jogIXjgbjjga7lkIjoqIjmlK/miZXpoY3vvIjjgb7jgZ/jga/oq4vmsYLlkIjoqIjvvIlcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcmdJbnZvaWNlUmVzdWx0IHtcbiAgY29udHJhY3RvcnNUb3RhbDogbnVtYmVyXG4gIG9wZXJhdG9yRmVlOiBudW1iZXJcbiAgdG90YWxBbW91bnQ6IG51bWJlclxufVxuXG5jb25zdCBPUEVSQVRPUl9GRUVfUkFURSA9IDAuM1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlT3JnSW52b2ljZShpbnB1dDogT3JnSW52b2ljZUlucHV0KTogT3JnSW52b2ljZVJlc3VsdCB7XG4gIGNvbnN0IGNvbnRyYWN0b3JzVG90YWwgPSBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKGlucHV0LmNvbnRyYWN0b3JzVG90YWwpKVxuICBjb25zdCBmZWUgPSBNYXRoLnJvdW5kKGNvbnRyYWN0b3JzVG90YWwgKiBPUEVSQVRPUl9GRUVfUkFURSlcbiAgY29uc3QgdG90YWwgPSBjb250cmFjdG9yc1RvdGFsICsgZmVlXG4gIHJldHVybiB7XG4gICAgY29udHJhY3RvcnNUb3RhbCxcbiAgICBvcGVyYXRvckZlZTogZmVlLFxuICAgIHRvdGFsQW1vdW50OiB0b3RhbCxcbiAgfVxufVxuXG5cbiJdLCJuYW1lcyI6WyJXSVRISE9MRElOR19UQVhfUkFURSIsIlRSQU5TRkVSX0ZFRV9KUFkiLCJjYWxjdWxhdGVDb250cmFjdG9yUGF5b3V0IiwiaW5wdXQiLCJncm9zcyIsIk1hdGgiLCJtYXgiLCJyb3VuZCIsInRvdGFsQmlsbGVkIiwiYnVzaW5lc3NUeXBlIiwiZ3Jvc3NBbW91bnQiLCJ3aXRoaG9sZGluZ1RheCIsInRyYW5zZmVyRmVlIiwibmV0QW1vdW50Iiwid2l0aGhvbGRpbmciLCJuZXQiLCJPUEVSQVRPUl9GRUVfUkFURSIsImNhbGN1bGF0ZU9yZ0ludm9pY2UiLCJjb250cmFjdG9yc1RvdGFsIiwiZmVlIiwidG90YWwiLCJvcGVyYXRvckZlZSIsInRvdGFsQW1vdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/billing.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/pdf.ts":
/*!************************!*\
  !*** ./src/lib/pdf.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generatePdfPlaceholder: () => (/* binding */ generatePdfPlaceholder),\n/* harmony export */   renderTemplatePdf: () => (/* binding */ renderTemplatePdf)\n/* harmony export */ });\n/* harmony import */ var pdfkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pdfkit */ \"(rsc)/./node_modules/pdfkit/js/pdfkit.es5.js\");\n// 簡易PDFテンプレ生成（今回はJSONプレースホルダを返すだけ）\n// 実運用では serverless-pdf, @react-pdf/renderer などで置換\nasync function generatePdfPlaceholder(payload) {\n    // 実装簡略化のため、JSONを文字列化して返す（S3に保存するなどに差し替え可能）\n    const content = JSON.stringify(payload, null, 2);\n    // 実運用ではここでストレージへアップロードしてURLを返す\n    return `data:application/json;base64,${Buffer.from(content).toString(\"base64\")}`;\n}\n// --- 雛形に寄せた簡易テンプレの描画 ---\n\nasync function renderTemplatePdf(kind, data) {\n    return new Promise((resolve)=>{\n        const doc = new pdfkit__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            size: \"A4\",\n            margin: 36\n        });\n        const buffers = [];\n        doc.on(\"data\", (d)=>buffers.push(d));\n        doc.on(\"end\", ()=>resolve(Buffer.concat(buffers)));\n        // ヘッダ\n        doc.fontSize(12).text(new Date().toLocaleDateString(\"ja-JP\"), {\n            align: \"right\"\n        });\n        doc.moveDown(0.5);\n        doc.fontSize(20).text(data.title, {\n            align: \"center\"\n        });\n        // 情報ボックス（擬似的に表を描画）\n        const left = 36;\n        const top = 120;\n        const width = 523;\n        const rowH = 18;\n        doc.rect(left, top, width, rowH * (data.lines.length + 1)).stroke();\n        doc.fontSize(9);\n        data.lines.forEach((l, i)=>{\n            doc.text(l, left + 8, top + 6 + rowH * i);\n            if (i < data.lines.length) {\n                doc.moveTo(left, top + rowH * (i + 1)).lineTo(left + width, top + rowH * (i + 1)).stroke();\n            }\n        });\n        // 金額枠\n        const boxTop = top + rowH * (data.lines.length + 1) + 12;\n        doc.rect(left, boxTop, width, 70).stroke();\n        doc.fontSize(12).text(\"金額\", left + 10, boxTop + 10);\n        doc.fontSize(22).text(`${data.amount.toLocaleString(\"ja-JP\")} 円`, left + 70, boxTop + 28);\n        // 注記\n        doc.fontSize(9).text(data.note || \"注: 電子契約につき収入印紙は不要です。\", left, boxTop + 80);\n        doc.end();\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3BkZi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxtQ0FBbUM7QUFDbkMsa0RBQWtEO0FBVzNDLGVBQWVBLHVCQUF1QkMsT0FBMEI7SUFDckUsMkNBQTJDO0lBQzNDLE1BQU1DLFVBQVVDLEtBQUtDLFNBQVMsQ0FBQ0gsU0FBUyxNQUFNO0lBQzlDLCtCQUErQjtJQUMvQixPQUFPLENBQUMsNkJBQTZCLEVBQUVJLE9BQU9DLElBQUksQ0FBQ0osU0FBU0ssUUFBUSxDQUFDLFVBQVUsQ0FBQztBQUNsRjtBQUVBLDBCQUEwQjtBQUNNO0FBV3pCLGVBQWVFLGtCQUFrQkMsSUFBYSxFQUFFQyxJQUFzQjtJQUMzRSxPQUFPLElBQUlDLFFBQVEsQ0FBQ0M7UUFDbEIsTUFBTUMsTUFBTSxJQUFJTiw4Q0FBV0EsQ0FBQztZQUFFTyxNQUFNO1lBQU1DLFFBQVE7UUFBRztRQUNyRCxNQUFNQyxVQUFvQixFQUFFO1FBQzVCSCxJQUFJSSxFQUFFLENBQUMsUUFBUSxDQUFDQyxJQUFNRixRQUFRRyxJQUFJLENBQUNEO1FBQ25DTCxJQUFJSSxFQUFFLENBQUMsT0FBTyxJQUFNTCxRQUFRUixPQUFPZ0IsTUFBTSxDQUFDSjtRQUUxQyxNQUFNO1FBQ05ILElBQUlRLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLENBQUMsSUFBSUMsT0FBT0Msa0JBQWtCLENBQUMsVUFBVTtZQUFFQyxPQUFPO1FBQVE7UUFDL0VaLElBQUlhLFFBQVEsQ0FBQztRQUNiYixJQUFJUSxRQUFRLENBQUMsSUFBSUMsSUFBSSxDQUFDWixLQUFLaUIsS0FBSyxFQUFFO1lBQUVGLE9BQU87UUFBUztRQUVwRCxtQkFBbUI7UUFDbkIsTUFBTUcsT0FBTztRQUNiLE1BQU1DLE1BQU07UUFDWixNQUFNQyxRQUFRO1FBQ2QsTUFBTUMsT0FBTztRQUNibEIsSUFBSW1CLElBQUksQ0FBQ0osTUFBTUMsS0FBS0MsT0FBT0MsT0FBUXJCLENBQUFBLEtBQUt1QixLQUFLLENBQUNDLE1BQU0sR0FBRyxJQUFJQyxNQUFNO1FBQ2pFdEIsSUFBSVEsUUFBUSxDQUFDO1FBQ2JYLEtBQUt1QixLQUFLLENBQUNHLE9BQU8sQ0FBQyxDQUFDQyxHQUFHQztZQUNyQnpCLElBQUlTLElBQUksQ0FBQ2UsR0FBR1QsT0FBTyxHQUFHQyxNQUFNLElBQUlFLE9BQU9PO1lBQ3ZDLElBQUlBLElBQUk1QixLQUFLdUIsS0FBSyxDQUFDQyxNQUFNLEVBQUU7Z0JBQ3pCckIsSUFBSTBCLE1BQU0sQ0FBQ1gsTUFBTUMsTUFBTUUsT0FBUU8sQ0FBQUEsSUFBSSxJQUFJRSxNQUFNLENBQUNaLE9BQU9FLE9BQU9ELE1BQU1FLE9BQVFPLENBQUFBLElBQUksSUFBSUgsTUFBTTtZQUMxRjtRQUNGO1FBRUEsTUFBTTtRQUNOLE1BQU1NLFNBQVNaLE1BQU1FLE9BQVFyQixDQUFBQSxLQUFLdUIsS0FBSyxDQUFDQyxNQUFNLEdBQUcsS0FBSztRQUN0RHJCLElBQUltQixJQUFJLENBQUNKLE1BQU1hLFFBQVFYLE9BQU8sSUFBSUssTUFBTTtRQUN4Q3RCLElBQUlRLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLENBQUMsTUFBTU0sT0FBTyxJQUFJYSxTQUFTO1FBQ2hENUIsSUFBSVEsUUFBUSxDQUFDLElBQUlDLElBQUksQ0FBQyxDQUFDLEVBQUVaLEtBQUtnQyxNQUFNLENBQUNDLGNBQWMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFZixPQUFPLElBQUlhLFNBQVM7UUFFdEYsS0FBSztRQUNMNUIsSUFBSVEsUUFBUSxDQUFDLEdBQUdDLElBQUksQ0FBQ1osS0FBS2tDLElBQUksSUFBSSx3QkFBd0JoQixNQUFNYSxTQUFTO1FBRXpFNUIsSUFBSWdDLEdBQUc7SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2l2aWwtZW5naW5lZXJpbmctcGxhdGZvcm0vLi9zcmMvbGliL3BkZi50cz81ZTI4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIOewoeaYk1BERuODhuODs+ODl+ODrOeUn+aIkO+8iOS7iuWbnuOBr0pTT07jg5fjg6zjg7zjgrnjg5vjg6vjg4DjgpLov5TjgZnjgaDjgZHvvIlcbi8vIOWun+mBi+eUqOOBp+OBryBzZXJ2ZXJsZXNzLXBkZiwgQHJlYWN0LXBkZi9yZW5kZXJlciDjgarjganjgafnva7mj5tcblxuZXhwb3J0IGludGVyZmFjZSBJbnZvaWNlUGRmUGF5bG9hZCB7XG4gIHRpdGxlOiBzdHJpbmdcbiAgaXNzdWVEYXRlOiBzdHJpbmdcbiAgZHVlRGF0ZT86IHN0cmluZ1xuICBwYXJ0eTogeyBuYW1lOiBzdHJpbmcgfVxuICBpdGVtczogQXJyYXk8eyBkZXNjcmlwdGlvbjogc3RyaW5nOyBhbW91bnQ6IG51bWJlciB9PlxuICB0b3RhbHM6IHsgc3VidG90YWw6IG51bWJlcjsgYWRqdXN0bWVudHM/OiBudW1iZXI7IHRvdGFsOiBudW1iZXIgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVQZGZQbGFjZWhvbGRlcihwYXlsb2FkOiBJbnZvaWNlUGRmUGF5bG9hZCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIC8vIOWun+ijheewoeeVpeWMluOBruOBn+OCgeOAgUpTT07jgpLmloflrZfliJfljJbjgZfjgabov5TjgZnvvIhTM+OBq+S/neWtmOOBmeOCi+OBquOBqeOBq+W3ruOBl+abv+OBiOWPr+iDve+8iVxuICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCwgbnVsbCwgMilcbiAgLy8g5a6f6YGL55So44Gn44Gv44GT44GT44Gn44K544OI44Os44O844K444G444Ki44OD44OX44Ot44O844OJ44GX44GmVVJM44KS6L+U44GZXG4gIHJldHVybiBgZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCwke0J1ZmZlci5mcm9tKGNvbnRlbnQpLnRvU3RyaW5nKCdiYXNlNjQnKX1gXG59XG5cbi8vIC0tLSDpm5vlvaLjgavlr4TjgZvjgZ/nsKHmmJPjg4bjg7Pjg5fjg6zjga7mj4/nlLsgLS0tXG5pbXBvcnQgUERGRG9jdW1lbnQgZnJvbSAncGRma2l0J1xuXG5leHBvcnQgdHlwZSBEb2NLaW5kID0gJ2ludm9pY2UnIHwgJ2FjaycgfCAnb3JkZXInXG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVRlbXBsYXRlRGF0YSB7XG4gIHRpdGxlOiBzdHJpbmdcbiAgbGluZXM6IHN0cmluZ1tdXG4gIGFtb3VudDogbnVtYmVyXG4gIG5vdGU/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlclRlbXBsYXRlUGRmKGtpbmQ6IERvY0tpbmQsIGRhdGE6IEJhc2VUZW1wbGF0ZURhdGEpOiBQcm9taXNlPEJ1ZmZlcj4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBkb2MgPSBuZXcgUERGRG9jdW1lbnQoeyBzaXplOiAnQTQnLCBtYXJnaW46IDM2IH0pXG4gICAgY29uc3QgYnVmZmVyczogQnVmZmVyW10gPSBbXVxuICAgIGRvYy5vbignZGF0YScsIChkKSA9PiBidWZmZXJzLnB1c2goZCBhcyBCdWZmZXIpKVxuICAgIGRvYy5vbignZW5kJywgKCkgPT4gcmVzb2x2ZShCdWZmZXIuY29uY2F0KGJ1ZmZlcnMpKSlcblxuICAgIC8vIOODmOODg+ODgFxuICAgIGRvYy5mb250U2l6ZSgxMikudGV4dChuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnamEtSlAnKSwgeyBhbGlnbjogJ3JpZ2h0JyB9KVxuICAgIGRvYy5tb3ZlRG93bigwLjUpXG4gICAgZG9jLmZvbnRTaXplKDIwKS50ZXh0KGRhdGEudGl0bGUsIHsgYWxpZ246ICdjZW50ZXInIH0pXG5cbiAgICAvLyDmg4XloLHjg5zjg4Pjgq/jgrnvvIjmk6zkvLznmoTjgavooajjgpLmj4/nlLvvvIlcbiAgICBjb25zdCBsZWZ0ID0gMzZcbiAgICBjb25zdCB0b3AgPSAxMjBcbiAgICBjb25zdCB3aWR0aCA9IDUyM1xuICAgIGNvbnN0IHJvd0ggPSAxOFxuICAgIGRvYy5yZWN0KGxlZnQsIHRvcCwgd2lkdGgsIHJvd0ggKiAoZGF0YS5saW5lcy5sZW5ndGggKyAxKSkuc3Ryb2tlKClcbiAgICBkb2MuZm9udFNpemUoOSlcbiAgICBkYXRhLmxpbmVzLmZvckVhY2goKGwsIGkpID0+IHtcbiAgICAgIGRvYy50ZXh0KGwsIGxlZnQgKyA4LCB0b3AgKyA2ICsgcm93SCAqIGkpXG4gICAgICBpZiAoaSA8IGRhdGEubGluZXMubGVuZ3RoKSB7XG4gICAgICAgIGRvYy5tb3ZlVG8obGVmdCwgdG9wICsgcm93SCAqIChpICsgMSkpLmxpbmVUbyhsZWZ0ICsgd2lkdGgsIHRvcCArIHJvd0ggKiAoaSArIDEpKS5zdHJva2UoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyDph5HpoY3mnqBcbiAgICBjb25zdCBib3hUb3AgPSB0b3AgKyByb3dIICogKGRhdGEubGluZXMubGVuZ3RoICsgMSkgKyAxMlxuICAgIGRvYy5yZWN0KGxlZnQsIGJveFRvcCwgd2lkdGgsIDcwKS5zdHJva2UoKVxuICAgIGRvYy5mb250U2l6ZSgxMikudGV4dCgn6YeR6aGNJywgbGVmdCArIDEwLCBib3hUb3AgKyAxMClcbiAgICBkb2MuZm9udFNpemUoMjIpLnRleHQoYCR7ZGF0YS5hbW91bnQudG9Mb2NhbGVTdHJpbmcoJ2phLUpQJyl9IOWGhmAsIGxlZnQgKyA3MCwgYm94VG9wICsgMjgpXG5cbiAgICAvLyDms6joqJhcbiAgICBkb2MuZm9udFNpemUoOSkudGV4dChkYXRhLm5vdGUgfHwgJ+azqDog6Zu75a2Q5aWR57SE44Gr44Gk44GN5Y+O5YWl5Y2w57SZ44Gv5LiN6KaB44Gn44GZ44CCJywgbGVmdCwgYm94VG9wICsgODApXG5cbiAgICBkb2MuZW5kKClcbiAgfSlcbn1cblxuXG4iXSwibmFtZXMiOlsiZ2VuZXJhdGVQZGZQbGFjZWhvbGRlciIsInBheWxvYWQiLCJjb250ZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsIlBERkRvY3VtZW50IiwicmVuZGVyVGVtcGxhdGVQZGYiLCJraW5kIiwiZGF0YSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZG9jIiwic2l6ZSIsIm1hcmdpbiIsImJ1ZmZlcnMiLCJvbiIsImQiLCJwdXNoIiwiY29uY2F0IiwiZm9udFNpemUiLCJ0ZXh0IiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImFsaWduIiwibW92ZURvd24iLCJ0aXRsZSIsImxlZnQiLCJ0b3AiLCJ3aWR0aCIsInJvd0giLCJyZWN0IiwibGluZXMiLCJsZW5ndGgiLCJzdHJva2UiLCJmb3JFYWNoIiwibCIsImkiLCJtb3ZlVG8iLCJsaW5lVG8iLCJib3hUb3AiLCJhbW91bnQiLCJ0b0xvY2FsZVN0cmluZyIsIm5vdGUiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/pdf.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupabaseAdmin: () => (/* binding */ createSupabaseAdmin),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   resetPassword: () => (/* binding */ resetPassword),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signOut: () => (/* binding */ signOut),\n/* harmony export */   signUp: () => (/* binding */ signUp),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://rxnozwuamddqlcwysxag.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NjY4MDMsImV4cCI6MjA3MzM0MjgwM30.0sbl6zWJ1XalGTFbsgeMpth6yH-oQA_P1eTCc8lKoAU\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Admin client for server-side operations\nconst createSupabaseAdmin = ()=>{\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://rxnozwuamddqlcwysxag.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n};\n// Auth helpers\nconst getCurrentUser = async ()=>{\n    const { data: { user }, error } = await supabase.auth.getUser();\n    if (error) throw error;\n    return user;\n};\nconst signIn = async (email, password)=>{\n    const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password\n    });\n    if (error) throw error;\n    return data;\n};\nconst signUp = async (email, password, userData)=>{\n    const { data, error } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n            data: userData\n        }\n    });\n    if (error) throw error;\n    return data;\n};\nconst signOut = async ()=>{\n    const { error } = await supabase.auth.signOut();\n    if (error) throw error;\n};\nconst resetPassword = async (email)=>{\n    const { data, error } = await supabase.auth.resetPasswordForEmail(email, {\n        redirectTo: `${window.location.origin}/auth/reset-password`\n    });\n    if (error) throw error;\n    return data;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQW9EO0FBRXBELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxrQkFBa0JILGtOQUF5QztBQUUxRCxNQUFNSyxXQUFXUCxtRUFBWUEsQ0FBQ0MsYUFBYUksaUJBQWdCO0FBRWxFLDBDQUEwQztBQUNuQyxNQUFNRyxzQkFBc0I7SUFDakMsT0FBT1IsbUVBQVlBLENBQ2pCRSwwQ0FBb0MsRUFDcENBLFFBQVFDLEdBQUcsQ0FBQ00seUJBQXlCLEVBQ3JDO1FBQ0VDLE1BQU07WUFDSkMsa0JBQWtCO1lBQ2xCQyxnQkFBZ0I7UUFDbEI7SUFDRjtBQUVKLEVBQUM7QUE4Q0QsZUFBZTtBQUNSLE1BQU1DLGlCQUFpQjtJQUM1QixNQUFNLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1ULFNBQVNHLElBQUksQ0FBQ08sT0FBTztJQUM3RCxJQUFJRCxPQUFPLE1BQU1BO0lBQ2pCLE9BQU9EO0FBQ1QsRUFBQztBQUVNLE1BQU1HLFNBQVMsT0FBT0MsT0FBZUM7SUFDMUMsTUFBTSxFQUFFTixJQUFJLEVBQUVFLEtBQUssRUFBRSxHQUFHLE1BQU1ULFNBQVNHLElBQUksQ0FBQ1csa0JBQWtCLENBQUM7UUFDN0RGO1FBQ0FDO0lBQ0Y7SUFDQSxJQUFJSixPQUFPLE1BQU1BO0lBQ2pCLE9BQU9GO0FBQ1QsRUFBQztBQUVNLE1BQU1RLFNBQVMsT0FBT0gsT0FBZUMsVUFBa0JHO0lBQzVELE1BQU0sRUFBRVQsSUFBSSxFQUFFRSxLQUFLLEVBQUUsR0FBRyxNQUFNVCxTQUFTRyxJQUFJLENBQUNZLE1BQU0sQ0FBQztRQUNqREg7UUFDQUM7UUFDQUksU0FBUztZQUNQVixNQUFNUztRQUNSO0lBQ0Y7SUFDQSxJQUFJUCxPQUFPLE1BQU1BO0lBQ2pCLE9BQU9GO0FBQ1QsRUFBQztBQUVNLE1BQU1XLFVBQVU7SUFDckIsTUFBTSxFQUFFVCxLQUFLLEVBQUUsR0FBRyxNQUFNVCxTQUFTRyxJQUFJLENBQUNlLE9BQU87SUFDN0MsSUFBSVQsT0FBTyxNQUFNQTtBQUNuQixFQUFDO0FBRU0sTUFBTVUsZ0JBQWdCLE9BQU9QO0lBQ2xDLE1BQU0sRUFBRUwsSUFBSSxFQUFFRSxLQUFLLEVBQUUsR0FBRyxNQUFNVCxTQUFTRyxJQUFJLENBQUNpQixxQkFBcUIsQ0FBQ1IsT0FBTztRQUN2RVMsWUFBWSxDQUFDLEVBQUVDLE9BQU9DLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDLG9CQUFvQixDQUFDO0lBQzdEO0lBQ0EsSUFBSWYsT0FBTyxNQUFNQTtJQUNqQixPQUFPRjtBQUNULEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaXZpbC1lbmdpbmVlcmluZy1wbGF0Zm9ybS8uL3NyYy9saWIvc3VwYWJhc2UudHM/MDZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIVxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhXG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxuXG4vLyBBZG1pbiBjbGllbnQgZm9yIHNlcnZlci1zaWRlIG9wZXJhdGlvbnNcbmV4cG9ydCBjb25zdCBjcmVhdGVTdXBhYmFzZUFkbWluID0gKCkgPT4ge1xuICByZXR1cm4gY3JlYXRlQ2xpZW50KFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSEsXG4gICAge1xuICAgICAgYXV0aDoge1xuICAgICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXG4gICAgICB9XG4gICAgfVxuICApXG59XG5cbi8vIERhdGFiYXNlIHR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIFVzZXIge1xuICBpZDogc3RyaW5nXG4gIGF1dGhfdXNlcl9pZDogc3RyaW5nXG4gIGRpc3BsYXlfbmFtZTogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmdcbiAgc3BlY2lhbHRpZXM6IHN0cmluZ1tdXG4gIHF1YWxpZmljYXRpb25zOiBzdHJpbmdbXVxuICBleHBlcmllbmNlX3llYXJzPzogc3RyaW5nXG4gIG1lbWJlcl9sZXZlbD86ICdiZWdpbm5lcicgfCAnaW50ZXJtZWRpYXRlJyB8ICdhZHZhbmNlZCdcbiAgYXZhdGFyX3VybD86IHN0cmluZ1xuICByYXRpbmc/OiBudW1iZXJcbiAgZm9ybWFsX25hbWU/OiBzdHJpbmdcbiAgcG9zdGFsX2NvZGU/OiBzdHJpbmdcbiAgYWRkcmVzcz86IHN0cmluZ1xuICBhZGRyZXNzX2RldGFpbD86IHN0cmluZ1xuICBwaG9uZV9udW1iZXI/OiBzdHJpbmdcbiAgY29tcGFueV9udW1iZXI/OiBzdHJpbmdcbiAgcmVnaXN0cmF0aW9uX251bWJlcj86IHN0cmluZ1xuICBjcmVhdGVkX2F0OiBzdHJpbmdcbiAgdXBkYXRlZF9hdDogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3JnYW5pemF0aW9uIHtcbiAgaWQ6IHN0cmluZ1xuICBuYW1lOiBzdHJpbmdcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmdcbiAgYmlsbGluZ19lbWFpbD86IHN0cmluZ1xuICBzeXN0ZW1fZmVlOiBudW1iZXJcbiAgYWN0aXZlOiBib29sZWFuXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xuICB1cGRhdGVkX2F0OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZW1iZXJzaGlwIHtcbiAgaWQ6IHN0cmluZ1xuICBvcmdfaWQ6IHN0cmluZ1xuICB1c2VyX2lkOiBzdHJpbmdcbiAgcm9sZTogJ0FkbWluJyB8ICdPcmdBZG1pbicgfCAnU3RhZmYnIHwgJ0NvbnRyYWN0b3InIHwgJ1Jldmlld2VyJyB8ICdBdWRpdG9yJ1xuICBjcmVhdGVkX2F0OiBzdHJpbmdcbn1cblxuZXhwb3J0IHR5cGUgVXNlclJvbGUgPSAnQWRtaW4nIHwgJ09yZ0FkbWluJyB8ICdTdGFmZicgfCAnQ29udHJhY3RvcicgfCAnUmV2aWV3ZXInIHwgJ0F1ZGl0b3InXG5cbi8vIEF1dGggaGVscGVyc1xuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRVc2VyID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKClcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuICByZXR1cm4gdXNlclxufVxuXG5leHBvcnQgY29uc3Qgc2lnbkluID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQoe1xuICAgIGVtYWlsLFxuICAgIHBhc3N3b3JkLFxuICB9KVxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gIHJldHVybiBkYXRhXG59XG5cbmV4cG9ydCBjb25zdCBzaWduVXAgPSBhc3luYyAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgdXNlckRhdGE6IFBhcnRpYWw8VXNlcj4pID0+IHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduVXAoe1xuICAgIGVtYWlsLFxuICAgIHBhc3N3b3JkLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGRhdGE6IHVzZXJEYXRhXG4gICAgfVxuICB9KVxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gIHJldHVybiBkYXRhXG59XG5cbmV4cG9ydCBjb25zdCBzaWduT3V0ID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25PdXQoKVxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG59XG5cbmV4cG9ydCBjb25zdCByZXNldFBhc3N3b3JkID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5yZXNldFBhc3N3b3JkRm9yRW1haWwoZW1haWwsIHtcbiAgICByZWRpcmVjdFRvOiBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9hdXRoL3Jlc2V0LXBhc3N3b3JkYFxuICB9KVxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gIHJldHVybiBkYXRhXG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2UiLCJjcmVhdGVTdXBhYmFzZUFkbWluIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJnZXRDdXJyZW50VXNlciIsImRhdGEiLCJ1c2VyIiwiZXJyb3IiLCJnZXRVc2VyIiwic2lnbkluIiwiZW1haWwiLCJwYXNzd29yZCIsInNpZ25JbldpdGhQYXNzd29yZCIsInNpZ25VcCIsInVzZXJEYXRhIiwib3B0aW9ucyIsInNpZ25PdXQiLCJyZXNldFBhc3N3b3JkIiwicmVzZXRQYXNzd29yZEZvckVtYWlsIiwicmVkaXJlY3RUbyIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/crypto-js","vendor-chunks/restructure","vendor-chunks/brotli","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/call-bind-apply-helpers","vendor-chunks/regexp.prototype.flags","vendor-chunks/object.assign","vendor-chunks/object-is","vendor-chunks/object-keys","vendor-chunks/get-proto","vendor-chunks/fontkit","vendor-chunks/unicode-trie","vendor-chunks/object-inspect","vendor-chunks/linebreak","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/call-bind","vendor-chunks/unicode-properties","vendor-chunks/es-get-iterator","vendor-chunks/available-typed-arrays","vendor-chunks/which-typed-array","vendor-chunks/which-collection","vendor-chunks/which-boxed-primitive","vendor-chunks/tiny-inflate","vendor-chunks/side-channel","vendor-chunks/side-channel-weakmap","vendor-chunks/side-channel-map","vendor-chunks/side-channel-list","vendor-chunks/set-function-name","vendor-chunks/set-function-length","vendor-chunks/safe-regex-test","vendor-chunks/possible-typed-array-names","vendor-chunks/png-js","vendor-chunks/pdfkit","vendor-chunks/isarray","vendor-chunks/is-weakset","vendor-chunks/is-weakmap","vendor-chunks/is-symbol","vendor-chunks/is-string","vendor-chunks/is-shared-array-buffer","vendor-chunks/is-set","vendor-chunks/is-regex","vendor-chunks/is-number-object","vendor-chunks/is-map","vendor-chunks/is-date-object","vendor-chunks/is-callable","vendor-chunks/is-boolean-object","vendor-chunks/is-bigint","vendor-chunks/is-array-buffer","vendor-chunks/is-arguments","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/has-property-descriptors","vendor-chunks/has-bigints","vendor-chunks/get-intrinsic","vendor-chunks/functions-have-names","vendor-chunks/for-each","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/dfa","vendor-chunks/define-properties","vendor-chunks/define-data-property","vendor-chunks/deep-equal","vendor-chunks/clone","vendor-chunks/call-bound","vendor-chunks/base64-js","vendor-chunks/array-buffer-byte-length"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbilling%2Finvoice-orgs%2Froute&page=%2Fapi%2Fbilling%2Finvoice-orgs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbilling%2Finvoice-orgs%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();