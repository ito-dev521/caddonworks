"use strict";(()=>{var e={};e.id=3148,e.ids=[3148],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},85539:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>h,originalPathname:()=>x,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>I});var i={};a.r(i),a.d(i,{GET:()=>p,POST:()=>u});var s=a(95419),o=a(69108),r=a(99678),c=a(78070),n=a(6517);async function p(e){try{let e=(0,n.ST)(),{data:t,error:a}=await e.storage.listBuckets();if(a)return console.error("バケット一覧取得エラー:",a),c.Z.json({message:"バケット一覧の取得に失敗しました",error:a.message},{status:400});let i=t?.find(e=>"attachments"===e.id);return c.Z.json({buckets:t,attachmentsBucket:i},{status:200})}catch(e){return console.error("ストレージバケット確認エラー:",e),c.Z.json({message:"サーバーエラーが発生しました"},{status:500})}}async function u(e){try{let e=(0,n.ST)(),{data:t,error:a}=await e.storage.createBucket("attachments",{public:!1,fileSizeLimit:314572800,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/avi","video/mov","video/wmv","video/flv","video/webm","video/mkv","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain","application/zip","application/x-zip-compressed","application/dwg","application/x-dwg","application/acad","application/x-acad","application/step","application/x-step","application/iges","application/x-iges","application/octet-stream"]});if(a)return console.error("バケット作成エラー:",a),c.Z.json({message:"ストレージバケットの作成に失敗しました",error:a.message},{status:400});return c.Z.json({message:"ストレージバケットを作成しました",bucket:t},{status:200})}catch(e){return console.error("ストレージバケット作成エラー:",e),c.Z.json({message:"サーバーエラーが発生しました"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/storage/check-bucket/route",pathname:"/api/storage/check-bucket",filename:"route",bundlePath:"app/api/storage/check-bucket/route"},resolvedPagePath:"/Users/sayuri/caddonworks/src/app/api/storage/check-bucket/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:h,staticGenerationBailout:I}=l,x="/api/storage/check-bucket/route";function v(){return(0,r.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},6517:(e,t,a)=>{a.d(t,{OQ:()=>s,ST:()=>o});var i=a(32409);let s=(0,i.eI)("https://rxnozwuamddqlcwysxag.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NjY4MDMsImV4cCI6MjA3MzM0MjgwM30.0sbl6zWJ1XalGTFbsgeMpth6yH-oQA_P1eTCc8lKoAU"),o=()=>{let e=process.env.SUPABASE_SERVICE_ROLE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Nzc2NjgwMywiZXhwIjoyMDczMzQyODAzfQ.w7KcFrtcTRhqoHwTSlgTc6NDNHIJH985rAgT9bD0ipE";return(0,i.eI)("https://rxnozwuamddqlcwysxag.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[1638,6206,2409],()=>a(85539));module.exports=i})();