"use strict";(()=>{var e={};e.id=2484,e.ids=[2484],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},81380:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>I,originalPathname:()=>h,patchFetch:()=>b,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>g});var a={};r.r(a),r.d(a,{GET:()=>d});var s=r(95419),i=r(69108),o=r(99678),n=r(78070),c=r(6517);async function d(e){try{let t=(0,c.ST)(),{searchParams:r}=new URL(e.url),a=r.get("id");if(!a)return n.Z.json({message:"契約IDが指定されていません",error:"Missing contract ID"},{status:400});let{data:s,error:i}=await t.from("contracts").select("*").eq("id",a).single();if(i)return n.Z.json({message:"契約が見つかりません",contractId:a,error:i.message,details:i},{status:404});let[o,d,u]=await Promise.all([t.from("projects").select("id, title, status").eq("id",s.project_id).single(),t.from("organizations").select("id, name").eq("id",s.org_id).single(),t.from("users").select("id, display_name, email").eq("id",s.contractor_id).single()]),l={...s,project_title:o.data?.title||s.contract_title,project_status:o.data?.status,org_name:d.data?.name,contractor_name:u.data?.display_name,contractor_email:u.data?.email};return n.Z.json({message:"契約詳細取得成功",contract:l},{status:200})}catch(e){return console.error("契約詳細デバッグエラー:",e),n.Z.json({message:"サーバーエラーが発生しました",error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/debug/contract-detail/route",pathname:"/api/debug/contract-detail",filename:"route",bundlePath:"app/api/debug/contract-detail/route"},resolvedPagePath:"/Users/sayuri/caddonworks/src/app/api/debug/contract-detail/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:m,headerHooks:I,staticGenerationBailout:g}=u,h="/api/debug/contract-detail/route";function b(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}},6517:(e,t,r)=>{r.d(t,{OQ:()=>s,ST:()=>i});var a=r(32409);let s=(0,a.eI)("https://rxnozwuamddqlcwysxag.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NjY4MDMsImV4cCI6MjA3MzM0MjgwM30.0sbl6zWJ1XalGTFbsgeMpth6yH-oQA_P1eTCc8lKoAU"),i=()=>{let e=process.env.SUPABASE_SERVICE_ROLE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Nzc2NjgwMywiZXhwIjoyMDczMzQyODAzfQ.w7KcFrtcTRhqoHwTSlgTc6NDNHIJH985rAgT9bD0ipE";return(0,a.eI)("https://rxnozwuamddqlcwysxag.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1638,6206,2409],()=>r(81380));module.exports=a})();