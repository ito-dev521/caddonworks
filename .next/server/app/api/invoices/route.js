"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/invoices/route";
exports.ids = ["app/api/invoices/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finvoices%2Froute&page=%2Fapi%2Finvoices%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finvoices%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finvoices%2Froute&page=%2Fapi%2Finvoices%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finvoices%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_sayuri_caddonworks_src_app_api_invoices_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/invoices/route.ts */ \"(rsc)/./src/app/api/invoices/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/invoices/route\",\n        pathname: \"/api/invoices\",\n        filename: \"route\",\n        bundlePath: \"app/api/invoices/route\"\n    },\n    resolvedPagePath: \"/Users/sayuri/caddonworks/src/app/api/invoices/route.ts\",\n    nextConfigOutput,\n    userland: _Users_sayuri_caddonworks_src_app_api_invoices_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/invoices/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbnZvaWNlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGaW52b2ljZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZpbnZvaWNlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNheXVyaSUyRmNhZGRvbndvcmtzJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnNheXVyaSUyRmNhZGRvbndvcmtzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ087QUFDcEY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaXZpbC1lbmdpbmVlcmluZy1wbGF0Zm9ybS8/YzE1MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc2F5dXJpL2NhZGRvbndvcmtzL3NyYy9hcHAvYXBpL2ludm9pY2VzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9pbnZvaWNlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2ludm9pY2VzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9pbnZvaWNlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9zYXl1cmkvY2FkZG9ud29ya3Mvc3JjL2FwcC9hcGkvaW52b2ljZXMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvaW52b2ljZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finvoices%2Froute&page=%2Fapi%2Finvoices%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finvoices%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/invoices/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/invoices/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/* harmony import */ var _lib_pdf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/pdf */ \"(rsc)/./src/lib/pdf.ts\");\n\n\n\nasync function POST(request) {\n    try {\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"認証が必要です\"\n            }, {\n                status: 401\n            });\n        }\n        const token = authHeader.replace(\"Bearer \", \"\");\n        // Supabaseクライアントを作成\n        const supabaseAdmin = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.createSupabaseAdmin)();\n        const { data: { user }, error: authError } = await supabaseAdmin.auth.getUser(token);\n        if (authError || !user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"認証に失敗しました\"\n            }, {\n                status: 401\n            });\n        }\n        // ユーザープロフィールを取得\n        const { data: userProfile, error: userProfileError } = await supabaseAdmin.from(\"users\").select(\"id\").eq(\"auth_user_id\", user.id).single();\n        if (userProfileError || !userProfile) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"ユーザープロフィールが見つかりません\"\n            }, {\n                status: 403\n            });\n        }\n        // リクエストボディを取得\n        const body = await request.json();\n        const { project_id, type, contract_id } = body;\n        if (!project_id && !contract_id || !type) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"プロジェクトIDまたは契約ID、タイプが必要です\"\n            }, {\n                status: 400\n            });\n        }\n        // プロジェクトを取得（contract_id 指定時はそこから解決）\n        let effectiveProjectId = project_id;\n        let contractFromParam = null;\n        if (!effectiveProjectId && contract_id) {\n            const { data: c, error: cErr } = await supabaseAdmin.from(\"contracts\").select(\"id, project_id, status, bid_amount, contractor_id\").eq(\"id\", contract_id).single();\n            if (cErr || !c) {\n                // 短縮表示の契約ID（先頭8桁など）が渡された可能性に対応\n                if (contract_id && contract_id.length < 36) {\n                    const { data: candidates, error: likeErr } = await supabaseAdmin.from(\"contracts\").select(\"id, project_id, status, bid_amount, contractor_id\").filter(\"id\", \"ilike\", `${contract_id}%`).limit(1);\n                    if (!likeErr && candidates && candidates.length > 0) {\n                        contractFromParam = candidates[0];\n                        effectiveProjectId = candidates[0].project_id;\n                    } else {\n                        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                            message: \"契約が見つかりません（表示用短縮IDの可能性）\"\n                        }, {\n                            status: 404\n                        });\n                    }\n                } else {\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        message: \"契約が見つかりません\"\n                    }, {\n                        status: 404\n                    });\n                }\n            } else {\n                contractFromParam = c;\n                effectiveProjectId = c.project_id;\n            }\n        }\n        const { data: project, error: projectError } = await supabaseAdmin.from(\"projects\").select(\"*\").eq(\"id\", effectiveProjectId).single();\n        if (projectError || !project) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"プロジェクトが見つかりません\"\n            }, {\n                status: 404\n            });\n        }\n        // ユーザーのロール（見つからない場合は受注者として扱う）\n        const { data: membership } = await supabaseAdmin.from(\"memberships\").select(\"role, org_id\").eq(\"user_id\", userProfile.id).maybeSingle();\n        // 権限チェック（OrgAdminのみ請求書作成可能）\n        if (membership.role !== \"OrgAdmin\" || project.org_id !== membership.org_id) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"請求書を作成する権限がありません\"\n            }, {\n                status: 403\n            });\n        }\n        // 受注者情報は後で契約から判定（project.contractor_id が null の場合があるため）\n        // 組織情報を取得\n        const { data: organization, error: orgError } = await supabaseAdmin.from(\"organizations\").select(\"name, contact_person, address, phone, email\").eq(\"id\", membership.org_id).single();\n        if (orgError || !organization) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"組織情報が見つかりません\"\n            }, {\n                status: 404\n            });\n        }\n        // 契約データの存在確認\n        let contract = null;\n        if (contractFromParam) {\n            contract = contractFromParam;\n        } else {\n            const { data: contracts, error: contractError } = await supabaseAdmin.from(\"contracts\").select(\"id, status, bid_amount, contractor_id, updated_at, created_at\").eq(\"project_id\", effectiveProjectId).in(\"status\", [\n                \"signed\",\n                \"completed\"\n            ]).order(\"updated_at\", {\n                ascending: false\n            }).order(\"created_at\", {\n                ascending: false\n            }).limit(1);\n            if (contractError) {\n                console.error(\"契約検索エラー:\", contractError);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    message: \"契約の検索に失敗しました\",\n                    error: contractError.message\n                }, {\n                    status: 500\n                });\n            }\n            if (!contracts || contracts.length === 0) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    message: \"署名済みの契約が見つかりません\"\n                }, {\n                    status: 404\n                });\n            }\n            contract = contracts[0];\n        }\n        // 契約の受注者を取得\n        const { data: contractor, error: contractorError } = await supabaseAdmin.from(\"users\").select(\"id, display_name, email\").eq(\"id\", contract.contractor_id).single();\n        if (contractorError || !contractor) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"受注者情報が見つかりません\"\n            }, {\n                status: 404\n            });\n        }\n        // 既存の請求書の存在確認\n        const { data: existingInvoices, error: existingError } = await supabaseAdmin.from(\"invoices\").select(\"id, status\").eq(\"contract_id\", contract.id);\n        if (existingError) {\n            console.error(\"既存請求書確認エラー:\", existingError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"既存請求書の確認に失敗しました\"\n            }, {\n                status: 500\n            });\n        }\n        if (existingInvoices && existingInvoices.length > 0) {\n            // 既存の請求書がある場合は、最新のものを返す\n            const latestInvoice = existingInvoices[0];\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"業務完了届は既に作成済みです\",\n                invoice: latestInvoice,\n                pdf_url: `/api/invoices?id=${latestInvoice.id}`,\n                alreadyExists: true\n            }, {\n                status: 200\n            });\n        }\n        // 表示用の請求書番号（列が存在しない環境もあるため保存は必須としない）\n        const invoiceNumber = `INV-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;\n        // 請求書データを作成（実際のテーブル構造に合わせて）\n        const contractAmount = contract.bid_amount || project.budget || 0;\n        const systemFee = 50000 // システム手数料（発注者側の手数料）\n        ;\n        // 業務完了届（受注者向け）の場合は契約金額のみ、その他はシステム手数料込み\n        const totalAmount = type === \"completion\" ? contractAmount : contractAmount + systemFee;\n        const invoiceData = {\n            project_id: effectiveProjectId,\n            client_org_id: project.org_id,\n            base_amount: contractAmount,\n            fee_amount: 0,\n            system_fee: type === \"completion\" ? 0 : systemFee,\n            total_amount: totalAmount,\n            status: type === \"completion\" ? \"issued\" : \"draft\",\n            issue_date: type === \"completion\" ? new Date().toISOString().split(\"T\")[0] : null,\n            due_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0],\n            org_id: project.org_id,\n            contractor_id: contract.contractor_id,\n            contract_id: contract.id\n        };\n        // 一部環境で存在しない列のため、存在する場合のみ付与（冪等）\n        try {\n            const { error: probeError } = await supabaseAdmin.from(\"invoices\").select(\"invoice_number\").limit(1);\n            if (!probeError) {\n                invoiceData.invoice_number = invoiceNumber;\n            }\n        } catch (_) {\n        // 列が無い環境。保存はスキップ\n        }\n        // 旧スキーマ（subtotal）互換\n        try {\n            const { error: subProbe } = await supabaseAdmin.from(\"invoices\").select(\"subtotal\").limit(1);\n            if (!subProbe) {\n                invoiceData.subtotal = invoiceData.base_amount ?? contractAmount;\n            }\n        } catch (_) {\n        // 無視\n        }\n        // 方向（運営者宛）に対応する列がある場合は設定\n        try {\n            const { error: dirProbe } = await supabaseAdmin.from(\"invoices\").select(\"direction\").limit(1);\n            if (!dirProbe) {\n                invoiceData.direction = \"to_operator\";\n            }\n        } catch (_) {\n        // 列が無い環境\n        }\n        // 請求書をデータベースに保存\n        const { data: insertedInvoice, error: invoiceError } = await supabaseAdmin.from(\"invoices\").insert(invoiceData).select().single();\n        if (invoiceError) {\n            console.error(\"請求書作成エラー:\", invoiceError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"請求書の作成に失敗しました\",\n                error: invoiceError.message,\n                details: invoiceError\n            }, {\n                status: 500\n            });\n        }\n        // 通知を作成（受注者向け）\n        const { error: notificationError } = await supabaseAdmin.from(\"notifications\").insert({\n            user_id: contract.contractor_id,\n            title: \"業務完了届が作成されました（運営宛）\",\n            message: `案件「${project.title}」の業務完了届が作成され、運営へ送信されました。請求書ページで確認できます。`,\n            type: \"completion_report_created\",\n            data: {\n                project_id: effectiveProjectId,\n                invoice_id: insertedInvoice.id\n            }\n        });\n        if (notificationError) {\n            console.error(\"通知作成エラー(受注者):\", notificationError);\n        }\n        // 発注者への完了届作成通知は送らない（業務完了の準備通知は別途 completed 遷移時に送信）\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"請求書が正常に作成されました。受注者に通知が送信されます。\",\n            invoice: {\n                ...insertedInvoice,\n                invoice_number: insertedInvoice.invoice_number || invoiceNumber\n            },\n            pdf_url: `/api/invoices?id=${insertedInvoice.id}`\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"請求書作成エラー:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"サーバーエラーが発生しました\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"認証が必要です\"\n            }, {\n                status: 401\n            });\n        }\n        const token = authHeader.replace(\"Bearer \", \"\");\n        // Supabaseクライアントを作成\n        const supabaseAdmin = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.createSupabaseAdmin)();\n        const { data: { user }, error: authError } = await supabaseAdmin.auth.getUser(token);\n        if (authError || !user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"認証に失敗しました\"\n            }, {\n                status: 401\n            });\n        }\n        // ユーザープロフィールを取得\n        const { data: userProfile, error: userProfileError } = await supabaseAdmin.from(\"users\").select(\"id\").eq(\"auth_user_id\", user.id).single();\n        if (userProfileError || !userProfile) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"ユーザープロフィールが見つかりません\"\n            }, {\n                status: 403\n            });\n        }\n        // ユーザーのロールを確認\n        const { data: membership } = await supabaseAdmin.from(\"memberships\").select(\"role, org_id\").eq(\"user_id\", userProfile.id).maybeSingle();\n        // PDF単体取得か判定\n        const { searchParams } = new URL(request.url);\n        const invoiceId = searchParams.get(\"id\");\n        if (invoiceId) {\n            const { data: invoice, error } = await supabaseAdmin.from(\"invoices\").select(\"*\").eq(\"id\", invoiceId).single();\n            if (error || !invoice) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    message: \"請求書が見つかりません\"\n                }, {\n                    status: 404\n                });\n            }\n            // 付随情報の取得（発注者/受注者、プロジェクト）\n            const { data: project } = await supabaseAdmin.from(\"projects\").select(\"id, title, start_date, end_date, assignee_name, org_id, contractor_id\").eq(\"id\", invoice.project_id).single();\n            const { data: org } = await supabaseAdmin.from(\"organizations\").select(\"name, address, invoice_registration_number\").eq(\"id\", project?.org_id).single();\n            const { data: contractor } = await supabaseAdmin.from(\"users\").select(\"display_name, address\").eq(\"id\", project?.contractor_id).single();\n            const taxRate = 0.1;\n            const amountExcl = invoice.base_amount ?? invoice.subtotal ?? 0;\n            const tax = Math.round(amountExcl * taxRate);\n            const total = amountExcl + tax;\n            // 源泉: 100万未満 → 総額*0.1021, 100万以上 → (総額-1000000)*0.2042 + 102100\n            const withholding = total < 1000000 ? Math.floor(total * 0.1021) : Math.floor((total - 1000000) * 0.2042 + 102100);\n            const pdfBuf = await (0,_lib_pdf__WEBPACK_IMPORTED_MODULE_2__.renderJapaneseInvoicePdf)({\n                issuer: {\n                    name: org?.name || \"\",\n                    address: org?.address || \"\",\n                    invoiceRegNo: org?.invoice_registration_number || null\n                },\n                contractor: {\n                    name: contractor?.display_name || \"\",\n                    address: contractor?.address || \"\"\n                },\n                orderNo: invoice.contract_id ?? \"—\",\n                assignee: project?.assignee_name ?? null,\n                title: project?.title || \"\",\n                period: {\n                    from: project?.start_date,\n                    to: project?.end_date\n                },\n                amountExcl,\n                taxRate,\n                dueDate: invoice.due_date,\n                payMethod: \"口座振込\",\n                note: \"※支払金額は振込手数料等、源泉徴収を控除した金額とする\",\n                withHolding: withholding\n            });\n            return new next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"](pdfBuf, {\n                status: 200,\n                headers: {\n                    \"Content-Type\": \"application/pdf\",\n                    \"Content-Disposition\": `inline; filename=\"invoice_${invoice.id}.pdf\"`\n                }\n            });\n        }\n        // 請求書一覧を取得（フロントの期待形に整形）\n        let baseQuery = supabaseAdmin.from(\"invoices\").select(`\n        id,\n        invoice_number,\n        status,\n        issue_date,\n        due_date,\n        base_amount,\n        system_fee,\n        total_amount,\n        created_at,\n        project_id,\n        contract_id,\n        org_id,\n        projects:project_id ( id, title, contractor_id ),\n        contracts:contract_id ( id, bid_amount ),\n        organizations:org_id ( id, name )\n      `);\n        if (membership?.role === \"OrgAdmin\") {\n            baseQuery = baseQuery.eq(\"org_id\", membership.org_id);\n        } else {\n            // 受注者: contractor_id=自分 もしくは contract_id が自分の契約\n            const { data: myContracts } = await supabaseAdmin.from(\"contracts\").select(\"id\").eq(\"contractor_id\", userProfile.id);\n            const myContractIds = (myContracts || []).map((c)=>c.id);\n            if (myContractIds.length > 0) {\n                const inList = myContractIds.map((id)=>`${id}`).join(\",\");\n                // or() に in 条件を含める（ANDにならないよう一括で指定）\n                baseQuery = baseQuery.or(`contractor_id.eq.${userProfile.id},contractor_id.eq.${user.id},contract_id.in.(${inList})`);\n                // 追加でプロジェクトIDでも拾う\n                const { data: myProjects } = await supabaseAdmin.from(\"contracts\").select(\"project_id\").in(\"id\", myContractIds);\n                const myProjectIds = Array.from(new Set((myProjects || []).map((p)=>p.project_id)));\n                if (myProjectIds.length > 0) {\n                    baseQuery = baseQuery.or(`project_id.in.(${myProjectIds.join(\",\")})`);\n                }\n            } else {\n                baseQuery = baseQuery.or(`contractor_id.eq.${userProfile.id},contractor_id.eq.${user.id}`);\n            }\n        }\n        const { data: rawInvoices, error: invoicesError } = await baseQuery.order(\"created_at\", {\n            ascending: false\n        });\n        if (invoicesError) {\n            console.error(\"請求書取得エラー:\", invoicesError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"請求書の取得に失敗しました\"\n            }, {\n                status: 500\n            });\n        }\n        const formatted = (rawInvoices || []).map((inv)=>({\n                id: inv.id,\n                invoice_number: inv.invoice_number || `INV-${String(inv.id).slice(0, 8).toUpperCase()}`,\n                status: inv.status,\n                issue_date: inv.issue_date,\n                due_date: inv.due_date,\n                base_amount: inv.base_amount ?? inv.subtotal ?? 0,\n                system_fee: inv.system_fee ?? inv.fee_amount ?? 0,\n                total_amount: inv.total_amount ?? 0,\n                project: {\n                    id: inv.projects?.id,\n                    title: inv.projects?.title,\n                    contractor_id: inv.projects?.contractor_id\n                },\n                contract: {\n                    id: inv.contracts?.id,\n                    bid_amount: inv.contracts?.bid_amount\n                },\n                client_org: {\n                    id: inv.organizations?.id,\n                    name: inv.organizations?.name\n                }\n            }));\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            invoices: formatted\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"請求書取得APIエラー:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"サーバーエラーが発生しました\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVuRDtvQkFDckJ6QyxlQUFlMEYsSUFBSUUsUUFBUSxFQUFFNUY7Z0JBQy9CO2dCQUNBVCxVQUFVO29CQUNSdkIsSUFBSTBILElBQUlsRyxTQUFTLEVBQUV4QjtvQkFDbkI4QyxZQUFZNEUsSUFBSWxHLFNBQVMsRUFBRXNCO2dCQUM3QjtnQkFDQStFLFlBQVk7b0JBQ1Y3SCxJQUFJMEgsSUFBSUksYUFBYSxFQUFFOUg7b0JBQ3ZCMkYsTUFBTStCLElBQUlJLGFBQWEsRUFBRW5DO2dCQUMzQjtZQUNGO1FBRUEsT0FBT3BILGtGQUFZQSxDQUFDUSxJQUFJLENBQUM7WUFBRWdKLFVBQVVOO1FBQVUsR0FBRztZQUFFeEksUUFBUTtRQUFJO0lBRWxFLEVBQUUsT0FBT00sT0FBTztRQUNkc0MsUUFBUXRDLEtBQUssQ0FBQyxnQkFBZ0JBO1FBQzlCLE9BQU9oQixrRkFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1FBQWlCLEdBQzVCO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2l2aWwtZW5naW5lZXJpbmctcGxhdGZvcm0vLi9zcmMvYXBwL2FwaS9pbnZvaWNlcy9yb3V0ZS50cz9kYzczIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGNyZWF0ZVN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2xpYi9zdXBhYmFzZSdcbmltcG9ydCB7IHJlbmRlckphcGFuZXNlSW52b2ljZVBkZiB9IGZyb20gJ0AvbGliL3BkZidcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpXG4gICAgaWYgKCFhdXRoSGVhZGVyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAn6KqN6Ki844GM5b+F6KaB44Gn44GZJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnJlcGxhY2UoJ0JlYXJlciAnLCAnJylcblxuICAgIC8vIFN1cGFiYXNl44Kv44Op44Kk44Ki44Oz44OI44KS5L2c5oiQXG4gICAgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZVN1cGFiYXNlQWRtaW4oKVxuXG4gICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5hdXRoLmdldFVzZXIodG9rZW4pXG5cbiAgICBpZiAoYXV0aEVycm9yIHx8ICF1c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAn6KqN6Ki844Gr5aSx5pWX44GX44G+44GX44GfJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuXG4gICAgLy8g44Om44O844K244O844OX44Ot44OV44Kj44O844Or44KS5Y+W5b6XXG4gICAgY29uc3QgeyBkYXRhOiB1c2VyUHJvZmlsZSwgZXJyb3I6IHVzZXJQcm9maWxlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAuZXEoJ2F1dGhfdXNlcl9pZCcsIHVzZXIuaWQpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmICh1c2VyUHJvZmlsZUVycm9yIHx8ICF1c2VyUHJvZmlsZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ+ODpuODvOOCtuODvOODl+ODreODleOCo+ODvOODq+OBjOimi+OBpOOBi+OCiuOBvuOBm+OCkycgfSwgeyBzdGF0dXM6IDQwMyB9KVxuICAgIH1cblxuICAgIC8vIOODquOCr+OCqOOCueODiOODnOODh+OCo+OCkuWPluW+l1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgcHJvamVjdF9pZCwgdHlwZSwgY29udHJhY3RfaWQgfSA9IGJvZHlcblxuICAgIGlmICgoIXByb2plY3RfaWQgJiYgIWNvbnRyYWN0X2lkKSB8fCAhdHlwZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ+ODl+ODreOCuOOCp+OCr+ODiElE44G+44Gf44Gv5aWR57SESUTjgIHjgr/jgqTjg5fjgYzlv4XopoHjgafjgZknIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICAvLyDjg5fjg63jgrjjgqfjgq/jg4jjgpLlj5blvpfvvIhjb250cmFjdF9pZCDmjIflrprmmYLjga/jgZ3jgZPjgYvjgonop6PmsbrvvIlcbiAgICBsZXQgZWZmZWN0aXZlUHJvamVjdElkOiBzdHJpbmcgPSBwcm9qZWN0X2lkXG4gICAgbGV0IGNvbnRyYWN0RnJvbVBhcmFtOiBhbnkgPSBudWxsXG4gICAgaWYgKCFlZmZlY3RpdmVQcm9qZWN0SWQgJiYgY29udHJhY3RfaWQpIHtcbiAgICAgIGNvbnN0IHsgZGF0YTogYywgZXJyb3I6IGNFcnIgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ2NvbnRyYWN0cycpXG4gICAgICAgIC5zZWxlY3QoJ2lkLCBwcm9qZWN0X2lkLCBzdGF0dXMsIGJpZF9hbW91bnQsIGNvbnRyYWN0b3JfaWQnKVxuICAgICAgICAuZXEoJ2lkJywgY29udHJhY3RfaWQpXG4gICAgICAgIC5zaW5nbGUoKVxuICAgICAgaWYgKGNFcnIgfHwgIWMpIHtcbiAgICAgICAgLy8g55+t57iu6KGo56S644Gu5aWR57SESUTvvIjlhYjpoK045qGB44Gq44Gp77yJ44GM5rih44GV44KM44Gf5Y+v6IO95oCn44Gr5a++5b+cXG4gICAgICAgIGlmIChjb250cmFjdF9pZCAmJiBjb250cmFjdF9pZC5sZW5ndGggPCAzNikge1xuICAgICAgICAgIGNvbnN0IHsgZGF0YTogY2FuZGlkYXRlcywgZXJyb3I6IGxpa2VFcnIgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAgIC5mcm9tKCdjb250cmFjdHMnKVxuICAgICAgICAgICAgLnNlbGVjdCgnaWQsIHByb2plY3RfaWQsIHN0YXR1cywgYmlkX2Ftb3VudCwgY29udHJhY3Rvcl9pZCcpXG4gICAgICAgICAgICAuZmlsdGVyKCdpZCcsICdpbGlrZScsIGAke2NvbnRyYWN0X2lkfSVgKVxuICAgICAgICAgICAgLmxpbWl0KDEpXG4gICAgICAgICAgaWYgKCFsaWtlRXJyICYmIGNhbmRpZGF0ZXMgJiYgY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250cmFjdEZyb21QYXJhbSA9IGNhbmRpZGF0ZXNbMF1cbiAgICAgICAgICAgIGVmZmVjdGl2ZVByb2plY3RJZCA9IGNhbmRpZGF0ZXNbMF0ucHJvamVjdF9pZFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAn5aWR57SE44GM6KaL44Gk44GL44KK44G+44Gb44KT77yI6KGo56S655So55+t57iuSUTjga7lj6/og73mgKfvvIknIH0sIHsgc3RhdHVzOiA0MDQgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ+Wlkee0hOOBjOimi+OBpOOBi+OCiuOBvuOBm+OCkycgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250cmFjdEZyb21QYXJhbSA9IGNcbiAgICAgICAgZWZmZWN0aXZlUHJvamVjdElkID0gYy5wcm9qZWN0X2lkXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgeyBkYXRhOiBwcm9qZWN0LCBlcnJvcjogcHJvamVjdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgncHJvamVjdHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgZWZmZWN0aXZlUHJvamVjdElkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAocHJvamVjdEVycm9yIHx8ICFwcm9qZWN0KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAn44OX44Ot44K444Kn44Kv44OI44GM6KaL44Gk44GL44KK44G+44Gb44KTJyB9LCB7IHN0YXR1czogNDA0IH0pXG4gICAgfVxuXG4gICAgLy8g44Om44O844K244O844Gu44Ot44O844Or77yI6KaL44Gk44GL44KJ44Gq44GE5aC05ZCI44Gv5Y+X5rOo6ICF44Go44GX44Gm5omx44GG77yJXG4gICAgY29uc3QgeyBkYXRhOiBtZW1iZXJzaGlwIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnbWVtYmVyc2hpcHMnKVxuICAgICAgLnNlbGVjdCgncm9sZSwgb3JnX2lkJylcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJQcm9maWxlLmlkKVxuICAgICAgLm1heWJlU2luZ2xlKClcblxuICAgIC8vIOaoqemZkOODgeOCp+ODg+OCr++8iE9yZ0FkbWlu44Gu44G/6KuL5rGC5pu45L2c5oiQ5Y+v6IO977yJXG4gICAgaWYgKG1lbWJlcnNoaXAucm9sZSAhPT0gJ09yZ0FkbWluJyB8fCBwcm9qZWN0Lm9yZ19pZCAhPT0gbWVtYmVyc2hpcC5vcmdfaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICfoq4vmsYLmm7jjgpLkvZzmiJDjgZnjgovmqKnpmZDjgYzjgYLjgorjgb7jgZvjgpMnIH0sIHsgc3RhdHVzOiA0MDMgfSlcbiAgICB9XG5cbiAgICAvLyDlj5fms6jogIXmg4XloLHjga/lvozjgaflpZHntITjgYvjgonliKTlrprvvIhwcm9qZWN0LmNvbnRyYWN0b3JfaWQg44GMIG51bGwg44Gu5aC05ZCI44GM44GC44KL44Gf44KB77yJXG5cbiAgICAvLyDntYTnuZTmg4XloLHjgpLlj5blvpdcbiAgICBjb25zdCB7IGRhdGE6IG9yZ2FuaXphdGlvbiwgZXJyb3I6IG9yZ0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnb3JnYW5pemF0aW9ucycpXG4gICAgICAuc2VsZWN0KCduYW1lLCBjb250YWN0X3BlcnNvbiwgYWRkcmVzcywgcGhvbmUsIGVtYWlsJylcbiAgICAgIC5lcSgnaWQnLCBtZW1iZXJzaGlwLm9yZ19pZClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgaWYgKG9yZ0Vycm9yIHx8ICFvcmdhbml6YXRpb24pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICfntYTnuZTmg4XloLHjgYzopovjgaTjgYvjgorjgb7jgZvjgpMnIH0sIHsgc3RhdHVzOiA0MDQgfSlcbiAgICB9XG5cbiAgICAvLyDlpZHntITjg4fjg7zjgr/jga7lrZjlnKjnorroqo1cbiAgICBsZXQgY29udHJhY3Q6IGFueSA9IG51bGxcbiAgICBpZiAoY29udHJhY3RGcm9tUGFyYW0pIHtcbiAgICAgIGNvbnRyYWN0ID0gY29udHJhY3RGcm9tUGFyYW1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgeyBkYXRhOiBjb250cmFjdHMsIGVycm9yOiBjb250cmFjdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCdjb250cmFjdHMnKVxuICAgICAgICAuc2VsZWN0KCdpZCwgc3RhdHVzLCBiaWRfYW1vdW50LCBjb250cmFjdG9yX2lkLCB1cGRhdGVkX2F0LCBjcmVhdGVkX2F0JylcbiAgICAgICAgLmVxKCdwcm9qZWN0X2lkJywgZWZmZWN0aXZlUHJvamVjdElkKVxuICAgICAgICAuaW4oJ3N0YXR1cycsIFsnc2lnbmVkJywgJ2NvbXBsZXRlZCddKVxuICAgICAgICAub3JkZXIoJ3VwZGF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAgIC5saW1pdCgxKVxuXG4gICAgICBpZiAoY29udHJhY3RFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCflpZHntITmpJzntKLjgqjjg6njg7w6JywgY29udHJhY3RFcnJvcilcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgbWVzc2FnZTogJ+Wlkee0hOOBruaknOe0ouOBq+WkseaVl+OBl+OBvuOBl+OBnycsXG4gICAgICAgICAgZXJyb3I6IGNvbnRyYWN0RXJyb3IubWVzc2FnZVxuICAgICAgICB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgICB9XG5cbiAgICAgIGlmICghY29udHJhY3RzIHx8IGNvbnRyYWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ+e9suWQjea4iOOBv+OBruWlkee0hOOBjOimi+OBpOOBi+OCiuOBvuOBm+OCkycgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgICAgfVxuICAgICAgY29udHJhY3QgPSBjb250cmFjdHNbMF1cbiAgICB9XG5cbiAgICAvLyDlpZHntITjga7lj5fms6jogIXjgpLlj5blvpdcbiAgICBjb25zdCB7IGRhdGE6IGNvbnRyYWN0b3IsIGVycm9yOiBjb250cmFjdG9yRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuc2VsZWN0KCdpZCwgZGlzcGxheV9uYW1lLCBlbWFpbCcpXG4gICAgICAuZXEoJ2lkJywgY29udHJhY3QuY29udHJhY3Rvcl9pZClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgaWYgKGNvbnRyYWN0b3JFcnJvciB8fCAhY29udHJhY3Rvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ+WPl+azqOiAheaDheWgseOBjOimi+OBpOOBi+OCiuOBvuOBm+OCkycgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIH1cblxuICAgIC8vIOaXouWtmOOBruiri+axguabuOOBruWtmOWcqOeiuuiqjVxuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdJbnZvaWNlcywgZXJyb3I6IGV4aXN0aW5nRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdpbnZvaWNlcycpXG4gICAgICAuc2VsZWN0KCdpZCwgc3RhdHVzJylcbiAgICAgIC5lcSgnY29udHJhY3RfaWQnLCBjb250cmFjdC5pZClcblxuICAgIGlmIChleGlzdGluZ0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfml6LlrZjoq4vmsYLmm7jnorroqo3jgqjjg6njg7w6JywgZXhpc3RpbmdFcnJvcilcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICfml6LlrZjoq4vmsYLmm7jjga7norroqo3jgavlpLHmlZfjgZfjgb7jgZfjgZ8nIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgICB9XG5cbiAgICBpZiAoZXhpc3RpbmdJbnZvaWNlcyAmJiBleGlzdGluZ0ludm9pY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIOaXouWtmOOBruiri+axguabuOOBjOOBguOCi+WgtOWQiOOBr+OAgeacgOaWsOOBruOCguOBruOCkui/lOOBmVxuICAgICAgY29uc3QgbGF0ZXN0SW52b2ljZSA9IGV4aXN0aW5nSW52b2ljZXNbMF1cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6ICfmpa3li5nlrozkuoblsYrjga/ml6LjgavkvZzmiJDmuIjjgb/jgafjgZknLFxuICAgICAgICBpbnZvaWNlOiBsYXRlc3RJbnZvaWNlLFxuICAgICAgICBwZGZfdXJsOiBgL2FwaS9pbnZvaWNlcz9pZD0ke2xhdGVzdEludm9pY2UuaWR9YCxcbiAgICAgICAgYWxyZWFkeUV4aXN0czogdHJ1ZVxuICAgICAgfSwgeyBzdGF0dXM6IDIwMCB9KVxuICAgIH1cblxuICAgIC8vIOihqOekuueUqOOBruiri+axguabuOeVquWPt++8iOWIl+OBjOWtmOWcqOOBl+OBquOBhOeSsOWig+OCguOBguOCi+OBn+OCgeS/neWtmOOBr+W/hemgiOOBqOOBl+OBquOBhO+8iVxuICAgIGNvbnN0IGludm9pY2VOdW1iZXIgPSBgSU5WLSR7bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpfS0ke1N0cmluZyhEYXRlLm5vdygpKS5zbGljZSgtNil9YFxuXG4gICAgLy8g6KuL5rGC5pu444OH44O844K/44KS5L2c5oiQ77yI5a6f6Zqb44Gu44OG44O844OW44Or5qeL6YCg44Gr5ZCI44KP44Gb44Gm77yJXG4gICAgY29uc3QgY29udHJhY3RBbW91bnQgPSBjb250cmFjdC5iaWRfYW1vdW50IHx8IHByb2plY3QuYnVkZ2V0IHx8IDBcbiAgICBjb25zdCBzeXN0ZW1GZWUgPSA1MDAwMCAvLyDjgrfjgrnjg4bjg6DmiYvmlbDmlpnvvIjnmbrms6jogIXlgbTjga7miYvmlbDmlpnvvIlcbiAgICBcbiAgICAvLyDmpa3li5nlrozkuoblsYrvvIjlj5fms6jogIXlkJHjgZHvvInjga7loLTlkIjjga/lpZHntITph5HpoY3jga7jgb/jgIHjgZ3jga7ku5bjga/jgrfjgrnjg4bjg6DmiYvmlbDmlpnovrzjgb9cbiAgICBjb25zdCB0b3RhbEFtb3VudCA9IHR5cGUgPT09ICdjb21wbGV0aW9uJyA/IGNvbnRyYWN0QW1vdW50IDogY29udHJhY3RBbW91bnQgKyBzeXN0ZW1GZWVcbiAgICBcbiAgICBjb25zdCBpbnZvaWNlRGF0YTogYW55ID0ge1xuICAgICAgcHJvamVjdF9pZDogZWZmZWN0aXZlUHJvamVjdElkLFxuICAgICAgY2xpZW50X29yZ19pZDogcHJvamVjdC5vcmdfaWQsXG4gICAgICBiYXNlX2Ftb3VudDogY29udHJhY3RBbW91bnQsXG4gICAgICBmZWVfYW1vdW50OiAwLCAvLyDov73liqDmiYvmlbDmlpnvvIjku4rlm57jga8w77yJXG4gICAgICBzeXN0ZW1fZmVlOiB0eXBlID09PSAnY29tcGxldGlvbicgPyAwIDogc3lzdGVtRmVlLCAvLyDmpa3li5nlrozkuoblsYrjga7loLTlkIjjga/jgrfjgrnjg4bjg6DmiYvmlbDmlpnjgpIw44GrXG4gICAgICB0b3RhbF9hbW91bnQ6IHRvdGFsQW1vdW50LFxuICAgICAgc3RhdHVzOiB0eXBlID09PSAnY29tcGxldGlvbicgPyAnaXNzdWVkJyA6ICdkcmFmdCcsIC8vIOalreWLmeWujOS6huWxiuOBruWgtOWQiOOBr+eZuuihjOa4iOOBv+OAgeOBneOBruS7luOBr+S4i+abuOOBjVxuICAgICAgaXNzdWVfZGF0ZTogdHlwZSA9PT0gJ2NvbXBsZXRpb24nID8gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0gOiBudWxsLCAvLyDmpa3li5nlrozkuoblsYrjga7loLTlkIjjga/nmbrooYzml6XjgpLoqK3lrppcbiAgICAgIGR1ZV9kYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sIC8vIDMw5pel5b6MXG4gICAgICBvcmdfaWQ6IHByb2plY3Qub3JnX2lkLFxuICAgICAgY29udHJhY3Rvcl9pZDogY29udHJhY3QuY29udHJhY3Rvcl9pZCxcbiAgICAgIGNvbnRyYWN0X2lkOiBjb250cmFjdC5pZFxuICAgIH1cblxuICAgIC8vIOS4gOmDqOeSsOWig+OBp+WtmOWcqOOBl+OBquOBhOWIl+OBruOBn+OCgeOAgeWtmOWcqOOBmeOCi+WgtOWQiOOBruOBv+S7mOS4ju+8iOWGquetie+8iVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yOiBwcm9iZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCdpbnZvaWNlcycpXG4gICAgICAgIC5zZWxlY3QoJ2ludm9pY2VfbnVtYmVyJylcbiAgICAgICAgLmxpbWl0KDEpXG4gICAgICBpZiAoIXByb2JlRXJyb3IpIHtcbiAgICAgICAgaW52b2ljZURhdGEuaW52b2ljZV9udW1iZXIgPSBpbnZvaWNlTnVtYmVyXG4gICAgICB9XG4gICAgfSBjYXRjaCAoXykge1xuICAgICAgLy8g5YiX44GM54Sh44GE55Kw5aKD44CC5L+d5a2Y44Gv44K544Kt44OD44OXXG4gICAgfVxuXG4gICAgLy8g5pen44K544Kt44O844Oe77yIc3VidG90YWzvvInkupLmj5tcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvcjogc3ViUHJvYmUgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ2ludm9pY2VzJylcbiAgICAgICAgLnNlbGVjdCgnc3VidG90YWwnKVxuICAgICAgICAubGltaXQoMSlcbiAgICAgIGlmICghc3ViUHJvYmUpIHtcbiAgICAgICAgaW52b2ljZURhdGEuc3VidG90YWwgPSBpbnZvaWNlRGF0YS5iYXNlX2Ftb3VudCA/PyBjb250cmFjdEFtb3VudFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgIC8vIOeEoeimllxuICAgIH1cblxuICAgIC8vIOaWueWQke+8iOmBi+WWtuiAheWum++8ieOBq+WvvuW/nOOBmeOCi+WIl+OBjOOBguOCi+WgtOWQiOOBr+ioreWumlxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yOiBkaXJQcm9iZSB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgnaW52b2ljZXMnKVxuICAgICAgICAuc2VsZWN0KCdkaXJlY3Rpb24nKVxuICAgICAgICAubGltaXQoMSlcbiAgICAgIGlmICghZGlyUHJvYmUpIHtcbiAgICAgICAgaW52b2ljZURhdGEuZGlyZWN0aW9uID0gJ3RvX29wZXJhdG9yJ1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgIC8vIOWIl+OBjOeEoeOBhOeSsOWig1xuICAgIH1cblxuICAgIC8vIOiri+axguabuOOCkuODh+ODvOOCv+ODmeODvOOCueOBq+S/neWtmFxuICAgIGNvbnN0IHsgZGF0YTogaW5zZXJ0ZWRJbnZvaWNlLCBlcnJvcjogaW52b2ljZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnaW52b2ljZXMnKVxuICAgICAgLmluc2VydChpbnZvaWNlRGF0YSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoaW52b2ljZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfoq4vmsYLmm7jkvZzmiJDjgqjjg6njg7w6JywgaW52b2ljZUVycm9yKVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIG1lc3NhZ2U6ICfoq4vmsYLmm7jjga7kvZzmiJDjgavlpLHmlZfjgZfjgb7jgZfjgZ8nLCBcbiAgICAgICAgZXJyb3I6IGludm9pY2VFcnJvci5tZXNzYWdlLFxuICAgICAgICBkZXRhaWxzOiBpbnZvaWNlRXJyb3IgXG4gICAgICB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgfVxuXG4gICAgLy8g6YCa55+l44KS5L2c5oiQ77yI5Y+X5rOo6ICF5ZCR44GR77yJXG4gICAgY29uc3QgeyBlcnJvcjogbm90aWZpY2F0aW9uRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdub3RpZmljYXRpb25zJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICB1c2VyX2lkOiBjb250cmFjdC5jb250cmFjdG9yX2lkLFxuICAgICAgICB0aXRsZTogJ+alreWLmeWujOS6huWxiuOBjOS9nOaIkOOBleOCjOOBvuOBl+OBn++8iOmBi+WWtuWum++8iScsXG4gICAgICAgIG1lc3NhZ2U6IGDmoYjku7bjgIwke3Byb2plY3QudGl0bGV944CN44Gu5qWt5YuZ5a6M5LqG5bGK44GM5L2c5oiQ44GV44KM44CB6YGL5Za244G46YCB5L+h44GV44KM44G+44GX44Gf44CC6KuL5rGC5pu444Oa44O844K444Gn56K66KqN44Gn44GN44G+44GZ44CCYCxcbiAgICAgICAgdHlwZTogJ2NvbXBsZXRpb25fcmVwb3J0X2NyZWF0ZWQnLFxuICAgICAgICBkYXRhOiB7IHByb2plY3RfaWQ6IGVmZmVjdGl2ZVByb2plY3RJZCwgaW52b2ljZV9pZDogaW5zZXJ0ZWRJbnZvaWNlLmlkIH1cbiAgICAgIH0pXG5cbiAgICBpZiAobm90aWZpY2F0aW9uRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+mAmuefpeS9nOaIkOOCqOODqeODvCjlj5fms6jogIUpOicsIG5vdGlmaWNhdGlvbkVycm9yKVxuICAgIH1cblxuICAgIC8vIOeZuuazqOiAheOBuOOBruWujOS6huWxiuS9nOaIkOmAmuefpeOBr+mAgeOCieOBquOBhO+8iOalreWLmeWujOS6huOBrua6luWCmemAmuefpeOBr+WIpemAlCBjb21wbGV0ZWQg6YG356e75pmC44Gr6YCB5L+h77yJXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ+iri+axguabuOOBjOato+W4uOOBq+S9nOaIkOOBleOCjOOBvuOBl+OBn+OAguWPl+azqOiAheOBq+mAmuefpeOBjOmAgeS/oeOBleOCjOOBvuOBmeOAgicsXG4gICAgICBpbnZvaWNlOiB7IC4uLmluc2VydGVkSW52b2ljZSwgaW52b2ljZV9udW1iZXI6IGluc2VydGVkSW52b2ljZS5pbnZvaWNlX251bWJlciB8fCBpbnZvaWNlTnVtYmVyIH0sXG4gICAgICBwZGZfdXJsOiBgL2FwaS9pbnZvaWNlcz9pZD0ke2luc2VydGVkSW52b2ljZS5pZH1gXG4gICAgfSwgeyBzdGF0dXM6IDIwMSB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign6KuL5rGC5pu45L2c5oiQ44Ko44Op44O8OicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgbWVzc2FnZTogJ+OCteODvOODkOODvOOCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBnycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKVxuICAgIGlmICghYXV0aEhlYWRlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ+iqjeiovOOBjOW/heimgeOBp+OBmScgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIH1cblxuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5yZXBsYWNlKCdCZWFyZXIgJywgJycpXG5cbiAgICAvLyBTdXBhYmFzZeOCr+ODqeOCpOOCouODs+ODiOOCkuS9nOaIkFxuICAgIGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVTdXBhYmFzZUFkbWluKClcblxuICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyIH0sIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW4uYXV0aC5nZXRVc2VyKHRva2VuKVxuXG4gICAgaWYgKGF1dGhFcnJvciB8fCAhdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ+iqjeiovOOBq+WkseaVl+OBl+OBvuOBl+OBnycgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIH1cblxuICAgIC8vIOODpuODvOOCtuODvOODl+ODreODleOCo+ODvOODq+OCkuWPluW+l1xuICAgIGNvbnN0IHsgZGF0YTogdXNlclByb2ZpbGUsIGVycm9yOiB1c2VyUHJvZmlsZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgLmVxKCdhdXRoX3VzZXJfaWQnLCB1c2VyLmlkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAodXNlclByb2ZpbGVFcnJvciB8fCAhdXNlclByb2ZpbGUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICfjg6bjg7zjgrbjg7zjg5fjg63jg5XjgqPjg7zjg6vjgYzopovjgaTjgYvjgorjgb7jgZvjgpMnIH0sIHsgc3RhdHVzOiA0MDMgfSlcbiAgICB9XG5cbiAgICAvLyDjg6bjg7zjgrbjg7zjga7jg63jg7zjg6vjgpLnorroqo1cbiAgICBjb25zdCB7IGRhdGE6IG1lbWJlcnNoaXAgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdtZW1iZXJzaGlwcycpXG4gICAgICAuc2VsZWN0KCdyb2xlLCBvcmdfaWQnKVxuICAgICAgLmVxKCd1c2VyX2lkJywgdXNlclByb2ZpbGUuaWQpXG4gICAgICAubWF5YmVTaW5nbGUoKVxuXG4gICAgLy8gUERG5Y2Y5L2T5Y+W5b6X44GL5Yik5a6aXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXG4gICAgY29uc3QgaW52b2ljZUlkID0gc2VhcmNoUGFyYW1zLmdldCgnaWQnKVxuXG4gICAgaWYgKGludm9pY2VJZCkge1xuICAgICAgY29uc3QgeyBkYXRhOiBpbnZvaWNlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgnaW52b2ljZXMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdpZCcsIGludm9pY2VJZClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmIChlcnJvciB8fCAhaW52b2ljZSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAn6KuL5rGC5pu444GM6KaL44Gk44GL44KK44G+44Gb44KTJyB9LCB7IHN0YXR1czogNDA0IH0pXG4gICAgICB9XG5cbiAgICAgIC8vIOS7mOmaj+aDheWgseOBruWPluW+l++8iOeZuuazqOiAhS/lj5fms6jogIXjgIHjg5fjg63jgrjjgqfjgq/jg4jvvIlcbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvamVjdCB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgncHJvamVjdHMnKVxuICAgICAgICAuc2VsZWN0KCdpZCwgdGl0bGUsIHN0YXJ0X2RhdGUsIGVuZF9kYXRlLCBhc3NpZ25lZV9uYW1lLCBvcmdfaWQsIGNvbnRyYWN0b3JfaWQnKVxuICAgICAgICAuZXEoJ2lkJywgaW52b2ljZS5wcm9qZWN0X2lkKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgY29uc3QgeyBkYXRhOiBvcmcgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ29yZ2FuaXphdGlvbnMnKVxuICAgICAgICAuc2VsZWN0KCduYW1lLCBhZGRyZXNzLCBpbnZvaWNlX3JlZ2lzdHJhdGlvbl9udW1iZXInKVxuICAgICAgICAuZXEoJ2lkJywgcHJvamVjdD8ub3JnX2lkKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgY29uc3QgeyBkYXRhOiBjb250cmFjdG9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAgIC5zZWxlY3QoJ2Rpc3BsYXlfbmFtZSwgYWRkcmVzcycpXG4gICAgICAgIC5lcSgnaWQnLCBwcm9qZWN0Py5jb250cmFjdG9yX2lkKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgY29uc3QgdGF4UmF0ZSA9IDAuMVxuICAgICAgY29uc3QgYW1vdW50RXhjbCA9IChpbnZvaWNlIGFzIGFueSkuYmFzZV9hbW91bnQgPz8gKGludm9pY2UgYXMgYW55KS5zdWJ0b3RhbCA/PyAwXG4gICAgICBjb25zdCB0YXggPSBNYXRoLnJvdW5kKGFtb3VudEV4Y2wgKiB0YXhSYXRlKVxuICAgICAgY29uc3QgdG90YWwgPSBhbW91bnRFeGNsICsgdGF4XG4gICAgICAvLyDmupDms4k6IDEwMOS4h+acqua6gCDihpIg57eP6aGNKjAuMTAyMSwgMTAw5LiH5Lul5LiKIOKGkiAo57eP6aGNLTEwMDAwMDApKjAuMjA0MiArIDEwMjEwMFxuICAgICAgY29uc3Qgd2l0aGhvbGRpbmcgPSB0b3RhbCA8IDEwMDAwMDBcbiAgICAgICAgPyBNYXRoLmZsb29yKHRvdGFsICogMC4xMDIxKVxuICAgICAgICA6IE1hdGguZmxvb3IoKHRvdGFsIC0gMTAwMDAwMCkgKiAwLjIwNDIgKyAxMDIxMDApXG5cbiAgICAgIGNvbnN0IHBkZkJ1ZiA9IGF3YWl0IHJlbmRlckphcGFuZXNlSW52b2ljZVBkZih7XG4gICAgICAgIGlzc3Vlcjoge1xuICAgICAgICAgIG5hbWU6IG9yZz8ubmFtZSB8fCAnJyxcbiAgICAgICAgICBhZGRyZXNzOiBvcmc/LmFkZHJlc3MgfHwgJycsXG4gICAgICAgICAgaW52b2ljZVJlZ05vOiBvcmc/Lmludm9pY2VfcmVnaXN0cmF0aW9uX251bWJlciB8fCBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyYWN0b3I6IHtcbiAgICAgICAgICBuYW1lOiBjb250cmFjdG9yPy5kaXNwbGF5X25hbWUgfHwgJycsXG4gICAgICAgICAgYWRkcmVzczogY29udHJhY3Rvcj8uYWRkcmVzcyB8fCAnJ1xuICAgICAgICB9LFxuICAgICAgICBvcmRlck5vOiBpbnZvaWNlLmNvbnRyYWN0X2lkID8/ICfigJQnLFxuICAgICAgICBhc3NpZ25lZTogcHJvamVjdD8uYXNzaWduZWVfbmFtZSA/PyBudWxsLFxuICAgICAgICB0aXRsZTogcHJvamVjdD8udGl0bGUgfHwgJycsXG4gICAgICAgIHBlcmlvZDogeyBmcm9tOiBwcm9qZWN0Py5zdGFydF9kYXRlLCB0bzogcHJvamVjdD8uZW5kX2RhdGUgfSxcbiAgICAgICAgYW1vdW50RXhjbCxcbiAgICAgICAgdGF4UmF0ZSxcbiAgICAgICAgZHVlRGF0ZTogaW52b2ljZS5kdWVfZGF0ZSxcbiAgICAgICAgcGF5TWV0aG9kOiAn5Y+j5bqn5oyv6L68JyxcbiAgICAgICAgbm90ZTogJ+KAu+aUr+aJlemHkemhjeOBr+aMr+i+vOaJi+aVsOaWmeetieOAgea6kOazieW+tOWPjuOCkuaOp+mZpOOBl+OBn+mHkemhjeOBqOOBmeOCiycsXG4gICAgICAgIHdpdGhIb2xkaW5nOiB3aXRoaG9sZGluZ1xuICAgICAgfSlcblxuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UocGRmQnVmLCB7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9wZGYnLFxuICAgICAgICAgICdDb250ZW50LURpc3Bvc2l0aW9uJzogYGlubGluZTsgZmlsZW5hbWU9XCJpbnZvaWNlXyR7aW52b2ljZS5pZH0ucGRmXCJgXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8g6KuL5rGC5pu45LiA6Kan44KS5Y+W5b6X77yI44OV44Ot44Oz44OI44Gu5pyf5b6F5b2i44Gr5pW05b2i77yJXG4gICAgbGV0IGJhc2VRdWVyeSA9IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdpbnZvaWNlcycpXG4gICAgICAuc2VsZWN0KGBcbiAgICAgICAgaWQsXG4gICAgICAgIGludm9pY2VfbnVtYmVyLFxuICAgICAgICBzdGF0dXMsXG4gICAgICAgIGlzc3VlX2RhdGUsXG4gICAgICAgIGR1ZV9kYXRlLFxuICAgICAgICBiYXNlX2Ftb3VudCxcbiAgICAgICAgc3lzdGVtX2ZlZSxcbiAgICAgICAgdG90YWxfYW1vdW50LFxuICAgICAgICBjcmVhdGVkX2F0LFxuICAgICAgICBwcm9qZWN0X2lkLFxuICAgICAgICBjb250cmFjdF9pZCxcbiAgICAgICAgb3JnX2lkLFxuICAgICAgICBwcm9qZWN0czpwcm9qZWN0X2lkICggaWQsIHRpdGxlLCBjb250cmFjdG9yX2lkICksXG4gICAgICAgIGNvbnRyYWN0czpjb250cmFjdF9pZCAoIGlkLCBiaWRfYW1vdW50ICksXG4gICAgICAgIG9yZ2FuaXphdGlvbnM6b3JnX2lkICggaWQsIG5hbWUgKVxuICAgICAgYClcblxuICAgIGlmIChtZW1iZXJzaGlwPy5yb2xlID09PSAnT3JnQWRtaW4nKSB7XG4gICAgICBiYXNlUXVlcnkgPSBiYXNlUXVlcnkuZXEoJ29yZ19pZCcsIG1lbWJlcnNoaXAub3JnX2lkKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyDlj5fms6jogIU6IGNvbnRyYWN0b3JfaWQ96Ieq5YiGIOOCguOBl+OBj+OBryBjb250cmFjdF9pZCDjgYzoh6rliIbjga7lpZHntIRcbiAgICAgIGNvbnN0IHsgZGF0YTogbXlDb250cmFjdHMgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ2NvbnRyYWN0cycpXG4gICAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgICAgLmVxKCdjb250cmFjdG9yX2lkJywgdXNlclByb2ZpbGUuaWQpXG5cbiAgICAgIGNvbnN0IG15Q29udHJhY3RJZHMgPSAobXlDb250cmFjdHMgfHwgW10pLm1hcCgoYzogYW55KSA9PiBjLmlkKVxuICAgICAgaWYgKG15Q29udHJhY3RJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBpbkxpc3QgPSBteUNvbnRyYWN0SWRzLm1hcCgoaWQ6IHN0cmluZykgPT4gYCR7aWR9YCkuam9pbignLCcpXG4gICAgICAgIC8vIG9yKCkg44GrIGluIOadoeS7tuOCkuWQq+OCgeOCi++8iEFOROOBq+OBquOCieOBquOBhOOCiOOBhuS4gOaLrOOBp+aMh+Wumu+8iVxuICAgICAgICBiYXNlUXVlcnkgPSBiYXNlUXVlcnkub3IoYGNvbnRyYWN0b3JfaWQuZXEuJHt1c2VyUHJvZmlsZS5pZH0sY29udHJhY3Rvcl9pZC5lcS4ke3VzZXIuaWR9LGNvbnRyYWN0X2lkLmluLigke2luTGlzdH0pYClcblxuICAgICAgICAvLyDov73liqDjgafjg5fjg63jgrjjgqfjgq/jg4hJROOBp+OCguaLvuOBhlxuICAgICAgICBjb25zdCB7IGRhdGE6IG15UHJvamVjdHMgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAuZnJvbSgnY29udHJhY3RzJylcbiAgICAgICAgICAuc2VsZWN0KCdwcm9qZWN0X2lkJylcbiAgICAgICAgICAuaW4oJ2lkJywgbXlDb250cmFjdElkcylcbiAgICAgICAgY29uc3QgbXlQcm9qZWN0SWRzID0gQXJyYXkuZnJvbShuZXcgU2V0KChteVByb2plY3RzIHx8IFtdKS5tYXAoKHA6IGFueSkgPT4gcC5wcm9qZWN0X2lkKSkpXG4gICAgICAgIGlmIChteVByb2plY3RJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGJhc2VRdWVyeSA9IGJhc2VRdWVyeS5vcihgcHJvamVjdF9pZC5pbi4oJHtteVByb2plY3RJZHMuam9pbignLCcpfSlgKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiYXNlUXVlcnkgPSBiYXNlUXVlcnkub3IoYGNvbnRyYWN0b3JfaWQuZXEuJHt1c2VyUHJvZmlsZS5pZH0sY29udHJhY3Rvcl9pZC5lcS4ke3VzZXIuaWR9YClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IHJhd0ludm9pY2VzLCBlcnJvcjogaW52b2ljZXNFcnJvciB9ID0gYXdhaXQgYmFzZVF1ZXJ5Lm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgICBpZiAoaW52b2ljZXNFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign6KuL5rGC5pu45Y+W5b6X44Ko44Op44O8OicsIGludm9pY2VzRXJyb3IpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAn6KuL5rGC5pu444Gu5Y+W5b6X44Gr5aSx5pWX44GX44G+44GX44GfJyB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZm9ybWF0dGVkID0gKHJhd0ludm9pY2VzIHx8IFtdKS5tYXAoKGludjogYW55KSA9PiAoe1xuICAgICAgaWQ6IGludi5pZCxcbiAgICAgIGludm9pY2VfbnVtYmVyOiBpbnYuaW52b2ljZV9udW1iZXIgfHwgYElOVi0ke1N0cmluZyhpbnYuaWQpLnNsaWNlKDAsOCkudG9VcHBlckNhc2UoKX1gLFxuICAgICAgc3RhdHVzOiBpbnYuc3RhdHVzLFxuICAgICAgaXNzdWVfZGF0ZTogaW52Lmlzc3VlX2RhdGUsXG4gICAgICBkdWVfZGF0ZTogaW52LmR1ZV9kYXRlLFxuICAgICAgYmFzZV9hbW91bnQ6IGludi5iYXNlX2Ftb3VudCA/PyBpbnYuc3VidG90YWwgPz8gMCxcbiAgICAgIHN5c3RlbV9mZWU6IGludi5zeXN0ZW1fZmVlID8/IGludi5mZWVfYW1vdW50ID8/IDAsXG4gICAgICB0b3RhbF9hbW91bnQ6IGludi50b3RhbF9hbW91bnQgPz8gMCxcbiAgICAgIHByb2plY3Q6IHtcbiAgICAgICAgaWQ6IGludi5wcm9qZWN0cz8uaWQsXG4gICAgICAgIHRpdGxlOiBpbnYucHJvamVjdHM/LnRpdGxlLFxuICAgICAgICBjb250cmFjdG9yX2lkOiBpbnYucHJvamVjdHM/LmNvbnRyYWN0b3JfaWRcbiAgICAgIH0sXG4gICAgICBjb250cmFjdDoge1xuICAgICAgICBpZDogaW52LmNvbnRyYWN0cz8uaWQsXG4gICAgICAgIGJpZF9hbW91bnQ6IGludi5jb250cmFjdHM/LmJpZF9hbW91bnRcbiAgICAgIH0sXG4gICAgICBjbGllbnRfb3JnOiB7XG4gICAgICAgIGlkOiBpbnYub3JnYW5pemF0aW9ucz8uaWQsXG4gICAgICAgIG5hbWU6IGludi5vcmdhbml6YXRpb25zPy5uYW1lXG4gICAgICB9XG4gICAgfSkpXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBpbnZvaWNlczogZm9ybWF0dGVkIH0sIHsgc3RhdHVzOiAyMDAgfSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+iri+axguabuOWPluW+l0FQSeOCqOODqeODvDonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IG1lc3NhZ2U6ICfjgrXjg7zjg5Djg7zjgqjjg6njg7zjgYznmbrnlJ/jgZfjgb7jgZfjgZ8nIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlU3VwYWJhc2VBZG1pbiIsInJlbmRlckphcGFuZXNlSW52b2ljZVBkZiIsIlBPU1QiLCJyZXF1ZXN0IiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJqc29uIiwibWVzc2FnZSIsInN0YXR1cyIsInRva2VuIiwicmVwbGFjZSIsInN1cGFiYXNlQWRtaW4iLCJkYXRhIiwidXNlciIsImVycm9yIiwiYXV0aEVycm9yIiwiYXV0aCIsImdldFVzZXIiLCJ1c2VyUHJvZmlsZSIsInVzZXJQcm9maWxlRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJpZCIsInNpbmdsZSIsImJvZHkiLCJwcm9qZWN0X2lkIiwidHlwZSIsImNvbnRyYWN0X2lkIiwiZWZmZWN0aXZlUHJvamVjdElkIiwiY29udHJhY3RGcm9tUGFyYW0iLCJjIiwiY0VyciIsImxlbmd0aCIsImNhbmRpZGF0ZXMiLCJsaWtlRXJyIiwiZmlsdGVyIiwibGltaXQiLCJwcm9qZWN0IiwicHJvamVjdEVycm9yIiwibWVtYmVyc2hpcCIsIm1heWJlU2luZ2xlIiwicm9sZSIsIm9yZ19pZCIsIm9yZ2FuaXphdGlvbiIsIm9yZ0Vycm9yIiwiY29udHJhY3QiLCJjb250cmFjdHMiLCJjb250cmFjdEVycm9yIiwiaW4iLCJvcmRlciIsImFzY2VuZGluZyIsImNvbnNvbGUiLCJjb250cmFjdG9yIiwiY29udHJhY3RvckVycm9yIiwiY29udHJhY3Rvcl9pZCIsImV4aXN0aW5nSW52b2ljZXMiLCJleGlzdGluZ0Vycm9yIiwibGF0ZXN0SW52b2ljZSIsImludm9pY2UiLCJwZGZfdXJsIiwiYWxyZWFkeUV4aXN0cyIsImludm9pY2VOdW1iZXIiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJTdHJpbmciLCJub3ciLCJzbGljZSIsImNvbnRyYWN0QW1vdW50IiwiYmlkX2Ftb3VudCIsImJ1ZGdldCIsInN5c3RlbUZlZSIsInRvdGFsQW1vdW50IiwiaW52b2ljZURhdGEiLCJjbGllbnRfb3JnX2lkIiwiYmFzZV9hbW91bnQiLCJmZWVfYW1vdW50Iiwic3lzdGVtX2ZlZSIsInRvdGFsX2Ftb3VudCIsImlzc3VlX2RhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwiZHVlX2RhdGUiLCJwcm9iZUVycm9yIiwiaW52b2ljZV9udW1iZXIiLCJfIiwic3ViUHJvYmUiLCJzdWJ0b3RhbCIsImRpclByb2JlIiwiZGlyZWN0aW9uIiwiaW5zZXJ0ZWRJbnZvaWNlIiwiaW52b2ljZUVycm9yIiwiaW5zZXJ0IiwiZGV0YWlscyIsIm5vdGlmaWNhdGlvbkVycm9yIiwidXNlcl9pZCIsInRpdGxlIiwiaW52b2ljZV9pZCIsIkdFVCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImludm9pY2VJZCIsIm9yZyIsInRheFJhdGUiLCJhbW91bnRFeGNsIiwidGF4IiwiTWF0aCIsInJvdW5kIiwidG90YWwiLCJ3aXRoaG9sZGluZyIsImZsb29yIiwicGRmQnVmIiwiaXNzdWVyIiwibmFtZSIsImFkZHJlc3MiLCJpbnZvaWNlUmVnTm8iLCJpbnZvaWNlX3JlZ2lzdHJhdGlvbl9udW1iZXIiLCJkaXNwbGF5X25hbWUiLCJvcmRlck5vIiwiYXNzaWduZWUiLCJhc3NpZ25lZV9uYW1lIiwicGVyaW9kIiwic3RhcnRfZGF0ZSIsInRvIiwiZW5kX2RhdGUiLCJkdWVEYXRlIiwicGF5TWV0aG9kIiwibm90ZSIsIndpdGhIb2xkaW5nIiwiYmFzZVF1ZXJ5IiwibXlDb250cmFjdHMiLCJteUNvbnRyYWN0SWRzIiwibWFwIiwiaW5MaXN0Iiwiam9pbiIsIm9yIiwibXlQcm9qZWN0cyIsIm15UHJvamVjdElkcyIsIkFycmF5IiwiU2V0IiwicCIsInJhd0ludm9pY2VzIiwiaW52b2ljZXNFcnJvciIsImZvcm1hdHRlZCIsImludiIsInRvVXBwZXJDYXNlIiwicHJvamVjdHMiLCJjbGllbnRfb3JnIiwib3JnYW5pemF0aW9ucyIsImludm9pY2VzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/invoices/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/pdf.ts":
/*!************************!*\
  !*** ./src/lib/pdf.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generatePdfPlaceholder: () => (/* binding */ generatePdfPlaceholder),\n/* harmony export */   renderJapaneseInvoicePdf: () => (/* binding */ renderJapaneseInvoicePdf),\n/* harmony export */   renderTemplatePdf: () => (/* binding */ renderTemplatePdf)\n/* harmony export */ });\n/* harmony import */ var pdf_lib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pdf-lib */ \"(rsc)/./node_modules/pdf-lib/es/index.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n// 簡易PDFテンプレ生成（今回はJSONプレースホルダを返すだけ）\n// 実運用では serverless-pdf, @react-pdf/renderer などで置換\nasync function generatePdfPlaceholder(payload) {\n    // 実装簡略化のため、JSONを文字列化して返す（S3に保存するなどに差し替え可能）\n    const content = JSON.stringify(payload, null, 2);\n    // 実運用ではここでストレージへアップロードしてURLを返す\n    return `data:application/json;base64,${Buffer.from(content).toString(\"base64\")}`;\n}\n// --- 雛形に寄せた簡易テンプレの描画 ---\n\n\n\nasync function renderTemplatePdf(kind, data) {\n    const pdfDoc = await pdf_lib__WEBPACK_IMPORTED_MODULE_0__.PDFDocument.create();\n    const page = pdfDoc.addPage([\n        595.28,\n        841.89\n    ]);\n    const font = await pdfDoc.embedFont(pdf_lib__WEBPACK_IMPORTED_MODULE_0__.StandardFonts.Helvetica);\n    const drawText = (t, x, y, s = 12)=>page.drawText(t, {\n            x,\n            y,\n            size: s,\n            font,\n            color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(0, 0, 0)\n        });\n    drawText(new Date().toLocaleDateString(\"ja-JP\"), 500, 810, 10);\n    drawText(data.title, 240, 790, 20);\n    const left = 36;\n    const top = 700;\n    const width = 523;\n    const rowH = 18;\n    page.drawRectangle({\n        x: left,\n        y: top - rowH * (data.lines.length + 1),\n        width,\n        height: rowH * (data.lines.length + 1),\n        borderColor: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(0, 0, 0),\n        borderWidth: 1\n    });\n    data.lines.forEach((l, i)=>{\n        drawText(l, left + 8, top - 14 - rowH * i, 9);\n        if (i < data.lines.length) {\n            page.drawLine({\n                start: {\n                    x: left,\n                    y: top - rowH * (i + 1)\n                },\n                end: {\n                    x: left + width,\n                    y: top - rowH * (i + 1)\n                },\n                color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(0, 0, 0)\n            });\n        }\n    });\n    const boxTop = top - rowH * (data.lines.length + 1) - 90;\n    page.drawRectangle({\n        x: left,\n        y: boxTop,\n        width,\n        height: 70,\n        borderColor: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(0, 0, 0),\n        borderWidth: 1\n    });\n    drawText(\"金額\", left + 10, boxTop + 52, 12);\n    drawText(`${data.amount.toLocaleString(\"ja-JP\")} 円`, left + 70, boxTop + 30, 22);\n    drawText(data.note || \"注: 電子契約につき収入印紙は不要です。\", left, boxTop - 16, 9);\n    return Buffer.from(await pdfDoc.save());\n}\nfunction loadJPFont() {\n    try {\n        const p = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\", \"fonts\", \"NotoSansJP-Regular.otf\");\n        if (fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(p)) return fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(p);\n    } catch  {}\n    try {\n        const p = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\", \"fonts\", \"NotoSansJP-Regular.ttf\");\n        if (fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(p)) return fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(p);\n    } catch  {}\n    return null;\n}\nasync function renderJapaneseInvoicePdf(data) {\n    const pdfDoc = await pdf_lib__WEBPACK_IMPORTED_MODULE_0__.PDFDocument.create();\n    const page = pdfDoc.addPage([\n        595.28,\n        841.89\n    ]) // A4\n    ;\n    const jpFontData = loadJPFont();\n    const font = jpFontData ? await pdfDoc.embedFont(jpFontData) : await pdfDoc.embedFont(pdf_lib__WEBPACK_IMPORTED_MODULE_0__.StandardFonts.Helvetica);\n    const draw = (t, x, y, s = 10)=>page.drawText(t ?? \"\", {\n            x,\n            y,\n            size: s,\n            font,\n            color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(0, 0, 0)\n        });\n    // ヘッダ（左右）\n    draw(\"（発注者）\", 50, 800);\n    draw(data.issuer.address || \"\", 50, 785);\n    draw(data.issuer.name || \"\", 50, 770);\n    if (data.issuer.contact) draw(`代表者 ${data.issuer.contact}`, 50, 756);\n    draw(\"（請負者）\", 420, 800);\n    if (data.issuer.invoiceRegNo) draw(`登録番号: ${data.issuer.invoiceRegNo}`, 420, 815);\n    if (data.contractor.address) draw(data.contractor.address, 420, 785);\n    draw(data.contractor.name || \"\", 420, 770);\n    // タイトル\n    draw(\"請 求 書\", 270, 720, 18);\n    // ボックス群\n    const left = 40;\n    const width = 515;\n    let y = 700;\n    const rowH = 22;\n    const box = (label, content, cols = [\n        120,\n        width - 120\n    ])=>{\n        page.drawRectangle({\n            x: left,\n            y: y - rowH,\n            width,\n            height: rowH,\n            borderColor: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(0, 0, 0),\n            borderWidth: 1\n        });\n        page.drawLine({\n            start: {\n                x: left + cols[0],\n                y: y - rowH\n            },\n            end: {\n                x: left + cols[0],\n                y: y\n            },\n            color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(0, 0, 0)\n        });\n        draw(label, left + 6, y - 15);\n        draw(content, left + cols[0] + 6, y - 15);\n        y -= rowH;\n    };\n    box(\"注文番号\", data.orderNo);\n    box(\"担当者\", data.assignee || \"\");\n    box(\"業務名\", data.title);\n    box(\"工期\", `${data.period.from ?? \"\"} 〜 ${data.period.to ?? \"\"}`);\n    // 金額ボックス\n    const tax = Math.round(data.amountExcl * data.taxRate);\n    const total = data.amountExcl + tax;\n    page.drawRectangle({\n        x: left,\n        y: y - rowH * 2,\n        width,\n        height: rowH * 2,\n        borderColor: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(0, 0, 0),\n        borderWidth: 1\n    });\n    page.drawLine({\n        start: {\n            x: left + 250,\n            y: y - rowH * 2\n        },\n        end: {\n            x: left + 250,\n            y: y\n        },\n        color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(0, 0, 0)\n    });\n    draw(\"契約金額\", left + 6, y - 15);\n    draw(`${data.amountExcl.toLocaleString(\"ja-JP\")} 円`, left + 120, y - 15);\n    draw(\"内、消費税(10%)\", left + 260, y - 15);\n    draw(`${tax.toLocaleString(\"ja-JP\")} 円`, left + 390, y - 15);\n    draw(\"税込金額\", left + 260, y - 15 - rowH);\n    draw(`${total.toLocaleString(\"ja-JP\")} 円`, left + 390, y - 15 - rowH);\n    y -= rowH * 2;\n    box(\"支払日\", data.dueDate || \"\");\n    box(\"支払方法\", data.payMethod);\n    // 備考\n    page.drawRectangle({\n        x: left,\n        y: y - rowH * 2,\n        width,\n        height: rowH * 2,\n        borderColor: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(0, 0, 0),\n        borderWidth: 1\n    });\n    draw(\"備考\", left + 6, y - 15);\n    draw(data.note || \"※支払金額は振込手数料等、源泉徴収を控除した金額とする\", left + 50, y - 15);\n    y -= rowH * 2 + 10;\n    // 合計、源泉\n    draw(`小計:  ¥${data.amountExcl.toLocaleString(\"ja-JP\")}`, left, y);\n    draw(`消費税(10%):  ¥${tax.toLocaleString(\"ja-JP\")}`, left + 180, y);\n    draw(`合計:  ¥${total.toLocaleString(\"ja-JP\")}`, left + 360, y);\n    y -= 18;\n    draw(`源泉徴収税:  ¥${data.withHolding.toLocaleString(\"ja-JP\")}`, left, y);\n    return Buffer.from(await pdfDoc.save());\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZXJpbmctcGxhdGZvcm0vLi9zcmMvbGliL3BkZi50cz81ZTI4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIOewoeaYk1BERuODhuODs+ODl+ODrOeUn+aIkO+8iOS7iuWbnuOBr0pTT07jg5fjg6zjg7zjgrnjg5vjg6vjg4DjgpLov5TjgZnjgaDjgZHvvIlcbi8vIOWun+mBi+eUqOOBp+OBryBzZXJ2ZXJsZXNzLXBkZiwgQHJlYWN0LXBkZi9yZW5kZXJlciDjgarjganjgafnva7mj5tcblxuZXhwb3J0IGludGVyZmFjZSBJbnZvaWNlUGRmUGF5bG9hZCB7XG4gIHRpdGxlOiBzdHJpbmdcbiAgaXNzdWVEYXRlOiBzdHJpbmdcbiAgZHVlRGF0ZT86IHN0cmluZ1xuICBwYXJ0eTogeyBuYW1lOiBzdHJpbmcgfVxuICBpdGVtczogQXJyYXk8eyBkZXNjcmlwdGlvbjogc3RyaW5nOyBhbW91bnQ6IG51bWJlciB9PlxuICB0b3RhbHM6IHsgc3VidG90YWw6IG51bWJlcjsgYWRqdXN0bWVudHM/OiBudW1iZXI7IHRvdGFsOiBudW1iZXIgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVQZGZQbGFjZWhvbGRlcihwYXlsb2FkOiBJbnZvaWNlUGRmUGF5bG9hZCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIC8vIOWun+ijheewoeeVpeWMluOBruOBn+OCgeOAgUpTT07jgpLmloflrZfliJfljJbjgZfjgabov5TjgZnvvIhTM+OBq+S/neWtmOOBmeOCi+OBquOBqeOBq+W3ruOBl+abv+OBiOWPr+iDve+8iVxuICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCwgbnVsbCwgMilcbiAgLy8g5a6f6YGL55So44Gn44Gv44GT44GT44Gn44K544OI44Os44O844K444G444Ki44OD44OX44Ot44O844OJ44GX44GmVVJM44KS6L+U44GZXG4gIHJldHVybiBgZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCwke0J1ZmZlci5mcm9tKGNvbnRlbnQpLnRvU3RyaW5nKCdiYXNlNjQnKX1gXG59XG5cbi8vIC0tLSDpm5vlvaLjgavlr4TjgZvjgZ/nsKHmmJPjg4bjg7Pjg5fjg6zjga7mj4/nlLsgLS0tXG5pbXBvcnQgeyBQREZEb2N1bWVudCwgU3RhbmRhcmRGb250cywgcmdiIH0gZnJvbSAncGRmLWxpYidcbmltcG9ydCBmcyBmcm9tICdmcydcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5cbmV4cG9ydCB0eXBlIERvY0tpbmQgPSAnaW52b2ljZScgfCAnYWNrJyB8ICdvcmRlcidcblxuZXhwb3J0IGludGVyZmFjZSBCYXNlVGVtcGxhdGVEYXRhIHtcbiAgdGl0bGU6IHN0cmluZ1xuICBsaW5lczogc3RyaW5nW11cbiAgYW1vdW50OiBudW1iZXJcbiAgbm90ZT86IHN0cmluZ1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyVGVtcGxhdGVQZGYoa2luZDogRG9jS2luZCwgZGF0YTogQmFzZVRlbXBsYXRlRGF0YSk6IFByb21pc2U8QnVmZmVyPiB7XG4gIGNvbnN0IHBkZkRvYyA9IGF3YWl0IFBERkRvY3VtZW50LmNyZWF0ZSgpXG4gIGNvbnN0IHBhZ2UgPSBwZGZEb2MuYWRkUGFnZShbNTk1LjI4LCA4NDEuODldKVxuICBjb25zdCBmb250ID0gYXdhaXQgcGRmRG9jLmVtYmVkRm9udChTdGFuZGFyZEZvbnRzLkhlbHZldGljYSlcbiAgY29uc3QgZHJhd1RleHQgPSAodDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgcyA9IDEyKSA9PiBwYWdlLmRyYXdUZXh0KHQsIHsgeCwgeSwgc2l6ZTogcywgZm9udCwgY29sb3I6IHJnYigwLDAsMCkgfSlcblxuICBkcmF3VGV4dChuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnamEtSlAnKSwgNTAwLCA4MTAsIDEwKVxuICBkcmF3VGV4dChkYXRhLnRpdGxlLCAyNDAsIDc5MCwgMjApXG5cbiAgY29uc3QgbGVmdCA9IDM2XG4gIGNvbnN0IHRvcCA9IDcwMFxuICBjb25zdCB3aWR0aCA9IDUyM1xuICBjb25zdCByb3dIID0gMThcbiAgcGFnZS5kcmF3UmVjdGFuZ2xlKHsgeDogbGVmdCwgeTogdG9wIC0gcm93SCAqIChkYXRhLmxpbmVzLmxlbmd0aCArIDEpLCB3aWR0aCwgaGVpZ2h0OiByb3dIICogKGRhdGEubGluZXMubGVuZ3RoICsgMSksIGJvcmRlckNvbG9yOiByZ2IoMCwwLDApLCBib3JkZXJXaWR0aDogMSB9KVxuICBkYXRhLmxpbmVzLmZvckVhY2goKGwsIGkpID0+IHtcbiAgICBkcmF3VGV4dChsLCBsZWZ0ICsgOCwgdG9wIC0gMTQgLSByb3dIICogaSwgOSlcbiAgICBpZiAoaSA8IGRhdGEubGluZXMubGVuZ3RoKSB7XG4gICAgICBwYWdlLmRyYXdMaW5lKHsgc3RhcnQ6IHsgeDogbGVmdCwgeTogdG9wIC0gcm93SCAqIChpICsgMSkgfSwgZW5kOiB7IHg6IGxlZnQgKyB3aWR0aCwgeTogdG9wIC0gcm93SCAqIChpICsgMSkgfSwgY29sb3I6IHJnYigwLDAsMCkgfSlcbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgYm94VG9wID0gdG9wIC0gcm93SCAqIChkYXRhLmxpbmVzLmxlbmd0aCArIDEpIC0gOTBcbiAgcGFnZS5kcmF3UmVjdGFuZ2xlKHsgeDogbGVmdCwgeTogYm94VG9wLCB3aWR0aCwgaGVpZ2h0OiA3MCwgYm9yZGVyQ29sb3I6IHJnYigwLDAsMCksIGJvcmRlcldpZHRoOiAxIH0pXG4gIGRyYXdUZXh0KCfph5HpoY0nLCBsZWZ0ICsgMTAsIGJveFRvcCArIDUyLCAxMilcbiAgZHJhd1RleHQoYCR7ZGF0YS5hbW91bnQudG9Mb2NhbGVTdHJpbmcoJ2phLUpQJyl9IOWGhmAsIGxlZnQgKyA3MCwgYm94VG9wICsgMzAsIDIyKVxuICBkcmF3VGV4dChkYXRhLm5vdGUgfHwgJ+azqDog6Zu75a2Q5aWR57SE44Gr44Gk44GN5Y+O5YWl5Y2w57SZ44Gv5LiN6KaB44Gn44GZ44CCJywgbGVmdCwgYm94VG9wIC0gMTYsIDkpXG5cbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGF3YWl0IHBkZkRvYy5zYXZlKCkpXG59XG5cblxuLy8gLS0tIOaXpeacrOiqnuODrOOCpOOCouOCpuODiOOBruiri+axguabuFBERu+8iOewoeaYk++8iSAtLS1cbmV4cG9ydCBpbnRlcmZhY2UgSmFwYW5lc2VJbnZvaWNlRGF0YSB7XG4gIGlzc3VlcjogeyAvLyDnmbrms6jogIXvvIjoq4vmsYLlhYPvvIlcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBhZGRyZXNzPzogc3RyaW5nXG4gICAgY29udGFjdD86IHN0cmluZ1xuICAgIGludm9pY2VSZWdObz86IHN0cmluZyB8IG51bGxcbiAgfVxuICBjb250cmFjdG9yOiB7IC8vIOiri+iyoOiAhe+8iOWPl+azqOiAhe+8iVxuICAgIG5hbWU6IHN0cmluZ1xuICAgIGFkZHJlc3M/OiBzdHJpbmdcbiAgfVxuICBvcmRlck5vOiBzdHJpbmcgLy8g5aWR57SESUTjgarjgalcbiAgYXNzaWduZWU/OiBzdHJpbmcgfCBudWxsIC8vIOaLheW9k+iAhVxuICB0aXRsZTogc3RyaW5nIC8vIOalreWLmeWQjVxuICBwZXJpb2Q6IHsgZnJvbT86IHN0cmluZyB8IG51bGw7IHRvPzogc3RyaW5nIHwgbnVsbCB9XG4gIGFtb3VudEV4Y2w6IG51bWJlciAvLyDlpZHntITph5HpoY0o56iO5oqcKVxuICB0YXhSYXRlOiBudW1iZXIgLy8gMC4xXG4gIGR1ZURhdGU/OiBzdHJpbmcgfCBudWxsXG4gIHBheU1ldGhvZDogc3RyaW5nXG4gIG5vdGU/OiBzdHJpbmdcbiAgd2l0aEhvbGRpbmc6IG51bWJlciAvLyDmupDms4lcbn1cblxuZnVuY3Rpb24gbG9hZEpQRm9udCgpOiBVaW50OEFycmF5IHwgbnVsbCB7XG4gIHRyeSB7XG4gICAgY29uc3QgcCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2ZvbnRzJywgJ05vdG9TYW5zSlAtUmVndWxhci5vdGYnKVxuICAgIGlmIChmcy5leGlzdHNTeW5jKHApKSByZXR1cm4gZnMucmVhZEZpbGVTeW5jKHApXG4gIH0gY2F0Y2gge31cbiAgdHJ5IHtcbiAgICBjb25zdCBwID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnZm9udHMnLCAnTm90b1NhbnNKUC1SZWd1bGFyLnR0ZicpXG4gICAgaWYgKGZzLmV4aXN0c1N5bmMocCkpIHJldHVybiBmcy5yZWFkRmlsZVN5bmMocClcbiAgfSBjYXRjaCB7fVxuICByZXR1cm4gbnVsbFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVySmFwYW5lc2VJbnZvaWNlUGRmKGRhdGE6IEphcGFuZXNlSW52b2ljZURhdGEpOiBQcm9taXNlPEJ1ZmZlcj4ge1xuICBjb25zdCBwZGZEb2MgPSBhd2FpdCBQREZEb2N1bWVudC5jcmVhdGUoKVxuICBjb25zdCBwYWdlID0gcGRmRG9jLmFkZFBhZ2UoWzU5NS4yOCwgODQxLjg5XSkgLy8gQTRcbiAgY29uc3QganBGb250RGF0YSA9IGxvYWRKUEZvbnQoKVxuICBjb25zdCBmb250ID0ganBGb250RGF0YVxuICAgID8gYXdhaXQgcGRmRG9jLmVtYmVkRm9udChqcEZvbnREYXRhKVxuICAgIDogYXdhaXQgcGRmRG9jLmVtYmVkRm9udChTdGFuZGFyZEZvbnRzLkhlbHZldGljYSlcbiAgY29uc3QgZHJhdyA9ICh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBzID0gMTApID0+XG4gICAgcGFnZS5kcmF3VGV4dCh0ID8/ICcnLCB7IHgsIHksIHNpemU6IHMsIGZvbnQsIGNvbG9yOiByZ2IoMCwgMCwgMCkgfSlcblxuICAvLyDjg5jjg4Pjg4DvvIjlt6blj7PvvIlcbiAgZHJhdygn77yI55m65rOo6ICF77yJJywgNTAsIDgwMClcbiAgZHJhdyhkYXRhLmlzc3Vlci5hZGRyZXNzIHx8ICcnLCA1MCwgNzg1KVxuICBkcmF3KGRhdGEuaXNzdWVyLm5hbWUgfHwgJycsIDUwLCA3NzApXG4gIGlmIChkYXRhLmlzc3Vlci5jb250YWN0KSBkcmF3KGDku6PooajogIUgJHtkYXRhLmlzc3Vlci5jb250YWN0fWAsIDUwLCA3NTYpXG5cbiAgZHJhdygn77yI6KuL6LKg6ICF77yJJywgNDIwLCA4MDApXG4gIGlmIChkYXRhLmlzc3Vlci5pbnZvaWNlUmVnTm8pIGRyYXcoYOeZu+mMsueVquWPtzogJHtkYXRhLmlzc3Vlci5pbnZvaWNlUmVnTm99YCwgNDIwLCA4MTUpXG4gIGlmIChkYXRhLmNvbnRyYWN0b3IuYWRkcmVzcykgZHJhdyhkYXRhLmNvbnRyYWN0b3IuYWRkcmVzcywgNDIwLCA3ODUpXG4gIGRyYXcoZGF0YS5jb250cmFjdG9yLm5hbWUgfHwgJycsIDQyMCwgNzcwKVxuXG4gIC8vIOOCv+OCpOODiOODq1xuICBkcmF3KCfoq4sg5rGCIOabuCcsIDI3MCwgNzIwLCAxOClcblxuICAvLyDjg5zjg4Pjgq/jgrnnvqRcbiAgY29uc3QgbGVmdCA9IDQwXG4gIGNvbnN0IHdpZHRoID0gNTE1XG4gIGxldCB5ID0gNzAwXG4gIGNvbnN0IHJvd0ggPSAyMlxuXG4gIGNvbnN0IGJveCA9IChsYWJlbDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIGNvbHMgPSBbMTIwLCB3aWR0aCAtIDEyMF0pID0+IHtcbiAgICBwYWdlLmRyYXdSZWN0YW5nbGUoeyB4OiBsZWZ0LCB5OiB5IC0gcm93SCwgd2lkdGgsIGhlaWdodDogcm93SCwgYm9yZGVyQ29sb3I6IHJnYigwLCAwLCAwKSwgYm9yZGVyV2lkdGg6IDEgfSlcbiAgICBwYWdlLmRyYXdMaW5lKHsgc3RhcnQ6IHsgeDogbGVmdCArIGNvbHNbMF0sIHk6IHkgLSByb3dIIH0sIGVuZDogeyB4OiBsZWZ0ICsgY29sc1swXSwgeTogeSB9LCBjb2xvcjogcmdiKDAsIDAsIDApIH0pXG4gICAgZHJhdyhsYWJlbCwgbGVmdCArIDYsIHkgLSAxNSlcbiAgICBkcmF3KGNvbnRlbnQsIGxlZnQgKyBjb2xzWzBdICsgNiwgeSAtIDE1KVxuICAgIHkgLT0gcm93SFxuICB9XG5cbiAgYm94KCfms6jmlofnlarlj7cnLCBkYXRhLm9yZGVyTm8pXG4gIGJveCgn5ouF5b2T6ICFJywgZGF0YS5hc3NpZ25lZSB8fCAnJylcbiAgYm94KCfmpa3li5nlkI0nLCBkYXRhLnRpdGxlKVxuICBib3goJ+W3peacnycsIGAke2RhdGEucGVyaW9kLmZyb20gPz8gJyd9IOOAnCAke2RhdGEucGVyaW9kLnRvID8/ICcnfWApXG5cbiAgLy8g6YeR6aGN44Oc44OD44Kv44K5XG4gIGNvbnN0IHRheCA9IE1hdGgucm91bmQoZGF0YS5hbW91bnRFeGNsICogZGF0YS50YXhSYXRlKVxuICBjb25zdCB0b3RhbCA9IGRhdGEuYW1vdW50RXhjbCArIHRheFxuICBwYWdlLmRyYXdSZWN0YW5nbGUoeyB4OiBsZWZ0LCB5OiB5IC0gcm93SCAqIDIsIHdpZHRoLCBoZWlnaHQ6IHJvd0ggKiAyLCBib3JkZXJDb2xvcjogcmdiKDAsIDAsIDApLCBib3JkZXJXaWR0aDogMSB9KVxuICBwYWdlLmRyYXdMaW5lKHsgc3RhcnQ6IHsgeDogbGVmdCArIDI1MCwgeTogeSAtIHJvd0ggKiAyIH0sIGVuZDogeyB4OiBsZWZ0ICsgMjUwLCB5OiB5IH0sIGNvbG9yOiByZ2IoMCwgMCwgMCkgfSlcbiAgZHJhdygn5aWR57SE6YeR6aGNJywgbGVmdCArIDYsIHkgLSAxNSlcbiAgZHJhdyhgJHtkYXRhLmFtb3VudEV4Y2wudG9Mb2NhbGVTdHJpbmcoJ2phLUpQJyl9IOWGhmAsIGxlZnQgKyAxMjAsIHkgLSAxNSlcbiAgZHJhdygn5YaF44CB5raI6LK756iOKDEwJSknLCBsZWZ0ICsgMjYwLCB5IC0gMTUpXG4gIGRyYXcoYCR7dGF4LnRvTG9jYWxlU3RyaW5nKCdqYS1KUCcpfSDlhoZgLCBsZWZ0ICsgMzkwLCB5IC0gMTUpXG4gIGRyYXcoJ+eojui+vOmHkemhjScsIGxlZnQgKyAyNjAsIHkgLSAxNSAtIHJvd0gpXG4gIGRyYXcoYCR7dG90YWwudG9Mb2NhbGVTdHJpbmcoJ2phLUpQJyl9IOWGhmAsIGxlZnQgKyAzOTAsIHkgLSAxNSAtIHJvd0gpXG4gIHkgLT0gcm93SCAqIDJcblxuICBib3goJ+aUr+aJleaXpScsIGRhdGEuZHVlRGF0ZSB8fCAnJylcbiAgYm94KCfmlK/miZXmlrnms5UnLCBkYXRhLnBheU1ldGhvZClcblxuICAvLyDlgpnogINcbiAgcGFnZS5kcmF3UmVjdGFuZ2xlKHsgeDogbGVmdCwgeTogeSAtIHJvd0ggKiAyLCB3aWR0aCwgaGVpZ2h0OiByb3dIICogMiwgYm9yZGVyQ29sb3I6IHJnYigwLCAwLCAwKSwgYm9yZGVyV2lkdGg6IDEgfSlcbiAgZHJhdygn5YKZ6ICDJywgbGVmdCArIDYsIHkgLSAxNSlcbiAgZHJhdyhkYXRhLm5vdGUgfHwgJ+KAu+aUr+aJlemHkemhjeOBr+aMr+i+vOaJi+aVsOaWmeetieOAgea6kOazieW+tOWPjuOCkuaOp+mZpOOBl+OBn+mHkemhjeOBqOOBmeOCiycsIGxlZnQgKyA1MCwgeSAtIDE1KVxuICB5IC09IHJvd0ggKiAyICsgMTBcblxuICAvLyDlkIjoqIjjgIHmupDms4lcbiAgZHJhdyhg5bCP6KiIOiAgwqUke2RhdGEuYW1vdW50RXhjbC50b0xvY2FsZVN0cmluZygnamEtSlAnKX1gLCBsZWZ0LCB5KVxuICBkcmF3KGDmtojosrvnqI4oMTAlKTogIMKlJHt0YXgudG9Mb2NhbGVTdHJpbmcoJ2phLUpQJyl9YCwgbGVmdCArIDE4MCwgeSlcbiAgZHJhdyhg5ZCI6KiIOiAgwqUke3RvdGFsLnRvTG9jYWxlU3RyaW5nKCdqYS1KUCcpfWAsIGxlZnQgKyAzNjAsIHkpXG4gIHkgLT0gMThcbiAgZHJhdyhg5rqQ5rOJ5b605Y+O56iOOiAgwqUke2RhdGEud2l0aEhvbGRpbmcudG9Mb2NhbGVTdHJpbmcoJ2phLUpQJyl9YCwgbGVmdCwgeSlcblxuICByZXR1cm4gQnVmZmVyLmZyb20oYXdhaXQgcGRmRG9jLnNhdmUoKSlcbn1cblxuXG4iXSwibmFtZXMiOlsiZ2VuZXJhdGVQZGZQbGFjZWhvbGRlciIsInBheWxvYWQiLCJjb250ZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsIlBERkRvY3VtZW50IiwiU3RhbmRhcmRGb250cyIsInJnYiIsImZzIiwicGF0aCIsInJlbmRlclRlbXBsYXRlUGRmIiwia2luZCIsImRhdGEiLCJwZGZEb2MiLCJjcmVhdGUiLCJwYWdlIiwiYWRkUGFnZSIsImZvbnQiLCJlbWJlZEZvbnQiLCJIZWx2ZXRpY2EiLCJkcmF3VGV4dCIsInQiLCJ4IiwieSIsInMiLCJzaXplIiwiY29sb3IiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwidGl0bGUiLCJsZWZ0IiwidG9wIiwid2lkdGgiLCJyb3dIIiwiZHJhd1JlY3RhbmdsZSIsImxpbmVzIiwibGVuZ3RoIiwiaGVpZ2h0IiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsImZvckVhY2giLCJsIiwiaSIsImRyYXdMaW5lIiwic3RhcnQiLCJlbmQiLCJib3hUb3AiLCJhbW91bnQiLCJ0b0xvY2FsZVN0cmluZyIsIm5vdGUiLCJzYXZlIiwibG9hZEpQRm9udCIsInAiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImV4aXN0c1N5bmMiLCJyZWFkRmlsZVN5bmMiLCJyZW5kZXJKYXBhbmVzZUludm9pY2VQZGYiLCJqcEZvbnREYXRhIiwiZHJhdyIsImlzc3VlciIsImFkZHJlc3MiLCJuYW1lIiwiY29udGFjdCIsImludm9pY2VSZWdObyIsImNvbnRyYWN0b3IiLCJib3giLCJsYWJlbCIsImNvbHMiLCJvcmRlck5vIiwiYXNzaWduZWUiLCJwZXJpb2QiLCJ0byIsInRheCIsIk1hdGgiLCJyb3VuZCIsImFtb3VudEV4Y2wiLCJ0YXhSYXRlIiwidG90YWwiLCJkdWVEYXRlIiwicGF5TWV0aG9kIiwid2l0aEhvbGRpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/pdf.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupabaseAdmin: () => (/* binding */ createSupabaseAdmin),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   resetPassword: () => (/* binding */ resetPassword),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signOut: () => (/* binding */ signOut),\n/* harmony export */   signUp: () => (/* binding */ signUp),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://rxnozwuamddqlcwysxag.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NjY4MDMsImV4cCI6MjA3MzM0MjgwM30.0sbl6zWJ1XalGTFbsgeMpth6yH-oQA_P1eTCc8lKoAU\" || 0;\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Admin client for server-side operations\nconst createSupabaseAdmin = ()=>{\n    const supabaseUrl = \"https://rxnozwuamddqlcwysxag.supabase.co\" || 0;\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Nzc2NjgwMywiZXhwIjoyMDczMzQyODAzfQ.w7KcFrtcTRhqoHwTSlgTc6NDNHIJH985rAgT9bD0ipE\";\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n};\n// Auth helpers\nconst getCurrentUser = async ()=>{\n    const { data: { user }, error } = await supabase.auth.getUser();\n    if (error) throw error;\n    return user;\n};\nconst signIn = async (email, password)=>{\n    const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password\n    });\n    if (error) throw error;\n    return data;\n};\nconst signUp = async (email, password, userData)=>{\n    const { data, error } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n            data: userData\n        }\n    });\n    if (error) throw error;\n    return data;\n};\nconst signOut = async ()=>{\n    const { error } = await supabase.auth.signOut();\n    if (error) throw error;\n};\nconst resetPassword = async (email)=>{\n    const { data, error } = await supabase.auth.resetPasswordForEmail(email, {\n        redirectTo: `${window.location.origin}/auth/reset-password`\n    });\n    if (error) throw error;\n    return data;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQW9EO0FBRXBELE1BQU1DLGNBQWNDLDBDQUFvQyxJQUFJO0FBQzVELE1BQU1HLGtCQUFrQkgsa05BQXlDLElBQUk7QUFFOUQsTUFBTUssV0FBV1AsbUVBQVlBLENBQUNDLGFBQWFJLGlCQUFnQjtBQUVsRSwwQ0FBMEM7QUFDbkMsTUFBTUcsc0JBQXNCO0lBQ2pDLE1BQU1QLGNBQWNDLDBDQUFvQyxJQUFJO0lBQzVELE1BQU1PLHFCQUFxQlAsUUFBUUMsR0FBRyxDQUFDTyx5QkFBeUIsSUFBSTtJQUVwRSxPQUFPVixtRUFBWUEsQ0FDakJDLGFBQ0FRLG9CQUNBO1FBQ0VFLE1BQU07WUFDSkMsa0JBQWtCO1lBQ2xCQyxnQkFBZ0I7UUFDbEI7SUFDRjtBQUVKLEVBQUM7QUE4Q0QsZUFBZTtBQUNSLE1BQU1DLGlCQUFpQjtJQUM1QixNQUFNLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1WLFNBQVNJLElBQUksQ0FBQ08sT0FBTztJQUM3RCxJQUFJRCxPQUFPLE1BQU1BO0lBQ2pCLE9BQU9EO0FBQ1QsRUFBQztBQUVNLE1BQU1HLFNBQVMsT0FBT0MsT0FBZUM7SUFDMUMsTUFBTSxFQUFFTixJQUFJLEVBQUVFLEtBQUssRUFBRSxHQUFHLE1BQU1WLFNBQVNJLElBQUksQ0FBQ1csa0JBQWtCLENBQUM7UUFDN0RGO1FBQ0FDO0lBQ0Y7SUFDQSxJQUFJSixPQUFPLE1BQU1BO0lBQ2pCLE9BQU9GO0FBQ1QsRUFBQztBQUVNLE1BQU1RLFNBQVMsT0FBT0gsT0FBZUMsVUFBa0JHO0lBQzVELE1BQU0sRUFBRVQsSUFBSSxFQUFFRSxLQUFLLEVBQUUsR0FBRyxNQUFNVixTQUFTSSxJQUFJLENBQUNZLE1BQU0sQ0FBQztRQUNqREg7UUFDQUM7UUFDQUksU0FBUztZQUNQVixNQUFNUztRQUNSO0lBQ0Y7SUFDQSxJQUFJUCxPQUFPLE1BQU1BO0lBQ2pCLE9BQU9GO0FBQ1QsRUFBQztBQUVNLE1BQU1XLFVBQVU7SUFDckIsTUFBTSxFQUFFVCxLQUFLLEVBQUUsR0FBRyxNQUFNVixTQUFTSSxJQUFJLENBQUNlLE9BQU87SUFDN0MsSUFBSVQsT0FBTyxNQUFNQTtBQUNuQixFQUFDO0FBRU0sTUFBTVUsZ0JBQWdCLE9BQU9QO0lBQ2xDLE1BQU0sRUFBRUwsSUFBSSxFQUFFRSxLQUFLLEVBQUUsR0FBRyxNQUFNVixTQUFTSSxJQUFJLENBQUNpQixxQkFBcUIsQ0FBQ1IsT0FBTztRQUN2RVMsWUFBWSxDQUFDLEVBQUVDLE9BQU9DLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDLG9CQUFvQixDQUFDO0lBQzdEO0lBQ0EsSUFBSWYsT0FBTyxNQUFNQTtJQUNqQixPQUFPRjtBQUNULEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaXZpbC1lbmdpbmVlcmluZy1wbGF0Zm9ybS8uL3NyYy9saWIvc3VwYWJhc2UudHM/MDZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICdodHRwczovL3J4bm96d3VhbWRkcWxjd3lzeGFnLnN1cGFiYXNlLmNvJ1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgJ2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwYzNNaU9pSnpkWEJoWW1GelpTSXNJbkpsWmlJNkluSjRibTk2ZDNWaGJXUmtjV3hqZDNsemVHRm5JaXdpY205c1pTSTZJbUZ1YjI0aUxDSnBZWFFpT2pFM05UYzNOalk0TURNc0ltVjRjQ0k2TWpBM016TTBNamd3TTMwLjBzYmw2eldKMVhhbEdURmJzZ2VNcHRoNnlILW9RQV9QMWVUQ2M4bEtvQVUnXG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxuXG4vLyBBZG1pbiBjbGllbnQgZm9yIHNlcnZlci1zaWRlIG9wZXJhdGlvbnNcbmV4cG9ydCBjb25zdCBjcmVhdGVTdXBhYmFzZUFkbWluID0gKCkgPT4ge1xuICBjb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCB8fCAnaHR0cHM6Ly9yeG5vend1YW1kZHFsY3d5c3hhZy5zdXBhYmFzZS5jbydcbiAgY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSB8fCAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW5KNGJtOTZkM1ZoYldSa2NXeGpkM2x6ZUdGbklpd2ljbTlzWlNJNkluTmxjblpwWTJWZmNtOXNaU0lzSW1saGRDSTZNVGMxTnpjMk5qZ3dNeXdpWlhod0lqb3lNRGN6TXpReU9EQXpmUS53N0tjRnJ0Y1RSaHFvSHdUU2xnVGM2TkROSElKSDk4NXJBZ1Q5YkQwaXBFJ1xuXG4gIHJldHVybiBjcmVhdGVDbGllbnQoXG4gICAgc3VwYWJhc2VVcmwsXG4gICAgc3VwYWJhc2VTZXJ2aWNlS2V5LFxuICAgIHtcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgKVxufVxuXG4vLyBEYXRhYmFzZSB0eXBlc1xuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IHN0cmluZ1xuICBhdXRoX3VzZXJfaWQ6IHN0cmluZ1xuICBkaXNwbGF5X25hbWU6IHN0cmluZ1xuICBlbWFpbDogc3RyaW5nXG4gIHNwZWNpYWx0aWVzOiBzdHJpbmdbXVxuICBxdWFsaWZpY2F0aW9uczogc3RyaW5nW11cbiAgZXhwZXJpZW5jZV95ZWFycz86IHN0cmluZ1xuICBtZW1iZXJfbGV2ZWw/OiAnYmVnaW5uZXInIHwgJ2ludGVybWVkaWF0ZScgfCAnYWR2YW5jZWQnXG4gIGF2YXRhcl91cmw/OiBzdHJpbmdcbiAgcmF0aW5nPzogbnVtYmVyXG4gIGZvcm1hbF9uYW1lPzogc3RyaW5nXG4gIHBvc3RhbF9jb2RlPzogc3RyaW5nXG4gIGFkZHJlc3M/OiBzdHJpbmdcbiAgYWRkcmVzc19kZXRhaWw/OiBzdHJpbmdcbiAgcGhvbmVfbnVtYmVyPzogc3RyaW5nXG4gIGNvbXBhbnlfbnVtYmVyPzogc3RyaW5nXG4gIHJlZ2lzdHJhdGlvbl9udW1iZXI/OiBzdHJpbmdcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9yZ2FuaXphdGlvbiB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nXG4gIGJpbGxpbmdfZW1haWw/OiBzdHJpbmdcbiAgc3lzdGVtX2ZlZTogbnVtYmVyXG4gIGFjdGl2ZTogYm9vbGVhblxuICBjcmVhdGVkX2F0OiBzdHJpbmdcbiAgdXBkYXRlZF9hdDogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVtYmVyc2hpcCB7XG4gIGlkOiBzdHJpbmdcbiAgb3JnX2lkOiBzdHJpbmdcbiAgdXNlcl9pZDogc3RyaW5nXG4gIHJvbGU6ICdBZG1pbicgfCAnT3JnQWRtaW4nIHwgJ1N0YWZmJyB8ICdDb250cmFjdG9yJyB8ICdSZXZpZXdlcicgfCAnQXVkaXRvcidcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIFVzZXJSb2xlID0gJ0FkbWluJyB8ICdPcmdBZG1pbicgfCAnU3RhZmYnIHwgJ0NvbnRyYWN0b3InIHwgJ1Jldmlld2VyJyB8ICdBdWRpdG9yJ1xuXG4vLyBBdXRoIGhlbHBlcnNcbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50VXNlciA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcbiAgcmV0dXJuIHVzZXJcbn1cblxuZXhwb3J0IGNvbnN0IHNpZ25JbiA9IGFzeW5jIChlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbkluV2l0aFBhc3N3b3JkKHtcbiAgICBlbWFpbCxcbiAgICBwYXNzd29yZCxcbiAgfSlcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuICByZXR1cm4gZGF0YVxufVxuXG5leHBvcnQgY29uc3Qgc2lnblVwID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIHVzZXJEYXRhOiBQYXJ0aWFsPFVzZXI+KSA9PiB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnblVwKHtcbiAgICBlbWFpbCxcbiAgICBwYXNzd29yZCxcbiAgICBvcHRpb25zOiB7XG4gICAgICBkYXRhOiB1c2VyRGF0YVxuICAgIH1cbiAgfSlcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuICByZXR1cm4gZGF0YVxufVxuXG5leHBvcnQgY29uc3Qgc2lnbk91dCA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduT3V0KClcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxufVxuXG5leHBvcnQgY29uc3QgcmVzZXRQYXNzd29yZCA9IGFzeW5jIChlbWFpbDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGgucmVzZXRQYXNzd29yZEZvckVtYWlsKGVtYWlsLCB7XG4gICAgcmVkaXJlY3RUbzogYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vYXV0aC9yZXNldC1wYXNzd29yZGBcbiAgfSlcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuICByZXR1cm4gZGF0YVxufSJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiY3JlYXRlU3VwYWJhc2VBZG1pbiIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiZ2V0Q3VycmVudFVzZXIiLCJkYXRhIiwidXNlciIsImVycm9yIiwiZ2V0VXNlciIsInNpZ25JbiIsImVtYWlsIiwicGFzc3dvcmQiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJzaWduVXAiLCJ1c2VyRGF0YSIsIm9wdGlvbnMiLCJzaWduT3V0IiwicmVzZXRQYXNzd29yZCIsInJlc2V0UGFzc3dvcmRGb3JFbWFpbCIsInJlZGlyZWN0VG8iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIm9yaWdpbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/pdf-lib","vendor-chunks/@pdf-lib"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finvoices%2Froute&page=%2Fapi%2Finvoices%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finvoices%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();