"use strict";(()=>{var e={};e.id=2403,e.ids=[2403],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},31233:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>g});var a={};t.r(a),t.d(a,{GET:()=>u});var o=t(95419),s=t(69108),i=t(99678),n=t(78070);let c=(0,t(32409).eI)("https://rxnozwuamddqlcwysxag.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}});async function u(e){try{let{data:e,error:r}=await c.from("users").select("*").eq("email","admin@demo.com");if(r||!e||0===e.length)return n.Z.json({message:"発注者アカウントが見つかりません",error:r?.message});let t=e[0],{data:a,error:o}=await c.from("memberships").select(`
        id,
        role,
        org_id,
        organizations (
          id,
          name,
          email,
          description
        )
      `).eq("user_id",t.id),s=[];if(a&&a.length>0){let e=a.map(e=>e.org_id),{data:r,error:t}=await c.from("projects").select("*").in("org_id",e);s=r||[]}let{data:i,error:u}=await c.from("projects").select("*");return n.Z.json({message:"発注者組織情報確認完了",data:{adminUser:t,memberships:a||[],adminProjects:s||[],allProjects:i||[]}})}catch(e){return console.error("check-admin-org API: エラー",e),n.Z.json({message:"発注者組織情報確認エラー",error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/check-admin-org/route",pathname:"/api/check-admin-org",filename:"route",bundlePath:"app/api/check-admin-org/route"},resolvedPagePath:"/Users/sayuri/caddonworks/src/app/api/check-admin-org/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:l,headerHooks:h,staticGenerationBailout:g}=d,x="/api/check-admin-org/route";function f(){return(0,i.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:m})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6206,2409],()=>t(31233));module.exports=a})();