"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/bids/[id]/negotiate/route";
exports.ids = ["app/api/bids/[id]/negotiate/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute&page=%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute&page=%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_sayuri_caddonworks_src_app_api_bids_id_negotiate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/bids/[id]/negotiate/route.ts */ \"(rsc)/./src/app/api/bids/[id]/negotiate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/bids/[id]/negotiate/route\",\n        pathname: \"/api/bids/[id]/negotiate\",\n        filename: \"route\",\n        bundlePath: \"app/api/bids/[id]/negotiate/route\"\n    },\n    resolvedPagePath: \"/Users/sayuri/caddonworks/src/app/api/bids/[id]/negotiate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_sayuri_caddonworks_src_app_api_bids_id_negotiate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/bids/[id]/negotiate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZiaWRzJTJGJTVCaWQlNUQlMkZuZWdvdGlhdGUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmJpZHMlMkYlNUJpZCU1RCUyRm5lZ290aWF0ZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmJpZHMlMkYlNUJpZCU1RCUyRm5lZ290aWF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNheXVyaSUyRmNhZGRvbndvcmtzJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnNheXVyaSUyRmNhZGRvbndvcmtzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2tCO0FBQy9GO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2l2aWwtZW5naW5lZXJpbmctcGxhdGZvcm0vPzU3ZjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3NheXVyaS9jYWRkb253b3Jrcy9zcmMvYXBwL2FwaS9iaWRzL1tpZF0vbmVnb3RpYXRlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9iaWRzL1tpZF0vbmVnb3RpYXRlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYmlkcy9baWRdL25lZ290aWF0ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYmlkcy9baWRdL25lZ290aWF0ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9zYXl1cmkvY2FkZG9ud29ya3Mvc3JjL2FwcC9hcGkvYmlkcy9baWRdL25lZ290aWF0ZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9iaWRzL1tpZF0vbmVnb3RpYXRlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute&page=%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/bids/[id]/negotiate/route.ts":
/*!**************************************************!*\
  !*** ./src/app/api/bids/[id]/negotiate/route.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(\"https://rxnozwuamddqlcwysxag.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\nasync function PUT(request, { params }) {\n    try {\n        const bidId = params.id;\n        const body = await request.json();\n        const { action, rejection_reason } = body;\n        // Authorizationヘッダーからユーザー情報を取得\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"認証が必要です\"\n            }, {\n                status: 401\n            });\n        }\n        const token = authHeader.replace(\"Bearer \", \"\");\n        const { data: { user }, error: authError } = await supabaseAdmin.auth.getUser(token);\n        if (authError || !user) {\n            console.error(\"認証エラー:\", authError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"認証に失敗しました\"\n            }, {\n                status: 401\n            });\n        }\n        // ユーザープロフィールを取得\n        const { data: userProfile, error: userError } = await supabaseAdmin.from(\"users\").select(\"id, email, display_name\").eq(\"auth_user_id\", user.id).single();\n        if (userError || !userProfile) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"ユーザープロフィールが見つかりません\"\n            }, {\n                status: 403\n            });\n        }\n        // 入札情報を取得\n        const { data: bid, error: bidError } = await supabaseAdmin.from(\"bids\").select(`\n        *,\n        projects!inner(\n          id,\n          title,\n          org_id,\n          contractor_id\n        )\n      `).eq(\"id\", bidId).single();\n        if (bidError || !bid) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"入札が見つかりません\"\n            }, {\n                status: 404\n            });\n        }\n        // 発注者権限をチェック（OrgAdmin もしくは Admin を許可）\n        const { data: allMemberships, error: membershipError } = await supabaseAdmin.from(\"memberships\").select(\"role, org_id\").eq(\"user_id\", userProfile.id);\n        if (membershipError) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"メンバーシップ取得に失敗しました\"\n            }, {\n                status: 500\n            });\n        }\n        const hasOrgAdmin = (allMemberships || []).some((m)=>m.role === \"OrgAdmin\" && m.org_id === bid.projects.org_id);\n        const hasAdmin = (allMemberships || []).some((m)=>m.role === \"Admin\");\n        if (!hasOrgAdmin && !hasAdmin) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"この操作を実行する権限がありません\",\n                debug: {\n                    orgId: bid.projects.org_id\n                }\n            }, {\n                status: 403\n            });\n        }\n        // アクションに応じて処理\n        if (action === \"approve\") {\n            // 入札を承認（スキーマ互換: status を 'accepted' に更新）\n            const { data: updatedBid, error: updateError1 } = await supabaseAdmin.from(\"bids\").update({\n                status: \"accepted\"\n            }).eq(\"id\", bidId).select().single();\n            if (updateError1) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    message: \"入札の承認に失敗しました\",\n                    details: String(updateError1.message || updateError1)\n                }, {\n                    status: 500\n                });\n            }\n            // Boxフォルダを作成（入札承認後）\n            try {\n                const parentId = process.env.BOX_PROJECTS_ROOT_FOLDER_ID;\n                if (parentId) {\n                    const folderName = `[PRJ-${bid.projects.id.slice(0, 8)}] ${bid.projects.title}`;\n                    const subfolders = [\n                        \"受取\",\n                        \"作業\",\n                        \"納品\",\n                        \"契約\"\n                    ];\n                    const boxApiUrl = `${process.env.NEXT_PUBLIC_BASE_URL || \"http://localhost:3000\"}/api/box/provision`;\n                    const boxResponse = await fetch(boxApiUrl, {\n                        method: \"POST\",\n                        headers: {\n                            \"Content-Type\": \"application/json\"\n                        },\n                        body: JSON.stringify({\n                            name: folderName,\n                            parentId,\n                            subfolders\n                        })\n                    });\n                    if (boxResponse.ok) {\n                        const { folderId, subfolderIds } = await boxResponse.json();\n                        // プロジェクトにBox情報を保存\n                        await supabaseAdmin.from(\"projects\").update({\n                            box_folder_id: folderId\n                        }).eq(\"id\", bid.projects.id);\n                    }\n                }\n            } catch (boxError) {\n            // Box作成エラーは入札承認を妨げない\n            }\n            // 受注者に通知\n            await supabaseAdmin.from(\"notifications\").insert({\n                user_id: bid.contractor_id,\n                title: \"入札が承認されました\",\n                message: `案件「${bid.projects.title}」の入札金額（¥${bid.bid_amount.toLocaleString()}）が承認されました。契約の作成をお待ちください。`,\n                type: \"bid_approved\",\n                data: {\n                    bid_id: bidId,\n                    project_id: bid.projects.id\n                }\n            });\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"入札を承認しました\",\n                bid: updatedBid\n            });\n        } else if (action === \"reject\") {\n            if (!rejection_reason) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    message: \"拒否理由を入力してください\"\n                }, {\n                    status: 400\n                });\n            }\n            // 入札を拒否（まず status のみ、列互換のため）\n            const { error: statusErr } = await supabaseAdmin.from(\"bids\").update({\n                status: \"rejected\"\n            }).eq(\"id\", bidId);\n            if (statusErr) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    message: \"入札の拒否に失敗しました\",\n                    details: String(statusErr.message || statusErr)\n                }, {\n                    status: 500\n                });\n            }\n            // rejection_reason 列があれば追記\n            try {\n                const probe = await supabaseAdmin.from(\"bids\").select(\"rejection_reason\").limit(1);\n                if (!probe.error) {\n                    await supabaseAdmin.from(\"bids\").update({\n                        rejection_reason\n                    }).eq(\"id\", bidId);\n                }\n            } catch (_) {}\n            const { data: updatedBid } = await supabaseAdmin.from(\"bids\").select(\"*\").eq(\"id\", bidId).single();\n            if (updateError) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    message: \"入札の拒否に失敗しました\"\n                }, {\n                    status: 500\n                });\n            }\n            // 受注者に通知\n            await supabaseAdmin.from(\"notifications\").insert({\n                user_id: bid.contractor_id,\n                title: \"入札金額について\",\n                message: `案件「${bid.projects.title}」の入札金額について、発注者から以下の理由で拒否されました：\\n\\n${rejection_reason}\\n\\nこの理由に同意されますか？`,\n                type: \"bid_rejected\",\n                data: {\n                    bid_id: bidId,\n                    project_id: bid.projects.id,\n                    rejection_reason: rejection_reason\n                }\n            });\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"入札を拒否しました。受注者に通知を送信しました。\",\n                bid: updatedBid\n            });\n        } else {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"無効なアクションです\"\n            }, {\n                status: 400\n            });\n        }\n    } catch (error) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"サーバーエラーが発生しました\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9iaWRzL1tpZF0vbmVnb3RpYXRlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RDtBQUNIO0FBRXBELE1BQU1FLGdCQUFnQkQsbUVBQVlBLENBQ2hDRSwwQ0FBb0MsRUFDcENBLFFBQVFDLEdBQUcsQ0FBQ0UseUJBQXlCLEVBQ3JDO0lBQ0VDLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7QUFDRjtBQUdLLGVBQWVDLElBQ3BCQyxPQUFvQixFQUNwQixFQUFFQyxNQUFNLEVBQThCO0lBRXRDLElBQUk7UUFDRixNQUFNQyxRQUFRRCxPQUFPRSxFQUFFO1FBQ3ZCLE1BQU1DLE9BQU8sTUFBTUosUUFBUUssSUFBSTtRQUMvQixNQUFNLEVBQUVDLE1BQU0sRUFBRUMsZ0JBQWdCLEVBQUUsR0FBR0g7UUFFckMsK0JBQStCO1FBQy9CLE1BQU1JLGFBQWFSLFFBQVFTLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO1FBQ3ZDLElBQUksQ0FBQ0YsWUFBWTtZQUNmLE9BQU9uQixrRkFBWUEsQ0FBQ2dCLElBQUksQ0FDdEI7Z0JBQUVNLFNBQVM7WUFBVSxHQUNyQjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTUMsUUFBUUwsV0FBV00sT0FBTyxDQUFDLFdBQVc7UUFDNUMsTUFBTSxFQUFFQyxNQUFNLEVBQUVDLElBQUksRUFBRSxFQUFFQyxPQUFPQyxTQUFTLEVBQUUsR0FBRyxNQUFNM0IsY0FBY0ssSUFBSSxDQUFDdUIsT0FBTyxDQUFDTjtRQUU5RSxJQUFJSyxhQUFhLENBQUNGLE1BQU07WUFDdEJJLFFBQVFILEtBQUssQ0FBQyxVQUFVQztZQUN4QixPQUFPN0Isa0ZBQVlBLENBQUNnQixJQUFJLENBQ3RCO2dCQUFFTSxTQUFTO1lBQVksR0FDdkI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGdCQUFnQjtRQUNoQixNQUFNLEVBQUVHLE1BQU1NLFdBQVcsRUFBRUosT0FBT0ssU0FBUyxFQUFFLEdB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LFFBQVEsQ0FBQ2EsS0FBSyxDQUFDLGtDQUFrQyxFQUFFMUMsaUJBQWlCLGlCQUFpQixDQUFDO2dCQUN6RzhELE1BQU07Z0JBQ050RCxNQUFNO29CQUNKdUQsUUFBUXBFO29CQUNScUUsWUFBWTVDLElBQUlTLFFBQVEsQ0FBQ2pDLEVBQUU7b0JBQzNCSSxrQkFBa0JBO2dCQUNwQjtZQUNGO1lBRUYsT0FBT2xCLGtGQUFZQSxDQUFDZ0IsSUFBSSxDQUFDO2dCQUN2Qk0sU0FBUztnQkFDVGdCLEtBQUthO1lBQ1A7UUFFRixPQUFPO1lBQ0wsT0FBT25ELGtGQUFZQSxDQUFDZ0IsSUFBSSxDQUN0QjtnQkFBRU0sU0FBUztZQUFhLEdBQ3hCO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7SUFFRixFQUFFLE9BQU9LLE9BQU87UUFDZCxPQUFPNUIsa0ZBQVlBLENBQUNnQixJQUFJLENBQ3RCO1lBQUVNLFNBQVM7UUFBaUIsR0FDNUI7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaXZpbC1lbmdpbmVlcmluZy1wbGF0Zm9ybS8uL3NyYy9hcHAvYXBpL2JpZHMvW2lkXS9uZWdvdGlhdGUvcm91dGUudHM/ZWIyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbmNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhLFxuICB7XG4gICAgYXV0aDoge1xuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcbiAgICB9XG4gIH1cbilcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBiaWRJZCA9IHBhcmFtcy5pZFxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgYWN0aW9uLCByZWplY3Rpb25fcmVhc29uIH0gPSBib2R5XG5cbiAgICAvLyBBdXRob3JpemF0aW9u44OY44OD44OA44O844GL44KJ44Om44O844K244O85oOF5aCx44KS5Y+W5b6XXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKVxuICAgIGlmICghYXV0aEhlYWRlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICfoqo3oqLzjgYzlv4XopoHjgafjgZknIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5yZXBsYWNlKCdCZWFyZXIgJywgJycpXG4gICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5hdXRoLmdldFVzZXIodG9rZW4pXG4gICAgXG4gICAgaWYgKGF1dGhFcnJvciB8fCAhdXNlcikge1xuICAgICAgY29uc29sZS5lcnJvcign6KqN6Ki844Ko44Op44O8OicsIGF1dGhFcnJvcilcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBtZXNzYWdlOiAn6KqN6Ki844Gr5aSx5pWX44GX44G+44GX44GfJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyDjg6bjg7zjgrbjg7zjg5fjg63jg5XjgqPjg7zjg6vjgpLlj5blvpdcbiAgICBjb25zdCB7IGRhdGE6IHVzZXJQcm9maWxlLCBlcnJvcjogdXNlckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLnNlbGVjdCgnaWQsIGVtYWlsLCBkaXNwbGF5X25hbWUnKVxuICAgICAgLmVxKCdhdXRoX3VzZXJfaWQnLCB1c2VyLmlkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAodXNlckVycm9yIHx8ICF1c2VyUHJvZmlsZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICfjg6bjg7zjgrbjg7zjg5fjg63jg5XjgqPjg7zjg6vjgYzopovjgaTjgYvjgorjgb7jgZvjgpMnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDMgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIOWFpeacreaDheWgseOCkuWPluW+l1xuICAgIGNvbnN0IHsgZGF0YTogYmlkLCBlcnJvcjogYmlkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdiaWRzJylcbiAgICAgIC5zZWxlY3QoYFxuICAgICAgICAqLFxuICAgICAgICBwcm9qZWN0cyFpbm5lcihcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICBvcmdfaWQsXG4gICAgICAgICAgY29udHJhY3Rvcl9pZFxuICAgICAgICApXG4gICAgICBgKVxuICAgICAgLmVxKCdpZCcsIGJpZElkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoYmlkRXJyb3IgfHwgIWJpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICflhaXmnK3jgYzopovjgaTjgYvjgorjgb7jgZvjgpMnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIOeZuuazqOiAheaoqemZkOOCkuODgeOCp+ODg+OCr++8iE9yZ0FkbWluIOOCguOBl+OBj+OBryBBZG1pbiDjgpLoqLHlj6/vvIlcbiAgICBjb25zdCB7IGRhdGE6IGFsbE1lbWJlcnNoaXBzLCBlcnJvcjogbWVtYmVyc2hpcEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnbWVtYmVyc2hpcHMnKVxuICAgICAgLnNlbGVjdCgncm9sZSwgb3JnX2lkJylcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJQcm9maWxlLmlkKVxuXG4gICAgaWYgKG1lbWJlcnNoaXBFcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ+ODoeODs+ODkOODvOOCt+ODg+ODl+WPluW+l+OBq+WkseaVl+OBl+OBvuOBl+OBnycgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgIH1cblxuICAgIGNvbnN0IGhhc09yZ0FkbWluID0gKGFsbE1lbWJlcnNoaXBzIHx8IFtdKS5zb21lKG0gPT4gbS5yb2xlID09PSAnT3JnQWRtaW4nICYmIG0ub3JnX2lkID09PSBiaWQucHJvamVjdHMub3JnX2lkKVxuICAgIGNvbnN0IGhhc0FkbWluID0gKGFsbE1lbWJlcnNoaXBzIHx8IFtdKS5zb21lKG0gPT4gbS5yb2xlID09PSAnQWRtaW4nKVxuXG4gICAgaWYgKCFoYXNPcmdBZG1pbiAmJiAhaGFzQWRtaW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6ICfjgZPjga7mk43kvZzjgpLlrp/ooYzjgZnjgovmqKnpmZDjgYzjgYLjgorjgb7jgZvjgpMnLFxuICAgICAgICBkZWJ1ZzogeyBvcmdJZDogYmlkLnByb2plY3RzLm9yZ19pZCB9XG4gICAgICB9LCB7IHN0YXR1czogNDAzIH0pXG4gICAgfVxuXG4gICAgLy8g44Ki44Kv44K344On44Oz44Gr5b+c44GY44Gm5Yem55CGXG4gICAgaWYgKGFjdGlvbiA9PT0gJ2FwcHJvdmUnKSB7XG4gICAgICAvLyDlhaXmnK3jgpLmib/oqo3vvIjjgrnjgq3jg7zjg57kupLmj5s6IHN0YXR1cyDjgpIgJ2FjY2VwdGVkJyDjgavmm7TmlrDvvIlcbiAgICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZEJpZCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCdiaWRzJylcbiAgICAgICAgLnVwZGF0ZSh7IHN0YXR1czogJ2FjY2VwdGVkJyB9KVxuICAgICAgICAuZXEoJ2lkJywgYmlkSWQpXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICflhaXmnK3jga7mib/oqo3jgavlpLHmlZfjgZfjgb7jgZfjgZ8nLCBkZXRhaWxzOiBTdHJpbmcodXBkYXRlRXJyb3IubWVzc2FnZSB8fCB1cGRhdGVFcnJvcikgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgICAgfVxuXG4gICAgICAvLyBCb3jjg5Xjgqnjg6vjg4DjgpLkvZzmiJDvvIjlhaXmnK3mib/oqo3lvozvvIlcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcmVudElkID0gcHJvY2Vzcy5lbnYuQk9YX1BST0pFQ1RTX1JPT1RfRk9MREVSX0lEXG5cbiAgICAgICAgaWYgKHBhcmVudElkKSB7XG4gICAgICAgICAgY29uc3QgZm9sZGVyTmFtZSA9IGBbUFJKLSR7YmlkLnByb2plY3RzLmlkLnNsaWNlKDAsIDgpfV0gJHtiaWQucHJvamVjdHMudGl0bGV9YFxuICAgICAgICAgIGNvbnN0IHN1YmZvbGRlcnMgPSBbJ+WPl+WPlicsICfkvZzmpa0nLCAn57SN5ZOBJywgJ+Wlkee0hCddXG5cbiAgICAgICAgICBjb25zdCBib3hBcGlVcmwgPSBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQVNFX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJ30vYXBpL2JveC9wcm92aXNpb25gXG5cbiAgICAgICAgICBjb25zdCBib3hSZXNwb25zZSA9IGF3YWl0IGZldGNoKGJveEFwaVVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgbmFtZTogZm9sZGVyTmFtZSxcbiAgICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgICAgICAgIHN1YmZvbGRlcnNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGlmIChib3hSZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgeyBmb2xkZXJJZCwgc3ViZm9sZGVySWRzIH0gPSBhd2FpdCBib3hSZXNwb25zZS5qc29uKClcblxuICAgICAgICAgICAgLy8g44OX44Ot44K444Kn44Kv44OI44GrQm945oOF5aCx44KS5L+d5a2YXG4gICAgICAgICAgICBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgICAgICAgIC5mcm9tKCdwcm9qZWN0cycpXG4gICAgICAgICAgICAgIC51cGRhdGUoe1xuICAgICAgICAgICAgICAgIGJveF9mb2xkZXJfaWQ6IGZvbGRlcklkXG4gICAgICAgICAgICAgICAgLy8gYm94X3N1YmZvbGRlcnPjgqvjg6njg6DjgYzlrZjlnKjjgZfjgarjgYTjgZ/jgoHkuIDmmYLnmoTjgavpmaTlpJZcbiAgICAgICAgICAgICAgICAvLyBib3hfc3ViZm9sZGVyczogc3ViZm9sZGVySWRzID8gSlNPTi5zdHJpbmdpZnkoc3ViZm9sZGVySWRzKSA6IG51bGxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVxKCdpZCcsIGJpZC5wcm9qZWN0cy5pZClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGJveEVycm9yKSB7XG4gICAgICAgIC8vIEJveOS9nOaIkOOCqOODqeODvOOBr+WFpeacreaJv+iqjeOCkuWmqOOBkuOBquOBhFxuICAgICAgfVxuXG4gICAgICAvLyDlj5fms6jogIXjgavpgJrnn6VcbiAgICAgIGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICB1c2VyX2lkOiBiaWQuY29udHJhY3Rvcl9pZCxcbiAgICAgICAgICB0aXRsZTogJ+WFpeacreOBjOaJv+iqjeOBleOCjOOBvuOBl+OBnycsXG4gICAgICAgICAgbWVzc2FnZTogYOahiOS7tuOAjCR7YmlkLnByb2plY3RzLnRpdGxlfeOAjeOBruWFpeacremHkemhje+8iMKlJHtiaWQuYmlkX2Ftb3VudC50b0xvY2FsZVN0cmluZygpfe+8ieOBjOaJv+iqjeOBleOCjOOBvuOBl+OBn+OAguWlkee0hOOBruS9nOaIkOOCkuOBiuW+heOBoeOBj+OBoOOBleOBhOOAgmAsXG4gICAgICAgICAgdHlwZTogJ2JpZF9hcHByb3ZlZCcsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgYmlkX2lkOiBiaWRJZCxcbiAgICAgICAgICAgIHByb2plY3RfaWQ6IGJpZC5wcm9qZWN0cy5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ+WFpeacreOCkuaJv+iqjeOBl+OBvuOBl+OBnycsXG4gICAgICAgIGJpZDogdXBkYXRlZEJpZFxuICAgICAgfSlcblxuICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAncmVqZWN0Jykge1xuICAgICAgaWYgKCFyZWplY3Rpb25fcmVhc29uKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICfmi5LlkKbnkIbnlLHjgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICAgIH1cblxuICAgICAgLy8g5YWl5pyt44KS5ouS5ZCm77yI44G+44GaIHN0YXR1cyDjga7jgb/jgIHliJfkupLmj5vjga7jgZ/jgoHvvIlcbiAgICAgIGNvbnN0IHsgZXJyb3I6IHN0YXR1c0VyciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgnYmlkcycpXG4gICAgICAgIC51cGRhdGUoeyBzdGF0dXM6ICdyZWplY3RlZCcgfSlcbiAgICAgICAgLmVxKCdpZCcsIGJpZElkKVxuICAgICAgaWYgKHN0YXR1c0Vycikge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAn5YWl5pyt44Gu5ouS5ZCm44Gr5aSx5pWX44GX44G+44GX44GfJywgZGV0YWlsczogU3RyaW5nKHN0YXR1c0Vyci5tZXNzYWdlIHx8IHN0YXR1c0VycikgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgICAgfVxuXG4gICAgICAvLyByZWplY3Rpb25fcmVhc29uIOWIl+OBjOOBguOCjOOBsOi/veiomFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcHJvYmUgPSBhd2FpdCBzdXBhYmFzZUFkbWluLmZyb20oJ2JpZHMnKS5zZWxlY3QoJ3JlamVjdGlvbl9yZWFzb24nKS5saW1pdCgxKVxuICAgICAgICBpZiAoIXByb2JlLmVycm9yKSB7XG4gICAgICAgICAgYXdhaXQgc3VwYWJhc2VBZG1pbi5mcm9tKCdiaWRzJykudXBkYXRlKHsgcmVqZWN0aW9uX3JlYXNvbiB9KS5lcSgnaWQnLCBiaWRJZClcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoXykge31cblxuICAgICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkQmlkIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCdiaWRzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5lcSgnaWQnLCBiaWRJZClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBtZXNzYWdlOiAn5YWl5pyt44Gu5ouS5ZCm44Gr5aSx5pWX44GX44G+44GX44GfJyB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIC8vIOWPl+azqOiAheOBq+mAmuefpVxuICAgICAgYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgnbm90aWZpY2F0aW9ucycpXG4gICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgIHVzZXJfaWQ6IGJpZC5jb250cmFjdG9yX2lkLFxuICAgICAgICAgIHRpdGxlOiAn5YWl5pyt6YeR6aGN44Gr44Gk44GE44GmJyxcbiAgICAgICAgICBtZXNzYWdlOiBg5qGI5Lu244CMJHtiaWQucHJvamVjdHMudGl0bGV944CN44Gu5YWl5pyt6YeR6aGN44Gr44Gk44GE44Gm44CB55m65rOo6ICF44GL44KJ5Lul5LiL44Gu55CG55Sx44Gn5ouS5ZCm44GV44KM44G+44GX44Gf77yaXFxuXFxuJHtyZWplY3Rpb25fcmVhc29ufVxcblxcbuOBk+OBrueQhueUseOBq+WQjOaEj+OBleOCjOOBvuOBmeOBi++8n2AsXG4gICAgICAgICAgdHlwZTogJ2JpZF9yZWplY3RlZCcsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgYmlkX2lkOiBiaWRJZCxcbiAgICAgICAgICAgIHByb2plY3RfaWQ6IGJpZC5wcm9qZWN0cy5pZCxcbiAgICAgICAgICAgIHJlamVjdGlvbl9yZWFzb246IHJlamVjdGlvbl9yZWFzb25cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6ICflhaXmnK3jgpLmi5LlkKbjgZfjgb7jgZfjgZ/jgILlj5fms6jogIXjgavpgJrnn6XjgpLpgIHkv6HjgZfjgb7jgZfjgZ/jgIInLFxuICAgICAgICBiaWQ6IHVwZGF0ZWRCaWRcbiAgICAgIH0pXG5cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICfnhKHlirnjgarjgqLjgq/jgrfjg6fjg7PjgafjgZknIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgbWVzc2FnZTogJ+OCteODvOODkOODvOOCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBnycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlQWRtaW4iLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJQVVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwiYmlkSWQiLCJpZCIsImJvZHkiLCJqc29uIiwiYWN0aW9uIiwicmVqZWN0aW9uX3JlYXNvbiIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiZ2V0IiwibWVzc2FnZSIsInN0YXR1cyIsInRva2VuIiwicmVwbGFjZSIsImRhdGEiLCJ1c2VyIiwiZXJyb3IiLCJhdXRoRXJyb3IiLCJnZXRVc2VyIiwiY29uc29sZSIsInVzZXJQcm9maWxlIiwidXNlckVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiYmlkIiwiYmlkRXJyb3IiLCJhbGxNZW1iZXJzaGlwcyIsIm1lbWJlcnNoaXBFcnJvciIsImhhc09yZ0FkbWluIiwic29tZSIsIm0iLCJyb2xlIiwib3JnX2lkIiwicHJvamVjdHMiLCJoYXNBZG1pbiIsImRlYnVnIiwib3JnSWQiLCJ1cGRhdGVkQmlkIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJkZXRhaWxzIiwiU3RyaW5nIiwicGFyZW50SWQiLCJCT1hfUFJPSkVDVFNfUk9PVF9GT0xERVJfSUQiLCJmb2xkZXJOYW1lIiwic2xpY2UiLCJ0aXRsZSIsInN1YmZvbGRlcnMiLCJib3hBcGlVcmwiLCJORVhUX1BVQkxJQ19CQVNFX1VSTCIsImJveFJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsIm9rIiwiZm9sZGVySWQiLCJzdWJmb2xkZXJJZHMiLCJib3hfZm9sZGVyX2lkIiwiYm94RXJyb3IiLCJpbnNlcnQiLCJ1c2VyX2lkIiwiY29udHJhY3Rvcl9pZCIsImJpZF9hbW91bnQiLCJ0b0xvY2FsZVN0cmluZyIsInR5cGUiLCJiaWRfaWQiLCJwcm9qZWN0X2lkIiwic3RhdHVzRXJyIiwicHJvYmUiLCJsaW1pdCIsIl8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/bids/[id]/negotiate/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute&page=%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbids%2F%5Bid%5D%2Fnegotiate%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();