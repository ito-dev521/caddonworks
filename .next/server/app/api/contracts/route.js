"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/contracts/route";
exports.ids = ["app/api/contracts/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontracts%2Froute&page=%2Fapi%2Fcontracts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontracts%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontracts%2Froute&page=%2Fapi%2Fcontracts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontracts%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_sayuri_caddonworks_src_app_api_contracts_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/contracts/route.ts */ \"(rsc)/./src/app/api/contracts/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/contracts/route\",\n        pathname: \"/api/contracts\",\n        filename: \"route\",\n        bundlePath: \"app/api/contracts/route\"\n    },\n    resolvedPagePath: \"/Users/sayuri/caddonworks/src/app/api/contracts/route.ts\",\n    nextConfigOutput,\n    userland: _Users_sayuri_caddonworks_src_app_api_contracts_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/contracts/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb250cmFjdHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNvbnRyYWN0cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNvbnRyYWN0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNheXVyaSUyRmNhZGRvbndvcmtzJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnNheXVyaSUyRmNhZGRvbndvcmtzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ1E7QUFDckY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaXZpbC1lbmdpbmVlcmluZy1wbGF0Zm9ybS8/OTY0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc2F5dXJpL2NhZGRvbndvcmtzL3NyYy9hcHAvYXBpL2NvbnRyYWN0cy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY29udHJhY3RzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY29udHJhY3RzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jb250cmFjdHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvc2F5dXJpL2NhZGRvbndvcmtzL3NyYy9hcHAvYXBpL2NvbnRyYWN0cy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jb250cmFjdHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontracts%2Froute&page=%2Fapi%2Fcontracts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontracts%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/contracts/route.ts":
/*!****************************************!*\
  !*** ./src/app/api/contracts/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(\"https://rxnozwuamddqlcwysxag.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { project_id, contractor_id, bid_amount, start_date, end_date, contract_content } = body;\n        // バリデーション\n        if (!project_id || !contractor_id || !bid_amount || !start_date || !end_date || !contract_content) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"必須項目が入力されていません\"\n            }, {\n                status: 400\n            });\n        }\n        // Authorizationヘッダーからユーザー情報を取得\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"認証が必要です\"\n            }, {\n                status: 401\n            });\n        }\n        const token = authHeader.replace(\"Bearer \", \"\");\n        const { data: { user }, error: authError } = await supabaseAdmin.auth.getUser(token);\n        if (authError || !user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"認証に失敗しました\"\n            }, {\n                status: 401\n            });\n        }\n        // ユーザープロフィールを取得\n        const { data: userProfile, error: userError } = await supabaseAdmin.from(\"users\").select(\"id, display_name\").eq(\"auth_user_id\", user.id).single();\n        if (userError || !userProfile) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"ユーザープロフィールが見つかりません\"\n            }, {\n                status: 403\n            });\n        }\n        // 発注者権限をチェック\n        const { data: memberships, error: membershipError } = await supabaseAdmin.from(\"memberships\").select(\"role, org_id\").eq(\"user_id\", userProfile.id);\n        if (membershipError || !memberships || memberships.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"組織情報の取得に失敗しました\"\n            }, {\n                status: 403\n            });\n        }\n        const orgMembership = memberships.find((m)=>m.role === \"OrgAdmin\");\n        if (!orgMembership) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"この操作を実行する権限がありません（発注者権限が必要です）\"\n            }, {\n                status: 403\n            });\n        }\n        // 案件情報を取得\n        const { data: project, error: projectError } = await supabaseAdmin.from(\"projects\").select(\"id, title, org_id\").eq(\"id\", project_id).eq(\"org_id\", orgMembership.org_id).single();\n        if (projectError || !project) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"案件が見つかりません\"\n            }, {\n                status: 404\n            });\n        }\n        // 受注者情報を取得\n        const { data: contractor, error: contractorError } = await supabaseAdmin.from(\"users\").select(\"id, display_name, email\").eq(\"id\", contractor_id).single();\n        if (contractorError || !contractor) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"受注者情報が見つかりません\"\n            }, {\n                status: 404\n            });\n        }\n        // 契約データを作成\n        const { data: contractData, error: contractError } = await supabaseAdmin.from(\"contracts\").insert({\n            project_id,\n            contractor_id,\n            org_id: orgMembership.org_id,\n            contract_title: `${project.title} - 電子契約書`,\n            contract_content,\n            bid_amount: Number(bid_amount),\n            start_date,\n            end_date,\n            status: \"pending_contractor\"\n        }).select().single();\n        if (contractError) {\n            console.error(\"契約作成エラー:\", contractError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"契約の作成に失敗しました: \" + contractError.message\n            }, {\n                status: 400\n            });\n        }\n        // 受注者に通知を送信\n        const { error: notificationError } = await supabaseAdmin.from(\"notifications\").insert({\n            user_id: contractor_id,\n            type: \"contract_created\",\n            title: \"新しい契約書が作成されました\",\n            message: `案件「${project.title}」の契約書が作成されました。内容をご確認ください。`,\n            data: {\n                contract_id: contractData.id,\n                project_id,\n                project_title: project.title,\n                org_name: userProfile.display_name,\n                bid_amount: Number(bid_amount)\n            }\n        });\n        if (notificationError) {\n            console.error(\"通知作成エラー:\", notificationError);\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"契約書が正常に作成されました\",\n            contract: contractData\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"契約作成エラー:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"サーバーエラーが発生しました\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        // Authorizationヘッダーからユーザー情報を取得\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"認証が必要です\"\n            }, {\n                status: 401\n            });\n        }\n        const token = authHeader.replace(\"Bearer \", \"\");\n        const { data: { user }, error: authError } = await supabaseAdmin.auth.getUser(token);\n        if (authError || !user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"認証に失敗しました\"\n            }, {\n                status: 401\n            });\n        }\n        // ユーザープロフィールを取得\n        const { data: userProfile, error: userError } = await supabaseAdmin.from(\"users\").select(\"id\").eq(\"auth_user_id\", user.id).single();\n        if (userError || !userProfile) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"ユーザープロフィールが見つかりません\"\n            }, {\n                status: 403\n            });\n        }\n        // ユーザーの契約を取得\n        const { data: contracts, error: contractsError } = await supabaseAdmin.from(\"contracts\").select(`\n        id,\n        project_id,\n        contractor_id,\n        org_id,\n        contract_title,\n        contract_content,\n        bid_amount,\n        start_date,\n        end_date,\n        status,\n        contractor_signed_at,\n        org_signed_at,\n        signed_at,\n        created_at,\n        projects!contracts_project_id_fkey (\n          title\n        ),\n        users!contracts_contractor_id_fkey (\n          display_name,\n          email\n        ),\n        organizations!contracts_org_id_fkey (\n          name\n        )\n      `).or(`contractor_id.eq.${userProfile.id},org_id.in.(${userProfile.id})`).order(\"created_at\", {\n            ascending: false\n        });\n        if (contractsError) {\n            console.error(\"契約取得エラー:\", contractsError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"契約の取得に失敗しました\"\n            }, {\n                status: 400\n            });\n        }\n        const formattedContracts = contracts?.map((contract)=>({\n                id: contract.id,\n                project_id: contract.project_id,\n                contractor_id: contract.contractor_id,\n                org_id: contract.org_id,\n                contract_title: contract.contract_title,\n                contract_content: contract.contract_content,\n                bid_amount: contract.bid_amount,\n                start_date: contract.start_date,\n                end_date: contract.end_date,\n                status: contract.status,\n                contractor_signed_at: contract.contractor_signed_at,\n                org_signed_at: contract.org_signed_at,\n                signed_at: contract.signed_at,\n                created_at: contract.created_at,\n                project_title: contract.projects?.title,\n                contractor_name: contract.users?.display_name,\n                contractor_email: contract.users?.email,\n                org_name: contract.organizations?.name\n            })) || [];\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            contracts: formattedContracts\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"契約取得エラー:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"サーバーエラーが発生しました\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3JDaUMsUUFBUWlCLFNBQVNqQixNQUFNO2dCQUN2Qk0sZ0JBQWdCVyxTQUFTWCxjQUFjO2dCQUN2Q25DLGtCQUFrQjhDLFNBQVM5QyxnQkFBZ0I7Z0JBQzNDSCxZQUFZaUQsU0FBU2pELFVBQVU7Z0JBQy9CQyxZQUFZZ0QsU0FBU2hELFVBQVU7Z0JBQy9CQyxVQUFVK0MsU0FBUy9DLFFBQVE7Z0JBQzNCRyxRQUFRNEMsU0FBUzVDLE1BQU07Z0JBQ3ZCcUQsc0JBQXNCVCxTQUFTUyxvQkFBb0I7Z0JBQ25EQyxlQUFlVixTQUFTVSxhQUFhO2dCQUNyQ0MsV0FBV1gsU0FBU1csU0FBUztnQkFDN0JDLFlBQVlaLFNBQVNZLFVBQVU7Z0JBQy9CZixlQUFnQkcsU0FBU2EsUUFBUSxFQUFVdkI7Z0JBQzNDd0IsaUJBQWtCZCxTQUFTZSxLQUFLLEVBQVVoQjtnQkFDMUNpQixrQkFBbUJoQixTQUFTZSxLQUFLLEVBQVVFO2dCQUMzQ25CLFVBQVdFLFNBQVNrQixhQUFhLEVBQVVDO1lBQzdDLE9BQU8sRUFBRTtRQUVULE9BQU9wRixrRkFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQ3ZCc0QsV0FBV0s7UUFDYixHQUFHO1lBQUVuRCxRQUFRO1FBQUk7SUFFbkIsRUFBRSxPQUFPUSxPQUFPO1FBQ2Q0QixRQUFRNUIsS0FBSyxDQUFDLFlBQVlBO1FBQzFCLE9BQU83QixrRkFBWUEsQ0FBQ2EsSUFBSSxDQUN0QjtZQUFFTyxTQUFTO1FBQWlCLEdBQzVCO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2l2aWwtZW5naW5lZXJpbmctcGxhdGZvcm0vLi9zcmMvYXBwL2FwaS9jb250cmFjdHMvcm91dGUudHM/MWE4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbmNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhLFxuICB7XG4gICAgYXV0aDoge1xuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcbiAgICB9XG4gIH1cbilcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7XG4gICAgICBwcm9qZWN0X2lkLFxuICAgICAgY29udHJhY3Rvcl9pZCxcbiAgICAgIGJpZF9hbW91bnQsXG4gICAgICBzdGFydF9kYXRlLFxuICAgICAgZW5kX2RhdGUsXG4gICAgICBjb250cmFjdF9jb250ZW50XG4gICAgfSA9IGJvZHlcblxuICAgIC8vIOODkOODquODh+ODvOOCt+ODp+ODs1xuICAgIGlmICghcHJvamVjdF9pZCB8fCAhY29udHJhY3Rvcl9pZCB8fCAhYmlkX2Ftb3VudCB8fCAhc3RhcnRfZGF0ZSB8fCAhZW5kX2RhdGUgfHwgIWNvbnRyYWN0X2NvbnRlbnQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBtZXNzYWdlOiAn5b+F6aCI6aCF55uu44GM5YWl5Yqb44GV44KM44Gm44GE44G+44Gb44KTJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBBdXRob3JpemF0aW9u44OY44OD44OA44O844GL44KJ44Om44O844K244O85oOF5aCx44KS5Y+W5b6XXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKVxuICAgIGlmICghYXV0aEhlYWRlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICfoqo3oqLzjgYzlv4XopoHjgafjgZknIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5yZXBsYWNlKCdCZWFyZXIgJywgJycpXG4gICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5hdXRoLmdldFVzZXIodG9rZW4pXG4gICAgXG4gICAgaWYgKGF1dGhFcnJvciB8fCAhdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICfoqo3oqLzjgavlpLHmlZfjgZfjgb7jgZfjgZ8nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIOODpuODvOOCtuODvOODl+ODreODleOCo+ODvOODq+OCkuWPluW+l1xuICAgIGNvbnN0IHsgZGF0YTogdXNlclByb2ZpbGUsIGVycm9yOiB1c2VyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuc2VsZWN0KCdpZCwgZGlzcGxheV9uYW1lJylcbiAgICAgIC5lcSgnYXV0aF91c2VyX2lkJywgdXNlci5pZClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgaWYgKHVzZXJFcnJvciB8fCAhdXNlclByb2ZpbGUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBtZXNzYWdlOiAn44Om44O844K244O844OX44Ot44OV44Kj44O844Or44GM6KaL44Gk44GL44KK44G+44Gb44KTJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAzIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyDnmbrms6jogIXmqKnpmZDjgpLjg4Hjgqfjg4Pjgq9cbiAgICBjb25zdCB7IGRhdGE6IG1lbWJlcnNoaXBzLCBlcnJvcjogbWVtYmVyc2hpcEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnbWVtYmVyc2hpcHMnKVxuICAgICAgLnNlbGVjdCgncm9sZSwgb3JnX2lkJylcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJQcm9maWxlLmlkKVxuXG4gICAgaWYgKG1lbWJlcnNoaXBFcnJvciB8fCAhbWVtYmVyc2hpcHMgfHwgbWVtYmVyc2hpcHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogJ+e1hOe5lOaDheWgseOBruWPluW+l+OBq+WkseaVl+OBl+OBvuOBl+OBnycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3Qgb3JnTWVtYmVyc2hpcCA9IG1lbWJlcnNoaXBzLmZpbmQobSA9PiBtLnJvbGUgPT09ICdPcmdBZG1pbicpXG4gICAgaWYgKCFvcmdNZW1iZXJzaGlwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogJ+OBk+OBruaTjeS9nOOCkuWun+ihjOOBmeOCi+aoqemZkOOBjOOBguOCiuOBvuOBm+OCk++8iOeZuuazqOiAheaoqemZkOOBjOW/heimgeOBp+OBme+8iScgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8g5qGI5Lu25oOF5aCx44KS5Y+W5b6XXG4gICAgY29uc3QgeyBkYXRhOiBwcm9qZWN0LCBlcnJvcjogcHJvamVjdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgncHJvamVjdHMnKVxuICAgICAgLnNlbGVjdCgnaWQsIHRpdGxlLCBvcmdfaWQnKVxuICAgICAgLmVxKCdpZCcsIHByb2plY3RfaWQpXG4gICAgICAuZXEoJ29yZ19pZCcsIG9yZ01lbWJlcnNoaXAub3JnX2lkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAocHJvamVjdEVycm9yIHx8ICFwcm9qZWN0KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogJ+ahiOS7tuOBjOimi+OBpOOBi+OCiuOBvuOBm+OCkycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8g5Y+X5rOo6ICF5oOF5aCx44KS5Y+W5b6XXG4gICAgY29uc3QgeyBkYXRhOiBjb250cmFjdG9yLCBlcnJvcjogY29udHJhY3RvckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLnNlbGVjdCgnaWQsIGRpc3BsYXlfbmFtZSwgZW1haWwnKVxuICAgICAgLmVxKCdpZCcsIGNvbnRyYWN0b3JfaWQpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmIChjb250cmFjdG9yRXJyb3IgfHwgIWNvbnRyYWN0b3IpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBtZXNzYWdlOiAn5Y+X5rOo6ICF5oOF5aCx44GM6KaL44Gk44GL44KK44G+44Gb44KTJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyDlpZHntITjg4fjg7zjgr/jgpLkvZzmiJBcbiAgICBjb25zdCB7IGRhdGE6IGNvbnRyYWN0RGF0YSwgZXJyb3I6IGNvbnRyYWN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdjb250cmFjdHMnKVxuICAgICAgLmluc2VydCh7XG4gICAgICAgIHByb2plY3RfaWQsXG4gICAgICAgIGNvbnRyYWN0b3JfaWQsXG4gICAgICAgIG9yZ19pZDogb3JnTWVtYmVyc2hpcC5vcmdfaWQsXG4gICAgICAgIGNvbnRyYWN0X3RpdGxlOiBgJHtwcm9qZWN0LnRpdGxlfSAtIOmbu+WtkOWlkee0hOabuGAsXG4gICAgICAgIGNvbnRyYWN0X2NvbnRlbnQsXG4gICAgICAgIGJpZF9hbW91bnQ6IE51bWJlcihiaWRfYW1vdW50KSxcbiAgICAgICAgc3RhcnRfZGF0ZSxcbiAgICAgICAgZW5kX2RhdGUsXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmdfY29udHJhY3RvcidcbiAgICAgIH0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgaWYgKGNvbnRyYWN0RXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+Wlkee0hOS9nOaIkOOCqOODqeODvDonLCBjb250cmFjdEVycm9yKVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICflpZHntITjga7kvZzmiJDjgavlpLHmlZfjgZfjgb7jgZfjgZ86ICcgKyBjb250cmFjdEVycm9yLm1lc3NhZ2UgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8g5Y+X5rOo6ICF44Gr6YCa55+l44KS6YCB5L+hXG4gICAgY29uc3QgeyBlcnJvcjogbm90aWZpY2F0aW9uRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdub3RpZmljYXRpb25zJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICB1c2VyX2lkOiBjb250cmFjdG9yX2lkLFxuICAgICAgICB0eXBlOiAnY29udHJhY3RfY3JlYXRlZCcsXG4gICAgICAgIHRpdGxlOiAn5paw44GX44GE5aWR57SE5pu444GM5L2c5oiQ44GV44KM44G+44GX44GfJyxcbiAgICAgICAgbWVzc2FnZTogYOahiOS7tuOAjCR7cHJvamVjdC50aXRsZX3jgI3jga7lpZHntITmm7jjgYzkvZzmiJDjgZXjgozjgb7jgZfjgZ/jgILlhoXlrrnjgpLjgZTnorroqo3jgY/jgaDjgZXjgYTjgIJgLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY29udHJhY3RfaWQ6IGNvbnRyYWN0RGF0YS5pZCxcbiAgICAgICAgICBwcm9qZWN0X2lkLFxuICAgICAgICAgIHByb2plY3RfdGl0bGU6IHByb2plY3QudGl0bGUsXG4gICAgICAgICAgb3JnX25hbWU6IHVzZXJQcm9maWxlLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgICBiaWRfYW1vdW50OiBOdW1iZXIoYmlkX2Ftb3VudClcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgIGlmIChub3RpZmljYXRpb25FcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign6YCa55+l5L2c5oiQ44Ko44Op44O8OicsIG5vdGlmaWNhdGlvbkVycm9yKVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBtZXNzYWdlOiAn5aWR57SE5pu444GM5q2j5bi444Gr5L2c5oiQ44GV44KM44G+44GX44GfJyxcbiAgICAgIGNvbnRyYWN0OiBjb250cmFjdERhdGFcbiAgICB9LCB7IHN0YXR1czogMjAxIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCflpZHntITkvZzmiJDjgqjjg6njg7w6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBtZXNzYWdlOiAn44K144O844OQ44O844Ko44Op44O844GM55m655Sf44GX44G+44GX44GfJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBBdXRob3JpemF0aW9u44OY44OD44OA44O844GL44KJ44Om44O844K244O85oOF5aCx44KS5Y+W5b6XXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKVxuICAgIGlmICghYXV0aEhlYWRlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICfoqo3oqLzjgYzlv4XopoHjgafjgZknIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5yZXBsYWNlKCdCZWFyZXIgJywgJycpXG4gICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5hdXRoLmdldFVzZXIodG9rZW4pXG4gICAgXG4gICAgaWYgKGF1dGhFcnJvciB8fCAhdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICfoqo3oqLzjgavlpLHmlZfjgZfjgb7jgZfjgZ8nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIOODpuODvOOCtuODvOODl+ODreODleOCo+ODvOODq+OCkuWPluW+l1xuICAgIGNvbnN0IHsgZGF0YTogdXNlclByb2ZpbGUsIGVycm9yOiB1c2VyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAuZXEoJ2F1dGhfdXNlcl9pZCcsIHVzZXIuaWQpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmICh1c2VyRXJyb3IgfHwgIXVzZXJQcm9maWxlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogJ+ODpuODvOOCtuODvOODl+ODreODleOCo+ODvOODq+OBjOimi+OBpOOBi+OCiuOBvuOBm+OCkycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8g44Om44O844K244O844Gu5aWR57SE44KS5Y+W5b6XXG4gICAgY29uc3QgeyBkYXRhOiBjb250cmFjdHMsIGVycm9yOiBjb250cmFjdHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ2NvbnRyYWN0cycpXG4gICAgICAuc2VsZWN0KGBcbiAgICAgICAgaWQsXG4gICAgICAgIHByb2plY3RfaWQsXG4gICAgICAgIGNvbnRyYWN0b3JfaWQsXG4gICAgICAgIG9yZ19pZCxcbiAgICAgICAgY29udHJhY3RfdGl0bGUsXG4gICAgICAgIGNvbnRyYWN0X2NvbnRlbnQsXG4gICAgICAgIGJpZF9hbW91bnQsXG4gICAgICAgIHN0YXJ0X2RhdGUsXG4gICAgICAgIGVuZF9kYXRlLFxuICAgICAgICBzdGF0dXMsXG4gICAgICAgIGNvbnRyYWN0b3Jfc2lnbmVkX2F0LFxuICAgICAgICBvcmdfc2lnbmVkX2F0LFxuICAgICAgICBzaWduZWRfYXQsXG4gICAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICAgIHByb2plY3RzIWNvbnRyYWN0c19wcm9qZWN0X2lkX2ZrZXkgKFxuICAgICAgICAgIHRpdGxlXG4gICAgICAgICksXG4gICAgICAgIHVzZXJzIWNvbnRyYWN0c19jb250cmFjdG9yX2lkX2ZrZXkgKFxuICAgICAgICAgIGRpc3BsYXlfbmFtZSxcbiAgICAgICAgICBlbWFpbFxuICAgICAgICApLFxuICAgICAgICBvcmdhbml6YXRpb25zIWNvbnRyYWN0c19vcmdfaWRfZmtleSAoXG4gICAgICAgICAgbmFtZVxuICAgICAgICApXG4gICAgICBgKVxuICAgICAgLm9yKGBjb250cmFjdG9yX2lkLmVxLiR7dXNlclByb2ZpbGUuaWR9LG9yZ19pZC5pbi4oJHt1c2VyUHJvZmlsZS5pZH0pYClcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gICAgaWYgKGNvbnRyYWN0c0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCflpZHntITlj5blvpfjgqjjg6njg7w6JywgY29udHJhY3RzRXJyb3IpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogJ+Wlkee0hOOBruWPluW+l+OBq+WkseaVl+OBl+OBvuOBl+OBnycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgZm9ybWF0dGVkQ29udHJhY3RzID0gY29udHJhY3RzPy5tYXAoY29udHJhY3QgPT4gKHtcbiAgICAgIGlkOiBjb250cmFjdC5pZCxcbiAgICAgIHByb2plY3RfaWQ6IGNvbnRyYWN0LnByb2plY3RfaWQsXG4gICAgICBjb250cmFjdG9yX2lkOiBjb250cmFjdC5jb250cmFjdG9yX2lkLFxuICAgICAgb3JnX2lkOiBjb250cmFjdC5vcmdfaWQsXG4gICAgICBjb250cmFjdF90aXRsZTogY29udHJhY3QuY29udHJhY3RfdGl0bGUsXG4gICAgICBjb250cmFjdF9jb250ZW50OiBjb250cmFjdC5jb250cmFjdF9jb250ZW50LFxuICAgICAgYmlkX2Ftb3VudDogY29udHJhY3QuYmlkX2Ftb3VudCxcbiAgICAgIHN0YXJ0X2RhdGU6IGNvbnRyYWN0LnN0YXJ0X2RhdGUsXG4gICAgICBlbmRfZGF0ZTogY29udHJhY3QuZW5kX2RhdGUsXG4gICAgICBzdGF0dXM6IGNvbnRyYWN0LnN0YXR1cyxcbiAgICAgIGNvbnRyYWN0b3Jfc2lnbmVkX2F0OiBjb250cmFjdC5jb250cmFjdG9yX3NpZ25lZF9hdCxcbiAgICAgIG9yZ19zaWduZWRfYXQ6IGNvbnRyYWN0Lm9yZ19zaWduZWRfYXQsXG4gICAgICBzaWduZWRfYXQ6IGNvbnRyYWN0LnNpZ25lZF9hdCxcbiAgICAgIGNyZWF0ZWRfYXQ6IGNvbnRyYWN0LmNyZWF0ZWRfYXQsXG4gICAgICBwcm9qZWN0X3RpdGxlOiAoY29udHJhY3QucHJvamVjdHMgYXMgYW55KT8udGl0bGUsXG4gICAgICBjb250cmFjdG9yX25hbWU6IChjb250cmFjdC51c2VycyBhcyBhbnkpPy5kaXNwbGF5X25hbWUsXG4gICAgICBjb250cmFjdG9yX2VtYWlsOiAoY29udHJhY3QudXNlcnMgYXMgYW55KT8uZW1haWwsXG4gICAgICBvcmdfbmFtZTogKGNvbnRyYWN0Lm9yZ2FuaXphdGlvbnMgYXMgYW55KT8ubmFtZVxuICAgIH0pKSB8fCBbXVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIGNvbnRyYWN0czogZm9ybWF0dGVkQ29udHJhY3RzXG4gICAgfSwgeyBzdGF0dXM6IDIwMCB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign5aWR57SE5Y+W5b6X44Ko44Op44O8OicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgbWVzc2FnZTogJ+OCteODvOODkOODvOOCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBnycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlQWRtaW4iLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwicHJvamVjdF9pZCIsImNvbnRyYWN0b3JfaWQiLCJiaWRfYW1vdW50Iiwic3RhcnRfZGF0ZSIsImVuZF9kYXRlIiwiY29udHJhY3RfY29udGVudCIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsInRva2VuIiwicmVwbGFjZSIsImRhdGEiLCJ1c2VyIiwiZXJyb3IiLCJhdXRoRXJyb3IiLCJnZXRVc2VyIiwidXNlclByb2ZpbGUiLCJ1c2VyRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJpZCIsInNpbmdsZSIsIm1lbWJlcnNoaXBzIiwibWVtYmVyc2hpcEVycm9yIiwibGVuZ3RoIiwib3JnTWVtYmVyc2hpcCIsImZpbmQiLCJtIiwicm9sZSIsInByb2plY3QiLCJwcm9qZWN0RXJyb3IiLCJvcmdfaWQiLCJjb250cmFjdG9yIiwiY29udHJhY3RvckVycm9yIiwiY29udHJhY3REYXRhIiwiY29udHJhY3RFcnJvciIsImluc2VydCIsImNvbnRyYWN0X3RpdGxlIiwidGl0bGUiLCJOdW1iZXIiLCJjb25zb2xlIiwibm90aWZpY2F0aW9uRXJyb3IiLCJ1c2VyX2lkIiwidHlwZSIsImNvbnRyYWN0X2lkIiwicHJvamVjdF90aXRsZSIsIm9yZ19uYW1lIiwiZGlzcGxheV9uYW1lIiwiY29udHJhY3QiLCJHRVQiLCJjb250cmFjdHMiLCJjb250cmFjdHNFcnJvciIsIm9yIiwib3JkZXIiLCJhc2NlbmRpbmciLCJmb3JtYXR0ZWRDb250cmFjdHMiLCJtYXAiLCJjb250cmFjdG9yX3NpZ25lZF9hdCIsIm9yZ19zaWduZWRfYXQiLCJzaWduZWRfYXQiLCJjcmVhdGVkX2F0IiwicHJvamVjdHMiLCJjb250cmFjdG9yX25hbWUiLCJ1c2VycyIsImNvbnRyYWN0b3JfZW1haWwiLCJlbWFpbCIsIm9yZ2FuaXphdGlvbnMiLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/contracts/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontracts%2Froute&page=%2Fapi%2Fcontracts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontracts%2Froute.ts&appDir=%2FUsers%2Fsayuri%2Fcaddonworks%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsayuri%2Fcaddonworks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();