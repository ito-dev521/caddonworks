"use strict";(()=>{var e={};e.id=6326,e.ids=[6326],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},26456:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>f,patchFetch:()=>N,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>h});var a={};t.r(a),t.d(a,{GET:()=>u});var o=t(95419),n=t(69108),s=t(99678),i=t(78070);let c="KE9fgJhy6Yn72";async function u(e){let{searchParams:r}=new URL(e.url),t=r.get("name"),a=r.get("number");if(!t&&!a)return i.Z.json({error:"Name or number parameter is required"},{status:400});try{console.log("Searching for:",t||a);let e=new URLSearchParams({id:c,type:"12"});if(t&&(e.append("name",t),e.append("mode","2"),e.append("target","1")),a){let r=a.replace(/[^0-9]/g,"");13===r.length&&e.append("number",r)}let r=`https://api.houjin-bangou.nta.go.jp/4?${e.toString()}`;console.log("Testing API URL:",r.replace(c,"***"));try{let e=await fetch(r,{method:"GET",headers:{Accept:"application/json","User-Agent":"Civil-Engineering-Platform/1.0"}});if(console.log("API Test - Status:",e.status),e.ok){let r=await e.text();console.log("API Success - Response length:",r.length);try{let e=JSON.parse(r);if(e.corporations&&e.corporations.length>0)return i.Z.json(e)}catch(e){console.log("API parse error, falling back to mock data")}}}catch(e){console.log("API request failed, falling back to mock data:",e)}console.log("Using mock data for search term:",t);let o=[];if(t){let e=t.toLowerCase();(e.includes("水野")||e.includes("コンサル"))&&o.push({sequenceNumber:"1",corporateNumber:"1234567890123",corporateName:"株式会社水野建設コンサルタント",prefectureName:"東京都",cityName:"千代田区",streetName:"丸の内1-1-1",process:"01",correct:"1",updateDate:"2024-01-01",registrationDate:"2020-01-01",discontinuationDate:"",kind:"301",prefectureCode:"13",cityCode:"101",latest:"1",furigana:"ミズノケンセツコンサルタント",hihyoji:"0"}),(e.includes("建設")||e.includes("土木"))&&(o.push({sequenceNumber:"2",corporateNumber:"2345678901234",corporateName:"大成建設株式会社",prefectureName:"東京都",cityName:"新宿区",streetName:"西新宿1-25-1",process:"01",correct:"1",updateDate:"2024-01-01",registrationDate:"2018-01-01",discontinuationDate:"",kind:"301",prefectureCode:"13",cityCode:"104",latest:"1",furigana:"タイセイケンセツ",hihyoji:"0"}),o.push({sequenceNumber:"3",corporateNumber:"3456789012345",corporateName:"鹿島建設株式会社",prefectureName:"東京都",cityName:"港区",streetName:"元赤坂1-3-1",process:"01",correct:"1",updateDate:"2024-01-01",registrationDate:"2017-01-01",discontinuationDate:"",kind:"301",prefectureCode:"13",cityCode:"103",latest:"1",furigana:"カジマケンセツ",hihyoji:"0"})),(e.includes("株式会社")||e.length>=2)&&o.push({sequenceNumber:"4",corporateNumber:"4567890123456",corporateName:`${t}関連企業株式会社`,prefectureName:"東京都",cityName:"渋谷区",streetName:"渋谷1-1-1",process:"01",correct:"1",updateDate:"2024-01-01",registrationDate:"2019-01-01",discontinuationDate:"",kind:"301",prefectureCode:"13",cityCode:"150",latest:"1",furigana:"カンレンキギョウ",hihyoji:"0"})}let n={count:o.length,divide_number:"1",divide_size:"10",corporations:o};return console.log("Returning mock data with",o.length,"corporations"),i.Z.json(n)}catch(e){return console.error("Error in corporate search:",e),i.Z.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/corporate-search/route",pathname:"/api/corporate-search",filename:"route",bundlePath:"app/api/corporate-search/route"},resolvedPagePath:"/Users/sayuri/caddonworks/src/app/api/corporate-search/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:m,headerHooks:g,staticGenerationBailout:h}=p,f="/api/corporate-search/route";function N(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6206],()=>t(26456));module.exports=a})();