(()=>{var e={};e.id=8713,e.ids=[8713],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},95485:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>r.ZP,__next_app__:()=>x,originalPathname:()=>o,pages:()=>d,routeModule:()=>m,tree:()=>c});var a=t(50482),i=t(69108),r=t(83543),n=t(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(s,l);let c=["",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,18015)),"/Users/sayuri/caddonworks/src/app/billing/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,61623)),"/Users/sayuri/caddonworks/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,24117)),"/Users/sayuri/caddonworks/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,48206)),"/Users/sayuri/caddonworks/src/app/not-found.tsx"]}],d=["/Users/sayuri/caddonworks/src/app/billing/page.tsx"],o="/billing/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/billing/page",pathname:"/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},18472:(e,s,t)=>{Promise.resolve().then(t.bind(t,67395))},85674:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},48411:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},96885:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},36135:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},67395:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>E});var a=t(95344),i=t(3729),r=t(57916),n=t(73644),l=t(7060),c=t(36135),d=t(66138),o=t(25545),x=t(85674),m=t(37121),h=t(48411),u=t(46064),p=t(96885),g=t(69224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,g.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),y=(0,g.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var v=t(50340);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let N=(0,g.Z)("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),f=(0,g.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);var b=t(55794),w=t(83655),_=t(5094),Z=t(23673),k=t(19591),P=t(26298),D=t(56395),S=t(77402);function q({data:e=[],className:s}){let t=e.length>0?e:[{month:"1月",revenue:24e5,expenses:18e5},{month:"2月",revenue:28e5,expenses:2e6},{month:"3月",revenue:32e5,expenses:22e5},{month:"4月",revenue:29e5,expenses:21e5},{month:"5月",revenue:35e5,expenses:24e5},{month:"6月",revenue:38e5,expenses:26e5}],i=t.reduce((e,s)=>e+s.revenue,0),r=t.reduce((e,s)=>e+s.expenses,0),n=i-r;return(0,a.jsxs)(Z.Zb,{className:s,children:[(0,a.jsxs)(Z.Ol,{children:[(0,a.jsxs)(Z.ll,{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"w-5 h-5 text-engineering-blue"}),"売上・費用チャート"]}),a.jsx(Z.SZ,{children:"月別の売上と費用の推移"})]}),(0,a.jsxs)(Z.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"総売上"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\xa5",i.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"総費用"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["\xa5",r.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"利益"}),(0,a.jsxs)("p",{className:`text-2xl font-bold ${n>=0?"text-blue-600":"text-red-600"}`,children:["\xa5",n.toLocaleString()]}),n>=0?a.jsx(u.Z,{className:"w-4 h-4 text-green-600 mx-auto mt-1"}):a.jsx(S.Z,{className:"w-4 h-4 text-red-600 mx-auto mt-1"})]})]}),a.jsx("div",{className:"space-y-3",children:t.map((e,s)=>{let i=Math.max(...t.map(e=>Math.max(e.revenue,e.expenses))),r=e.revenue/i*100,n=e.expenses/i*100;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"font-medium",children:e.month}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("span",{className:"text-green-600",children:["売上: \xa5",e.revenue.toLocaleString()]}),(0,a.jsxs)("span",{className:"text-red-600",children:["費用: \xa5",e.expenses.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-300",style:{width:`${r}%`}})}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-red-500 rounded-full transition-all duration-300",style:{width:`${n}%`}})})]})]},s)})}),a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("span",{children:"売上"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),a.jsx("span",{children:"費用"})]})]})})]})]})}var C=t(11453),A=t(43750),M=t(18704);function E(){let[e,s]=(0,i.useState)("overview"),[t,g]=(0,i.useState)("current"),{userProfile:S,userRole:E,userOrganization:O}=(0,A.useAuth)(),[G,z]=(0,i.useState)([]),[$,F]=(0,i.useState)([]),[Y,L]=(0,i.useState)(!1),U=async()=>{try{if(L(!0),"OrgAdmin"===E&&O?.id){let{data:e}=await M.OQ.from("monthly_statements").select("id, org_id, period_start, period_end, total_amount, contractors_total, operator_fee, status, pdf_url, issue_date, due_date").eq("org_id",O.id).order("period_end",{ascending:!1});z(e||[])}if("Contractor"===E&&S?.id){let{data:e}=await M.OQ.from("payouts").select("id, contractor_id, period_start, period_end, scheduled_pay_date, net_amount, status, statement_pdf_url").eq("contractor_id",S.id).order("period_end",{ascending:!1});F(e||[])}}finally{L(!1)}};(0,i.useEffect)(()=>{U()},[E,O?.id,S?.id]);let I=()=>{let e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1}},R=async()=>{if(!O?.id)return alert("組織が見つかりません");let{year:e,month:s}=I();try{if(!(await fetch(`/api/billing/invoice-orgs?year=${e}&month=${s}&org_id=${O.id}`)).ok)throw Error("生成に失敗しました");await U(),alert("請求書を生成しました")}catch(e){alert("生成に失敗しました")}},J=async e=>{try{if(!(await fetch("/api/billing/generate-doc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"invoice",id:e})})).ok)throw Error("failed");await U(),alert("請求書PDFを保存しました")}catch{alert("請求書PDFの保存に失敗しました")}},H=async e=>{try{if(!(await fetch("/api/billing/generate-doc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"ack",id:e})})).ok)throw Error("failed");await U(),alert("請書PDFを保存しました")}catch{alert("請書PDFの保存に失敗しました")}},T={monthlyRevenue:232e5,monthlyPayouts:1624e4,monthlySystemFees:696e4,pendingInvoices:12,overdueInvoices:3,processingPayouts:8,profitMargin:29.8},V=e=>{switch(e){case"paid":return"text-green-600 bg-green-100";case"issued":return"text-blue-600 bg-blue-100";case"overdue":return"text-red-600 bg-red-100";case"scheduled":return"text-yellow-600 bg-yellow-100";case"processing":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},Q=e=>{switch(e){case"paid":return a.jsx(l.Z,{className:"w-4 h-4"});case"issued":return a.jsx(c.Z,{className:"w-4 h-4"});case"overdue":return a.jsx(d.Z,{className:"w-4 h-4"});case"scheduled":return a.jsx(o.Z,{className:"w-4 h-4"});case"processing":return a.jsx(x.Z,{className:"w-4 h-4"});default:return a.jsx(m.Z,{className:"w-4 h-4"})}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-mesh",children:[a.jsx(w.W,{}),(0,a.jsxs)("div",{className:"md:ml-64 transition-all duration-300",children:[a.jsx(r.E.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-30",children:a.jsx("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(h.Z,{className:"w-6 h-6 text-engineering-blue"}),"会計・請求システム"]}),a.jsx("p",{className:"text-gray-600",children:"運営会社による一括請求・支払代行システム"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(k.C,{variant:"engineering",className:"animate-pulse",children:[a.jsx(u.Z,{className:"w-3 h-3 mr-1"}),"月間売上: ",(0,C.xG)(T.monthlyRevenue)]}),(0,a.jsxs)(_.z,{variant:"engineering",children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2"}),"月次レポート"]})]})]})})}),(0,a.jsxs)("main",{className:"px-6 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(D.i,{title:"月間売上",value:(0,C.xG)(T.monthlyRevenue),icon:a.jsx(u.Z,{className:"w-6 h-6"}),trend:{value:12.5,isPositive:!0},variant:"engineering"}),a.jsx(D.i,{title:"月間支払",value:(0,C.xG)(T.monthlyPayouts),icon:a.jsx(j,{className:"w-6 h-6"}),trend:{value:8.3,isPositive:!0},variant:"gradient"}),a.jsx(D.i,{title:"システム手数料",value:(0,C.xG)(T.monthlySystemFees),icon:a.jsx(y,{className:"w-6 h-6"}),trend:{value:15.2,isPositive:!0},variant:"glass"}),a.jsx(D.i,{title:"利益率",value:`${T.profitMargin}%`,icon:a.jsx(v.Z,{className:"w-6 h-6"}),trend:{value:2.1,isPositive:!0},variant:"default"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx(Z.Zb,{className:"hover-lift",children:a.jsx(Z.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"未払い請求書"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[a.jsx("p",{className:"text-2xl font-bold text-red-600",children:T.overdueInvoices}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["/ ",T.pendingInvoices,"件"]})]})]}),a.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:a.jsx(d.Z,{className:"w-6 h-6 text-red-600"})})]})})}),a.jsx(Z.Zb,{className:"hover-lift",children:a.jsx(Z.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"支払処理中"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:T.processingPayouts}),a.jsx("p",{className:"text-sm text-gray-500",children:"件"})]})]}),a.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:a.jsx(x.Z,{className:"w-6 h-6 text-purple-600"})})]})})}),a.jsx(Z.Zb,{className:"hover-lift",children:a.jsx(Z.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"今月の純利益"}),a.jsx("div",{className:"flex items-baseline gap-2",children:a.jsx("p",{className:"text-2xl font-bold text-green-600",children:(0,C.xG)(T.monthlyRevenue-T.monthlyPayouts)})})]}),a.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:a.jsx(N,{className:"w-6 h-6 text-green-600"})})]})})})]}),a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",label:"概要",icon:v.Z},{id:"invoices",label:"請求管理",icon:f,count:T.pendingInvoices},{id:"payouts",label:"支払管理",icon:x.Z,count:T.processingPayouts},{id:"analytics",label:"分析・レポート",icon:u.Z}].map(t=>(0,a.jsxs)("button",{onClick:()=>s(t.id),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors ${e===t.id?"border-engineering-blue text-engineering-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(t.icon,{className:"w-4 h-4"}),t.label,void 0!==t.count&&a.jsx(k.C,{variant:"destructive",className:"ml-1 text-xs",children:t.count})]},t.id))})})}),(0,a.jsxs)(n.M,{mode:"wait",children:["overview"===e&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[a.jsx(q,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(Z.Zb,{children:[(0,a.jsxs)(Z.Ol,{children:[(0,a.jsxs)(Z.ll,{className:"flex items-center gap-2",children:[a.jsx(f,{className:"w-5 h-5 text-engineering-blue"}),"最近の請求書"]}),a.jsx(Z.SZ,{children:"直近の請求状況"})]}),a.jsx(Z.aY,{children:a.jsx("div",{className:"space-y-3",children:[{id:"INV-2024-001",clientOrg:"東京都建設局",period:"2024年1月",baseAmount:156e5,feeAmount:468e4,systemFee:5e4,totalAmount:2033e4,status:"paid",issueDate:"2024-01-31",dueDate:"2024-02-29",paidDate:"2024-02-15",projects:[{name:"東京都道路設計業務",amount:52e5},{name:"橋梁点検業務",amount:38e5},{name:"河川改修設計",amount:66e5}]},{id:"INV-2024-002",clientOrg:"国土交通省",period:"2024年1月",baseAmount:89e5,feeAmount:267e4,systemFee:5e4,totalAmount:1162e4,status:"issued",issueDate:"2024-02-01",dueDate:"2024-03-01",paidDate:null,projects:[{name:"トンネル設計業務",amount:89e5}]},{id:"INV-2024-003",clientOrg:"県土整備部",period:"2024年1月",baseAmount:42e5,feeAmount:126e4,systemFee:5e4,totalAmount:551e4,status:"overdue",issueDate:"2024-01-31",dueDate:"2024-02-29",paidDate:null,projects:[{name:"地下構造物設計",amount:42e5}]}].map((e,s)=>(0,a.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:e.clientOrg}),a.jsx("div",{className:"text-sm text-gray-600",children:e.period})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:"font-bold text-engineering-blue",children:(0,C.xG)(e.totalAmount)}),(0,a.jsxs)(k.C,{className:V(e.status),children:[Q(e.status),(0,a.jsxs)("span",{className:"ml-1",children:["paid"===e.status&&"支払済","issued"===e.status&&"発行済","overdue"===e.status&&"未払"]})]})]})]},e.id))})})]}),(0,a.jsxs)(Z.Zb,{children:[(0,a.jsxs)(Z.Ol,{children:[(0,a.jsxs)(Z.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5 text-engineering-green"}),"最近の支払"]}),a.jsx(Z.SZ,{children:"受注者への支払状況"})]}),a.jsx(Z.aY,{children:a.jsx("div",{className:"space-y-3",children:[{id:"PAY-2024-001",contractorOrg:"田中設計事務所",contractorUser:"田中太郎",period:"2024年1月",amount:364e4,status:"paid",scheduledDate:"2024-01-31",paidDate:"2024-01-31",method:"銀行振込",projects:[{name:"東京都道路設計業務",amount:52e5,payout:364e4}]},{id:"PAY-2024-002",contractorOrg:"佐藤エンジニアリング",contractorUser:"佐藤花子",period:"2024年1月",amount:266e4,status:"scheduled",scheduledDate:"2024-02-29",paidDate:null,method:"銀行振込",projects:[{name:"橋梁点検業務",amount:38e5,payout:266e4}]}].map((e,s)=>(0,a.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:e.contractorUser}),a.jsx("div",{className:"text-sm text-gray-600",children:e.period})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:"font-bold text-engineering-green",children:(0,C.xG)(e.amount)}),(0,a.jsxs)(k.C,{className:V(e.status),children:[Q(e.status),(0,a.jsxs)("span",{className:"ml-1",children:["paid"===e.status&&"支払済","scheduled"===e.status&&"予定","processing"===e.status&&"処理中"]})]})]})]},e.id))})})]})]})]},"overview"),"invoices"===e&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"請求書管理"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{className:"px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-engineering-blue focus:border-transparent",value:t,onChange:e=>g(e.target.value),children:[a.jsx("option",{value:"current",children:"今月"}),a.jsx("option",{value:"last",children:"先月"}),a.jsx("option",{value:"quarter",children:"今四半期"}),a.jsx("option",{value:"year",children:"今年"})]}),(0,a.jsxs)(_.z,{variant:"outline",onClick:R,children:[a.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"今月の請求書生成"]}),(0,a.jsxs)(_.z,{variant:"engineering",onClick:U,children:[a.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"一括送信"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(G.length>0?G:[]).map(e=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium",children:["期間: ",new Date(e.period_start).toLocaleDateString("ja-JP")," 〜 ",new Date(e.period_end).toLocaleDateString("ja-JP")]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["合計: ",(0,C.xG)(e.total_amount),"（内 手数料 ",(0,C.xG)(e.operator_fee),"）"]}),a.jsx(k.C,{className:V(e.status),children:e.status})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(_.z,{variant:"outline",onClick:()=>window.open(`/api/billing/pdf?type=invoice&title=請求書&total=${e.total_amount}`,"_blank"),children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2"}),"PDFダウンロード"]}),a.jsx(_.z,{variant:"engineering",onClick:()=>J(e.id),children:"保存"})]})]},e.id)),0===G.length&&a.jsx("div",{className:"p-4 text-sm text-gray-600",children:"表示できる請求書がありません"})]})]},"invoices"),"payouts"===e&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"支払管理"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(_.z,{variant:"outline",children:[a.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"支払スケジュール"]}),(0,a.jsxs)(_.z,{variant:"engineering",onClick:U,children:[a.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"一括支払処理"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[($.length>0?$:[]).map(e=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium",children:["期間: ",new Date(e.period_start).toLocaleDateString("ja-JP")," 〜 ",new Date(e.period_end).toLocaleDateString("ja-JP")]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["支払予定日: ",e.scheduled_pay_date?new Date(e.scheduled_pay_date).toLocaleDateString("ja-JP"):"-"]}),a.jsx("p",{className:"text-lg font-bold",children:(0,C.xG)(e.net_amount)}),a.jsx(k.C,{className:V(e.status),children:e.status})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(_.z,{variant:"outline",onClick:()=>window.open(`/api/billing/pdf?type=ack&title=請書&total=${e.net_amount}`,"_blank"),children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2"}),"PDFダウンロード"]}),a.jsx(_.z,{variant:"engineering",onClick:()=>H(e.id),children:"保存"})]})]},e.id)),0===$.length&&a.jsx("div",{className:"p-4 text-sm text-gray-600",children:"表示できる支払情報がありません"})]})]},"payouts"),"analytics"===e&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"財務分析・レポート"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(Z.Zb,{children:[a.jsx(Z.Ol,{children:a.jsx(Z.ll,{children:"収益構造分析"})}),a.jsx(Z.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"基本売上"}),a.jsx("span",{className:"font-semibold",children:(0,C.xG)(195e6)})]}),a.jsx(P.E,{value:70,variant:"engineering"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"手数料収入 (30%)"}),a.jsx("span",{className:"font-semibold",children:(0,C.xG)(585e5)})]}),a.jsx(P.E,{value:21,variant:"gradient"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"システム利用料"}),a.jsx("span",{className:"font-semibold",children:(0,C.xG)(25e6)})]}),a.jsx(P.E,{value:9,variant:"default"})]})]})})]}),(0,a.jsxs)(Z.Zb,{children:[a.jsx(Z.Ol,{children:a.jsx(Z.ll,{children:"月別推移"})}),a.jsx(Z.aY,{children:a.jsx("div",{className:"space-y-3",children:[{month:"10月",revenue:185e5,growth:8.5},{month:"11月",revenue:212e5,growth:14.6},{month:"12月",revenue:198e5,growth:-6.6},{month:"1月",revenue:232e5,growth:17.2}].map((e,s)=>(0,a.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"font-medium",children:e.month}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"font-semibold",children:(0,C.xG)(e.revenue)}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[e.growth>0?a.jsx(u.Z,{className:"w-4 h-4 text-green-600"}):a.jsx(u.Z,{className:"w-4 h-4 text-red-600 rotate-180"}),(0,a.jsxs)("span",{className:`text-sm font-medium ${e.growth>0?"text-green-600":"text-red-600"}`,children:[Math.abs(e.growth),"%"]})]})]})]},e.month))})})]})]})]},"analytics")]})]})]})]})}},18015:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>i,default:()=>n});let a=(0,t(86843).createProxy)(String.raw`/Users/sayuri/caddonworks/src/app/billing/page.tsx`),{__esModule:i,$$typeof:r}=a,n=a.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1638,4679,3035,7962,5414,5188,1682,2642],()=>t(95485));module.exports=a})();