(()=>{var e={};e.id=8642,e.ids=[8642],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},72081:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.ZP,__next_app__:()=>x,originalPathname:()=>o,pages:()=>d,routeModule:()=>u,tree:()=>l});var r=t(50482),a=t(69108),n=t(83543),i=t(68300),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let l=["",{children:["test-supabase",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,59483)),"/Users/sayuri/caddonworks/src/app/test-supabase/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,61623)),"/Users/sayuri/caddonworks/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,24117)),"/Users/sayuri/caddonworks/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,48206)),"/Users/sayuri/caddonworks/src/app/not-found.tsx"]}],d=["/Users/sayuri/caddonworks/src/app/test-supabase/page.tsx"],o="/test-supabase/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/test-supabase/page",pathname:"/test-supabase",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},88513:(e,s,t)=>{Promise.resolve().then(t.bind(t,66490))},66490:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(95344),a=t(3729),n=t(18704);function i(){let[e,s]=(0,a.useState)("checking"),[t,i]=(0,a.useState)(""),[c,l]=(0,a.useState)({supabaseUrl:"",supabaseAnonKey:"",serviceRoleKey:""}),[d,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{m(),u(),x()},[]);let x=async()=>{try{let e=await fetch("/api/check-env"),s=await e.json();o(s)}catch(e){console.error("サーバー環境変数チェックエラー:",e)}},u=()=>{l({supabaseUrl:"https://rxnozwuamddqlcwysxag.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NjY4MDMsImV4cCI6MjA3MzM0MjgwM30.0sbl6zWJ1XalGTFbsgeMpth6yH-oQA_P1eTCc8lKoAU",serviceRoleKey:"サーバーサイドでのみ確認可能"})},m=async()=>{try{s("checking");let{data:e,error:t}=await n.OQ.from("users").select("count").limit(1);t?(t.message.includes("Failed to fetch")?i("Supabaseへの接続に失敗しました。環境変数を確認してください。"):t.message.includes('relation "users" does not exist')?i("usersテーブルが存在しません。データベースのセットアップが必要です。"):i(`データベースエラー: ${t.message}`),s("error")):(s("connected"),i(""))}catch(e){s("error"),i(`接続エラー: ${e instanceof Error?e.message:"不明なエラー"}`)}};return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Supabase接続テスト"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${(()=>{switch(e){case"checking":return"text-yellow-600 bg-yellow-100";case"connected":return"text-green-600 bg-green-100";case"error":return"text-red-600 bg-red-100"}})()}`,children:(()=>{switch(e){case"checking":return"接続確認中...";case"connected":return"接続成功";case"error":return"接続エラー"}})()}),r.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"再接続テスト"})]}),t&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:r.jsx("p",{className:"text-red-800 text-sm",children:t})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"環境変数の設定状況"}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-md font-medium text-gray-800 mb-2",children:"クライアントサイド（ブラウザ）"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600 w-32",children:"SUPABASE_URL:"}),r.jsx("span",{className:`text-sm ${c.supabaseUrl?"text-green-600":"text-red-600"}`,children:c.supabaseUrl?"設定済み":"未設定"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600 w-32",children:"ANON_KEY:"}),r.jsx("span",{className:`text-sm ${c.supabaseAnonKey?"text-green-600":"text-red-600"}`,children:c.supabaseAnonKey?"設定済み":"未設定"})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-md font-medium text-gray-800 mb-2",children:"サーバーサイド（API）"}),d?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600 w-32",children:"SUPABASE_URL:"}),r.jsx("span",{className:`text-sm ${d.env?.supabaseUrl?"text-green-600":"text-red-600"}`,children:d.env?.supabaseUrl?"設定済み":"未設定"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600 w-32",children:"ANON_KEY:"}),r.jsx("span",{className:`text-sm ${d.env?.supabaseAnonKey?"text-green-600":"text-red-600"}`,children:d.env?.supabaseAnonKey?"設定済み":"未設定"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600 w-32",children:"SERVICE_ROLE:"}),r.jsx("span",{className:`text-sm ${d.env?.serviceRoleKey?"text-green-600":"text-red-600"}`,children:d.env?.serviceRoleKey?"設定済み":"未設定"}),d.env?.serviceRoleKey&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["(長さ: ",d.env?.serviceRoleKeyLength,"文字)"]})]})]}):r.jsx("div",{className:"text-sm text-gray-500",children:"サーバー環境変数を確認中..."})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"設定手順"}),(0,r.jsxs)("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[(0,r.jsxs)("li",{children:["プロジェクトルートに ",r.jsx("code",{className:"bg-blue-100 px-1 rounded",children:".env.local"})," ファイルを作成"]}),r.jsx("li",{children:"Supabase Dashboard から API キーを取得"}),r.jsx("li",{children:"環境変数を設定して開発サーバーを再起動"}),r.jsx("li",{children:"データベーステーブルを作成（SQLファイルを実行）"})]})]}),c.supabaseUrl&&(0,r.jsxs)("div",{className:"mt-6 bg-gray-50 rounded-md p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"設定情報"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Supabase URL:"})," ",c.supabaseUrl]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Anon Key:"})," ",c.supabaseAnonKey?`${c.supabaseAnonKey.substring(0,20)}...`:"未設定"]})]})]})]})})})}},59483:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,t(86843).createProxy)(String.raw`/Users/sayuri/caddonworks/src/app/test-supabase/page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[1638,4679,8710],()=>t(72081));module.exports=r})();