exports.id=5188,exports.ids=[5188],exports.modules={33204:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,26840,23)),Promise.resolve().then(t.t.bind(t,38771,23)),Promise.resolve().then(t.t.bind(t,13225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,43982,23))},3933:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,61476,23))},33997:(e,r,t)=>{Promise.resolve().then(t.bind(t,43750))},24137:(e,r,t)=>{Promise.resolve().then(t.bind(t,16414))},6402:(e,r,t)=>{Promise.resolve().then(t.bind(t,76534))},16414:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(95344),i=t(3729);function n({error:e,reset:r}){return(0,i.useEffect)(()=>{console.error(e)},[e]),s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"エラーが発生しました"}),s.jsx("p",{className:"text-gray-600 text-center mb-6",children:"申し訳ございません。予期しないエラーが発生しました。"}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:r,className:"flex-1 bg-engineering-blue text-white px-4 py-2 rounded-lg hover:bg-engineering-blue/90 transition-colors",children:"再試行"}),s.jsx("button",{onClick:()=>window.location.href="/",className:"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"ホームに戻る"})]}),!1]})})}},76534:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(95344);function i({error:e,reset:r}){return s.jsx("html",{children:s.jsx("body",{children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"システムエラーが発生しました"}),s.jsx("p",{className:"text-gray-600 text-center mb-6",children:"申し訳ございません。システム全体でエラーが発生しました。"}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:r,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"再試行"}),s.jsx("button",{onClick:()=>window.location.href="/",className:"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"ホームに戻る"})]}),!1]})})})})}},43750:(e,r,t)=>{"use strict";t.r(r),t.d(r,{AuthProvider:()=>a,useAuth:()=>o});var s=t(95344),i=t(3729),n=t(18704);let l=(0,i.createContext)(void 0);function o(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function a({children:e}){let[r,t]=(0,i.useState)(null),[o,a]=(0,i.useState)(null),[c,d]=(0,i.useState)(null),[u,h]=(0,i.useState)(null),[m,x]=(0,i.useState)(!0),g=(0,i.useRef)(null);(0,i.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:r}=await n.OQ.auth.getSession();if(r){console.error("AuthProvider: セッション取得エラー:",r),x(!1);return}t(e?.user??null),e?.user&&e?.access_token?setTimeout(()=>{f(e.user.id)},0):x(!1)}catch(e){console.error("AuthProvider: 初期化エラー:",e),t(null),a(null),d(null),h(null),x(!1)}})();let{data:{subscription:e}}=n.OQ.auth.onAuthStateChange(async(e,r)=>{t(r?.user??null),r?.user&&"SIGNED_IN"===e?setTimeout(()=>{f(r.user.id)},0):"SIGNED_OUT"===e&&(a(null),d(null),h(null)),"INITIAL_SESSION"!==e&&x(!1)});return()=>e.unsubscribe()},[]);let f=async e=>{if(g.current!==e){g.current=e;try{let{data:r,error:t}=await n.OQ.from("users").select("*").eq("auth_user_id",e).single();if(t&&"PGRST116"!==t.code){console.error("Error fetching user profile:",t);return}if(a(r),r){let{data:e,error:t}=await n.OQ.from("memberships").select("role, org_id").eq("user_id",r.id).single();if(t&&"PGRST116"!==t.code){console.error("Error fetching user role:",t);return}if(d(e?.role||null),e?.org_id){let{data:r,error:t}=await n.OQ.from("organizations").select("id, name").eq("id",e.org_id).single();t?(console.error("Error fetching organization:",t),h(null)):h({id:r.id,name:r.name})}else h(null)}}catch(e){console.error("Error in fetchUserProfile:",e)}finally{g.current=null,x(!1)}}},b=async(e,r)=>{x(!0);try{let t=n.OQ.auth.signInWithPassword({email:e,password:r}),s=new Promise((e,r)=>{setTimeout(()=>r(Error("認証タイムアウト（30秒）")),3e4)}),{data:i,error:l}=await Promise.race([t,s]);if(l)throw l;i?.user&&setTimeout(()=>{f(i.user.id)},50)}catch(e){throw console.error("signIn: 認証エラー",e),e}finally{x(!1)}},y=async(e,r,t)=>{x(!0);try{let{data:s,error:i}=await n.OQ.auth.signUp({email:e,password:r,options:{data:{display_name:t.display_name,specialties:t.specialties||[],qualifications:t.qualifications||[]}}});if(i)throw i;if(s.user){let{error:e}=await n.OQ.from("users").insert({auth_user_id:s.user.id,email:s.user.email,display_name:t.display_name||"",specialties:t.specialties||[],qualifications:t.qualifications||[],experience_years:t.experience_years});e&&console.error("Error creating user profile:",e)}}finally{x(!1)}},w=async()=>{x(!0);try{let{error:e}=await n.OQ.auth.signOut();if(e)throw e;t(null),a(null),d(null)}finally{x(!1)}},p=async e=>{if(!o)throw console.error("updateProfile: userProfile is null"),Error("ユーザープロフィールが見つかりません");try{let{data:r,error:t}=await n.OQ.from("users").update(e).eq("id",o.id).select().single();if(t)throw console.error("updateProfile: Supabaseエラー",t),t;a({...o,...e})}catch(e){throw console.error("Error updating profile:",e),e}};return s.jsx(l.Provider,{value:{user:r,userProfile:o,userRole:c,userOrganization:u,loading:m,signIn:b,signUp:y,signOut:w,updateProfile:p,getRedirectPath:()=>{if(!c)return"/dashboard";switch(c){case"Contractor":return"/jobs";case"OrgAdmin":return"/projects";case"Reviewer":return"/reviews";default:return"/dashboard"}}},children:e})}},18704:(e,r,t)=>{"use strict";t.d(r,{OQ:()=>s});let s=(0,t(99072).eI)("https://rxnozwuamddqlcwysxag.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4bm96d3VhbWRkcWxjd3lzeGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NjY4MDMsImV4cCI6MjA3MzM0MjgwM30.0sbl6zWJ1XalGTFbsgeMpth6yH-oQA_P1eTCc8lKoAU")},24117:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});let s=(0,t(86843).createProxy)(String.raw`/Users/sayuri/caddonworks/src/app/error.tsx`),{__esModule:i,$$typeof:n}=s,l=s.default},83543:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>l});let s=(0,t(86843).createProxy)(String.raw`/Users/sayuri/caddonworks/src/app/global-error.tsx`),{__esModule:i,$$typeof:n}=s,l=s.default},61623:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h,metadata:()=>u});var s=t(25036),i=t(42195),n=t.n(i),l=t(86843);let o=(0,l.createProxy)(String.raw`/Users/sayuri/caddonworks/src/contexts/auth-context.tsx`),{__esModule:a,$$typeof:c}=o;o.default,(0,l.createProxy)(String.raw`/Users/sayuri/caddonworks/src/contexts/auth-context.tsx#useAuth`);let d=(0,l.createProxy)(String.raw`/Users/sayuri/caddonworks/src/contexts/auth-context.tsx#AuthProvider`);t(5023);let u={title:"土木設計業務プラットフォーム | Civil Engineering Platform",description:"AI-powered civil engineering project management platform with secure file handling and comprehensive billing system.",keywords:["civil engineering","project management","construction","CAD","design"]};function h({children:e}){return s.jsx("html",{lang:"ja",className:"h-full",children:s.jsx("body",{className:`${n().className} h-full antialiased`,children:s.jsx(d,{children:e})})})}},48206:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var s=t(25036),i=t(40646),n=t.n(i);function l(){return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6 text-center",children:[s.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto bg-gray-100 rounded-full mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33"})})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"404"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"ページが見つかりません"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"お探しのページは存在しないか、移動された可能性があります。"}),s.jsx(n(),{href:"/",className:"inline-block bg-engineering-blue text-white px-6 py-2 rounded-lg hover:bg-engineering-blue/90 transition-colors",children:"ホームに戻る"})]})})}},5023:()=>{}};